class ControlMenu{constructor(e){this.post_id=e.post_id;this.div_position=e.div_position}addListeners(){jQuery(document).on("click",`.mapster-control-menu-${this.post_id} .mapster-control-menu-toggle`,(()=>{jQuery(`.mapster-control-menu-${this.post_id} #mapster-control-menu-holder`).is(":visible")?jQuery(`.mapster-control-menu-${this.post_id} #mapster-control-menu-holder`).fadeOut():jQuery(`.mapster-control-menu-${this.post_id} #mapster-control-menu-holder`).fadeIn()}))}onAdd(e){this.map=e;this._container=document.createElement("div");this._container.className=`mapboxgl-ctrl mapster-control-menu mapster-control-menu-${this.post_id}`;this._container.innerHTML=`\n      <div>\n        ${"above"===this.div_position?"<div id='mapster-control-menu-holder'></div>":""}\n        <span class="mapster-control-menu-toggle dashicons dashicons-menu"></span>\n        ${"below"===this.div_position?"<div id='mapster-control-menu-holder'></div>":""}\n      </div>\n    `;this.addListeners();return this._container}onRemove(){this._container.parentNode.removeChild(this._container);this._map=void 0}}class CustomHTMLControl{constructor(e){this.custom_html=e.custom_html}onAdd(e){this.map=e;this._container=document.createElement("div");this._container.innerHTML=this.custom_html;return this._container}onRemove(){this._container.parentNode.removeChild(this._container);this._map=void 0}}class DownloadControl{constructor(e){this.post_id=e.post_id;this.interact_with_filters=e.interact_with_filters;this.notify_on_download=e.notify_on_download;this.included_fields=e.included_fields;this.features=e.locations.concat(e.lines.concat(e.polygons))}addListeners(){jQuery(document).on("click",`.mapster-download-control-${this.post_id} .mapster-data-download`,(()=>{this.downloadFeatures()}))}downloadFeatures(){let e=this.processFeatures();e.length>0?this.downloadCSV(e):alert("No features selected for download.")}processFeatures(e){let t=[];this.features.forEach((e=>{if(this.interact_with_filters&&window.mapster_categories_hidden_features&&window.mapster_categories_hidden_features.indexOf(e.id)>-1)return;let o=e.data.location?e.data.location:e.data.line?e.data.line:e.data.polygon?e.data.polygon:null,a={};a.title=e.title;a.permalink=e.permalink;a.categories=e.categories.map((e=>e.name)).join(",");this.getRecursivePropertyValue(a,e.data.additional_details,"");a.geography=JSON.stringify(o);if(this.included_fields&&""!==this.included_fields){let e={};this.included_fields.split(",").forEach((t=>{let o=t.trim();a[o]&&(e[o]=a[o])}));a=e}t.push(a)}));return t}getRecursivePropertyValue(e,t,o){for(let a in t)Array.isArray(t[a])?e[o+a]=t[a].join(","):"object"==typeof t[a]?this.getRecursivePropertyValue(e,t[a],o+a+"_"):e[o+a]=JSON.stringify(t[a])}downloadCSV(e){const t=(e,t)=>null===t?"":t;let o=[];e.forEach((e=>{for(let t in e)-1===o.indexOf(t)&&o.push(t)}));e.forEach((e=>{o.forEach((t=>{e[t]||(e[t]="")}))}));let a=e.map((e=>o.map((o=>JSON.stringify(e[o],t).replace(/\\"/g,'""'))).join(",")));a.unshift(o.join(","));a=a.join("\r\n");var r=document.createElement("a"),s=new Blob(["\ufeff",a]),i=URL.createObjectURL(s);r.href=i;r.download="map-data-download.csv";document.body.appendChild(r);r.click();document.body.removeChild(r);if(this.notify_on_download){let e=[];jQuery(`.mapster-download-control-${this.post_id} .mapster-category-control input`).each((function(){jQuery(this).is(":checked")&&e.push(jQuery(this).closest("li").text().trim())}));fetch(`${window.mapster_params.rest_url}mapster-wp-maps/send-email`,{method:"POST",body:JSON.stringify({users:this.notify_on_download,active_filters:e})})}}onAdd(e){this.map=e;this.storedBounds=this.map.getBounds();this._container=document.createElement("div");if(window.mapster_params.public){this._container.className=`mapboxgl-ctrl mapster-download-control mapster-download-control-${this.post_id}`;this._container.innerHTML='\n        <div class="mapster-download-control-content">\n          <button class="mapster-data-download">Download Data</button>\n        </div>\n      ';this.addListeners()}return this._container}onRemove(){this._container.parentNode.removeChild(this._container);this._map=void 0}}class ListControl{constructor(e,t,o,a,r,s){this.post_id=e.post_id;this.sort_by_distance=e.sort_by_distance;this.show_distance=e.show_distance;this.units=e.units;this.group_by_category=e.group_by_category;this.list_order=e.list_order;this.markers=e.markers;this.mapLibrary=e.mapLibrary;this.listing_type=e.listing_type;this.display_images=e.display_images;this.number_of_locations=e.number_of_locations;this.store_locator=e.store_locator_options.enable;this.sort_hours_by_day=e.store_locator_options.sort_hours_by_day;this.features=e.locations.concat(e.lines.concat(e.polygons));this.currentPage=1;this.storedBounds=null;this.storedMapLocation=null}storeLocatorHTML(e){return"<div>Upgrade to Mapster Pro to enable this functionality.</div>"}filterFeatures(){const e=new MapsterHelpers;let t=[];this.features.forEach(((o,a)=>{if(!(window.mapster_categories_hidden_features&&window.mapster_categories_hidden_features.indexOf(o.id)>-1)){var r=e.makeFeatureJSON(o.data);if(this.show_distance||this.sort_by_distance){var s=turf.distance(turf.center(r).geometry.coordinates,this.getCenter());o.distance=s*("imperial"===this.units?.621371:1)}t.push(o)}}));return t}sortFeatures(e){return this.sort_by_distance?e.sort(((e,t)=>e.distance>t.distance?1:-1)):e}getCategories(){return[]}sortCategories(e){return e}getCategoryListStructure(e){return[]}setCategoryListHTML(e){return""}setHTML(e){new MapsterHelpers;let t="<ul>",o=this.sortFeatures(this.filterFeatures()),a=this.sortCategories(this.getCategories(o));if(this.group_by_category){let e=this.getCategoryListStructure(a,o);t=this.setCategoryListHTML(e)}else{var r=[];o.forEach(((e,t)=>{"paginate"===this.listing_type?this.number_of_locations*(this.currentPage-1)<=t&&this.number_of_locations*this.currentPage>t&&r.push(e):r=o}));this.store_locator?t=this.storeLocatorHTML(t,r):r.forEach((e=>{let o="";
t+=`\n            <li data-id="${e.id}">\n              ${o}\n              ${e.title}\n              <em>${e.distance?e.distance.toFixed(2)+("imperial"===this.units?" miles":" km"):""}</em>\n            </li>\n          `}));t+="</ul>"}if("paginate"===this.listing_type){t+='<div class="mapster-paging">';this.currentPage>1&&(t+='<span class="mapster-back dashicons dashicons-arrow-left"></span>');this.number_of_locations*this.currentPage<o.length&&(t+='<span class="mapster-next dashicons dashicons-arrow-right"></span>');t+="</div>"}if(e)return t;jQuery(`.mapster-list-control-${this.post_id} .mapster-list-control-content`).html(t)}getStoreHTML(e){return""}getCenter(){return[this.map.getCenter().lng,this.map.getCenter().lat]}addListeners(){var e=this;const t=new MapsterHelpers;jQuery(document).on("click",`.mapster-list-control-${this.post_id} li`,(function(o,a=!1){if(!(jQuery(this).find(".mapster-accordion-indicator").length>0||o.isTrigger&&3!==o.isTrigger)){var r=e.features.find((e=>parseInt(e.id)==jQuery(this).data("id"))),s=t.makeFeatureJSON(r.data).features[0];if("Point"===s.geometry.type){const t=e.markers.find((e=>e.mapsterProperties.id===r.id));t&&r.data.enable_popup&&e.openPopup(t,r);!t&&r.data.enable_popup&&(a||e.openPopupNonMarker(r));let o=r.data.default_zoom_level&&""!==r.data.default_zoom_level?r.data.default_zoom_level:15;e.centerMap(s.geometry.coordinates,o)}else{r.data.enable_popup&&(a||e.openPopupNonMarker(r));var i=turf.bbox(s);e.fitBounds(i,{padding:20})}if(e.store_locator){jQuery(`.mapster-list-control-${e.post_id} .mapster-list-control-content`).hide();jQuery(`.mapster-list-control-${e.post_id} .mapster-list-control-single-content`).show();jQuery(`.mapster-list-control-${e.post_id} .mapster-list-control-single-content`).html(e.getStoreHTML(r))}}}));jQuery(document).on("click",`.mapster-list-control-${this.post_id} .mapster-accordion-indicator-open, .mapster-list-control-${this.post_id} .mapster-accordion-indicator-closed`,(function(){let e=!1;jQuery(this).hasClass("mapster-accordion-indicator-open")&&(e=!0);if(e){jQuery(this).removeClass("mapster-accordion-indicator-open");jQuery(this).addClass("mapster-accordion-indicator-closed");jQuery(this).next("ul").slideToggle()}else{jQuery(this).addClass("mapster-accordion-indicator-open");jQuery(this).next("ul").slideToggle()}}));jQuery(document).on("click",`.mapster-list-control-${this.post_id} .mapster-next`,(()=>{this.currentPage=this.currentPage+1;this.setHTML()}));jQuery(document).on("click",`.mapster-list-control-${this.post_id} .mapster-back`,(()=>{this.currentPage=this.currentPage-1;this.setHTML()}));jQuery(document).on("click",`.mapster-list-control-${this.post_id} .mapster-store-locator-results`,(()=>{jQuery(".mapster-list-control-content").show();jQuery(".mapster-list-control-single-content").hide();jQuery(".mapster-list-control-single-content").empty();this.storedBounds&&this.map.fitBounds(this.storedBounds);this.storedMapLocation&&this.map.flyTo(this.storedMapLocation)}));jQuery(document).on("change",`.mapster-list-control-${this.post_id} .mapster-cat-toggle`,(()=>{this.setHTML()}))}openPopup(e,t){new MapsterHelpers;jQuery(e.getElement()).trigger("click")}openPopupNonMarker(e){const t=(new MapsterHelpers).makeFeatureJSON(e.data),o=turf.pointOnFeature(t),a=(this.map._container.offsetWidth,this.map._container.offsetHeight,()=>{const t=this.map.project(o.geometry.coordinates),a=this.map.queryRenderedFeatures(t).find((t=>t.properties.post_id&&t.properties.post_id===e.id));return a||!1}),r=()=>{const t=a();if(t){this.map.fire("click",{mapsterFoundFeature:t,mapsterFeatureID:e.id,lngLat:o.geometry.coordinates,originalEvent:{}});this.map.off("move",r)}};a()?this.map.fire("click",{mapsterFeatureID:e.id,lngLat:o.geometry.coordinates,originalEvent:{}}):this.map.on("move",r)}centerMap(e,t){this.map.flyTo({center:e,zoom:t})}fitBounds(e,t){this.map.fitBounds(e,t)}onAdd(e){this.map=e;this.storedMapLocation={center:this.map.getCenter(),zoom:this.map.getZoom(),pitch:this.map.getPitch(),bearing:this.map.getBearing()};this._container=document.createElement("div");this._container.className=`mapboxgl-ctrl mapster-list-control mapster-list-control-${this.post_id}`+(this.store_locator?" mapster-store-locator":"")+(window.innerWidth<768?" mapster-mobile":"");this._container.innerHTML=`<div class="mapster-list-control-content" style="max-height : ${jQuery(this.map._container).height()-100}px">`+this.setHTML(!0)+`</div><div class="mapster-list-control-single-content" style="max-height : ${jQuery(this.map._container).height()}px;"></div>`;if(window.innerWidth<768&&this.store_locator){jQuery(this.map._container).css("overflow","visible");this._container.style.marginTop=`${jQuery(this.map._container).height()}px`;jQuery(this.map._container).after(`<div style="height: ${jQuery(this.map._container).height()}px"></div>`);jQuery(".maplibregl-control-container > div, .mapboxgl-control-container > div").width("100%");jQuery(".mapboxgl-ctrl-geocoder").width("100%")}this.addListeners();this.map.on("moveend",(()=>{this.group_by_category||this.setHTML()}));setTimeout((()=>{this.store_locator&&!jQuery(".mapster-store-locator .mapboxgl-ctrl-geocoder").length&&jQuery(".mapboxgl-ctrl-geocoder").prependTo(".mapster-store-locator")}),100);return this._container}onAddGoogleMap(e){this.map=e;this._container=document.createElement("div");this._container.className=`mapboxgl-ctrl mapster-list-control mapster-list-control-${this.post_id} mapster-list-control-google`+(this.store_locator?" mapster-store-locator":"")+(window.innerWidth<768?" mapster-mobile":"");this._container.innerHTML=`<div class="mapster-list-control-content" style="max-height : ${jQuery(this.map.__gm.developerProvidedDiv).height()-100}px">`+this.setHTML(!0)+`</div><div class="mapster-list-control-single-content" style="max-height : ${jQuery(this.map.__gm.developerProvidedDiv).height()}px;"></div>`;this.addListeners();this.map.addListener("dragend",(()=>{this.group_by_category||this.setHTML()}));google.maps.event.addListenerOnce(this.map,"idle",(()=>{this.store_locator&&setTimeout((()=>{jQuery(".mapster-google-geocoder-input").addClass("geocoder-google-store-locator");jQuery(".mapster-google-geocoder-input").prependTo(".mapster-store-locator")}),1e3);const e=this.map.getBounds();this.storedBounds=[e.getSouthWest().lng(),e.getSouthWest().lat(),e.getNorthEast().lng(),e.getNorthEast().lat()]}));return this._container}onRemove(){this._container.parentNode.removeChild(this._container);this._map=void 0}}
;class PitchToggle{constructor(e=-20,t=70,o=null){this._bearing=-20;this._pitch=70;this._minpitchzoom=o}onAdd(e){this._map=e;let t=this;this._btn=document.createElement("button");this._btn.className="mapboxgl-ctrl-icon mapboxgl-ctrl-pitchtoggle-3d";this._btn.type="button";this._btn["aria-label"]="Toggle Pitch";this._btn.onclick=function(){if(0===e.getPitch()){let o={pitch:t._pitch,bearing:t._bearing};t._minpitchzoom&&e.getZoom()>t._minpitchzoom&&(o.zoom=t._minpitchzoom);e.easeTo(o);t._btn.className="mapboxgl-ctrl-icon mapboxgl-ctrl-pitchtoggle-2d"}else{e.easeTo({pitch:0,bearing:0});t._btn.className="mapboxgl-ctrl-icon mapboxgl-ctrl-pitchtoggle-3d"}};this._container=document.createElement("div");this._container.className="mapboxgl-ctrl-group mapboxgl-ctrl";this._container.appendChild(this._btn);return this._container}onRemove(){this._container.parentNode.removeChild(this._container);this._map=void 0}}class PrintControl{constructor(){}onAdd(e){this._map=e;let t=this;this._btn=document.createElement("button");this._btn.className="mapboxgl-ctrl-icon mapboxgl-ctrl-printcontrol";this._btn.type="button";this._btn["aria-label"]="Print";this._btn.innerHTML='\n      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16" style="margin-top: 3px;">\n        <path d="M5 1a2 2 0 0 0-2 2v1h10V3a2 2 0 0 0-2-2zm6 8H5a1 1 0 0 0-1 1v3a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1"/>\n        <path d="M0 7a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2h-1v-2a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v2H2a2 2 0 0 1-2-2zm2.5 1a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1"/>\n      </svg>\n    ';this._btn.onclick=function(){
};this._container=document.createElement("div");this._container.className="mapboxgl-ctrl-group mapboxgl-ctrl";this._container.appendChild(this._btn);return this._container}printMap(){if(!("devicePixelRatio"in window)){Object.defineProperty(window,"devicePixelRatio",{get:function(){return 3.125}})}const e=document.createElement("canvas"),t=this._map.getCanvas().width,o=this._map.getCanvas().height;e.width=t;e.height=o;const a=e.getContext("2d"),r=new Image;r.onload=function(){a.fillStyle="#333";a.fillRect(0,0,t,o);a.drawImage(r,0,0);let s=document.createElement("a");s.download="image.png";s.href=e.toDataURL("image/png",.92);s.click()};r.src=this._map.getCanvas().toDataURL("image/png")}onRemove(){this._container.parentNode.removeChild(this._container);this._map=void 0}}class CategoryControl{constructor(e){this.post_id=e.post_id;this.displayMode=e.category_display;this.checkboxMode=e.checkbox_display;this.initialVisibility=e.initial_visibility;this.preSelectedCategories=e.pre_selected_categories;this.categoryOrder=e.category_order;this.independentChildren=e.independent_children;this.excludedCategories=e.excluded_categories;this.functionality=e.functionality;this.additional_filters=e.additional_filters;this.reset_button=e.reset_button;this.accordion_layout=e.accordion_layout;this.show_number_of_features=e.show_number_of_features;this.did_one_accordion=!1;this.markers=e.markers;this.map_provider=e.map_provider;this.circle_clustering=e.circle_clustering;this.label_icon_clustering=e.label_icon_clustering;this.marker_clustering=e.marker_clustering;this.cluster_options=e.cluster_options;this.features=e.locations.concat(e.lines.concat(e.polygons));this.dataLayers=e.dataLayers;this.locations=e.locations;this.lines=e.lines;this.polygons=e.polygons}setMarkers(e){this.markers=e}organizeCategories(){let e=[];this.features.forEach((t=>{t.categories.forEach((t=>{-1===e.findIndex((e=>e.id===t.id))&&e.push(t)}))}));e=this.filterCategories(e);e=this.sortCategories(e);return e}returnHTML(){return`\n      <div>\n        ${this.returnCategoryHTML(this.organizeCategories())}\n      </div>\n    `}returnCategoryHTML(e){var t="<ul>";e.filter((e=>0===e.parent)).forEach(((o,a)=>{var r=e.filter((e=>e.parent===o.id));t+=this.returnInputHTML(o,r);t+=this.returnChildrenHTML(o,e)}));return t+="</ul>"}returnChildrenHTML(e,t){var o="<ul>",a=t.filter((t=>t.parent===e.id));a.forEach((e=>{o+=this.returnInputHTML(e,[]);o+=this.returnChildrenHTML(e,t)}));o+="</ul>";0===a.length&&(o="");return o}returnInputHTML(e,t){var o=!0;this.initialVisibility||this.preSelectedCategories&&(!this.preSelectedCategories||-1!==this.preSelectedCategories.indexOf(e.id))||(o=!1);return this.returnAccordionHTML(`\n      <li>\n        ${"checkbox"===this.checkboxMode?`\n          <input class="mapster-cat-toggle" id="${e.id}" data-term="${e.id}" data-parent="${e.parent}" ${o?'checked="checked"':""} type="checkbox" />\n        `:`\n        <label class="mapster-switch">\n          <input class="mapster-cat-toggle" id="${e.id}" data-term="${e.id}" data-parent="${e.parent}" ${o?'checked="checked"':""} type="checkbox" />\n          <span class="mapster-slider mapster-round"></span>\n        </label>\n        `}\n        ${"colors"===this.displayMode?`<div class="mapster-color-swatch" style="background-color: ${e.color};"></div>`:""}\n        ${"icons"===this.displayMode?`<div class="mapster-icon-swatch" style="background-image: url(${e.icon});background-size: cover;"></div>`:""}\n        <label for="${e.id}">${e.name} ${this.returnNumberOfFeatures(e)?`<span class="mapster-number-of-features">(${this.returnNumberOfFeatures(e)})</span>`:""}</label>\n      </li>\n    `,e,t)}setToggles(e){var t=jQuery(e).data("term"),o=jQuery(e).data("parent"),a=jQuery(e).is(":checked");if(!this.independentChildren)if(0===o)a?jQuery(`.mapster-category-control-${this.post_id} .mapster-cat-toggle[data-parent="${t}"]`).prop("checked",!0):jQuery(`.mapster-category-control-${this.post_id} .mapster-cat-toggle[data-parent="${t}"]`).prop("checked",!1);else if(a)jQuery(`.mapster-category-control-${this.post_id} .mapster-cat-toggle[data-term="${o}"]`).prop("checked",!0);else{var r=!0;jQuery(`.mapster-category-control-${this.post_id} .mapster-cat-toggle[data-parent="${o}"]`).each((function(){jQuery(this).is(":checked")&&(r=!1)}));r&&jQuery(`.mapster-category-control-${this.post_id} .mapster-cat-toggle[data-term="${o}"]`).prop("checked",!1)}}returnIDsToHideFeatures(e){let t=[];this.features.forEach((o=>{if(o.categories.length>0)if("exclusive"===this.functionality){o.categories.find((t=>e.indexOf(t.id)>-1))&&t.push(o.id)}else if("inclusive"===this.functionality){var a=!0;o.categories.forEach((t=>{-1===e.indexOf(t.id)&&(a=!1)}));a&&t.push(o.id)}}));return t}returnNumberOfFeatures(){return!1}adjustMarkers(e){let t=[];this.markers.forEach((o=>{const a=this.returnMarkerProperties(o);if(a.categories.length>0)if("exclusive"===this.functionality){if(a.categories.find((t=>e.indexOf(t.id)>-1))){this.changeMarker("hide",o);t.push(o.mapsterProperties.id)}else this.changeMarker("show",o)}else if("inclusive"===this.functionality){var r=!0;if(a.categories.length>0){a.categories.forEach((t=>{-1===e.indexOf(t.id)&&(r=!1)}));if(r){this.changeMarker("hide",o);t.push(o.mapsterProperties.id)}else this.changeMarker("show",o)}}}));this.adjustMarkerClusters(t)}adjustMarkerClusters(e){if(this.marker_clustering){let t=["marker"];(new MapsterHelpers).makeClusters(this.map,this.map_provider,this.cluster_options,t,this.locations,[],[],e)}}returnAccordionHTML(e,t,o){return e}filterCategories(e){return e}sortCategories(e){return e}changeMarker(e,t){"hide"===e?t.remove():"show"===e&&t.addTo(this.map)}changeLayerVisibility(){var e=[];jQuery(`.mapster-category-control-${this.post_id} .mapster-cat-toggle`).each((function(){jQuery(this).is(":checked")||e.push(jQuery(this).data("term"))}));var t=this.returnIDsToHideFeatures(e);this.setHiddenFeatures(t);this.adjustMarkers(e)}setHiddenFeatures(e){const t=new MapsterHelpers;if(this.map.getLayer("symbol")){this.map.getLayer("symbol-clusters")&&t.setClustering(this.map,this.map_provider,this.cluster_options,this.circle_clustering,this.label_icon_clustering,this.marker_clustering,this.markers,this.locations,this.lines,this.polygons,e);let o=this.locations.filter((t=>-1===e.indexOf(t.id))),a=t.createLayerGeoJSON(this.map,"location","symbol",o,[],[],[]);this.map.getSource("symbol").setData(a)}this.map.getStyle().layers.find((e=>"circle"===e.type&&e.id.indexOf("clusters")>-1))&&t.setClustering(this.map,this.map_provider,this.cluster_options,this.circle_clustering,this.label_icon_clustering,this.marker_clustering,this.markers,this.locations,this.lines,this.polygons,e);if(this.map.getLayer("circle")){this.map.setPaintProperty("circle","circle-radius",["case",["in",["get","post_id"],["literal",e]],0,["has","circle_radius"],["to-number",["get","circle_radius"]],0]);this.map.setPaintProperty("circle","circle-stroke-width",["case",["in",["get","post_id"],["literal",e]],0,["has",'"circle_stroke-width"'],["to-number",["get",'"circle_stroke-width"']],0])}this.map.getLayer("line")&&this.map.setPaintProperty("line","line-width",["case",["in",["get","post_id"],["literal",e]],0,["has","width"],["to-number",["get","width"]],2]);if(this.map.getLayer("fill")){const t=new MapsterHelpers;let o=this.polygons.filter((t=>-1===e.indexOf(t.id))),a=t.createLayerGeoJSON(this.map,"polygon","fill",[],[],o,[]);this.map.getSource("fill").setData(a)}if(this.map.getLayer("fill-extrusion")){const t=new MapsterHelpers;let o=this.polygons.filter((t=>-1===e.indexOf(t.id))),a=t.createLayerGeoJSON(this.map,"polygon","fill-extrusion",[],[],o,[]);this.map.getSource("fill-extrusion").setData(a)}}returnMarkerProperties(e){return e.mapsterProperties}addResetButton(){if(this.reset_button){let e=this;jQuery(document).on("click",`.mapster-category-control-${this.post_id} #mapster-reset-categories`,(function(){jQuery(`.mapster-category-control-${e.post_id} .mapster-cat-toggle`).each((function(){let t=jQuery(this).data("term");var o=!0;e.initialVisibility||e.preSelectedCategories&&(!e.preSelectedCategories||-1!==e.preSelectedCategories.indexOf(t))||(o=!1);jQuery(this).prop("checked",o)}));e.changeLayerVisibility()}));return'<button id="mapster-reset-categories">Reset</button>'}return""}addListeners(){var e=this;jQuery(document).on("change",`.mapster-category-control-${this.post_id} .mapster-cat-toggle`,(function(){e.setToggles(this);e.changeLayerVisibility()}));jQuery(document).on("click",`.mapster-category-control-${this.post_id} .mapster-accordion-indicator`,(function(){let t=!1;jQuery(this).parent().hasClass("mapster-accordion-indicator-open")&&(t=!0);jQuery(`.mapster-category-control-${e.post_id} .mapster-accordion-indicator`).each((function(){if(jQuery(this).parent().next("ul").is(":visible")){jQuery(this).parent().next("ul").slideToggle(400,(()=>jQuery(this).parent().addClass("mapster-accordion-indicator-closed")));jQuery(this).parent().removeClass("mapster-accordion-indicator-open")}}));if(t)jQuery(this).parent().addClass("mapster-accordion-indicator-closed");else{jQuery(this).parent().addClass("mapster-accordion-indicator-open");jQuery(this).parent().next("ul").slideToggle()}}))}onAdd(e){this.map=e;this._container=document.createElement("div");this._container.className=`mapboxgl-ctrl mapster-category-control mapster-category-control-${this.post_id}`;this._container.innerHTML=this.returnHTML();this.initialVisibility||setTimeout((()=>{this.changeLayerVisibility()}),10);this.addListeners();return this._container}onAddGoogleMap(e){this.map=e;this._container=document.createElement("div");this._container.className=`mapster-category-control mapster-google-category-control mapster-category-control-${this.post_id}`;this._container.innerHTML=this.returnHTML();this.addListeners();return this._container}onRemove(){this._container.parentNode.removeChild(this._container);this.map=void 0}}
;class LayerControl{constructor(e){this.post_id=e.post_id;this.toggleable_layers=e.toggleable_layers;this.toggleable_layer_titles=e.toggleable_layer_titles;this.checkbox_type=e.checkbox_type}returnHTML(){let e='<ul class="mapster-layer-control-content">';const t=this.toggleable_layers.replace("\r","").split("\n"),o=this.toggleable_layer_titles.replace("\r","").split("\n");t.forEach(((t,a)=>{e+="<li>";const r=t.split(",");let s=!0,i=!0;r.forEach((e=>{if(""!==e){this.map.getLayer(e.trim())||(s=!1);"hidden"!==this.map.getLayoutProperty(e.trim(),"visibility")&&void 0===this.map.getLayoutProperty(e.trim(),"visibility")||(i=!1)}}));s?"checkbox"===this.checkbox_type?e+=`<input class="mapster-layer-toggle" data-layers="${t}" ${i?'checked="checked"':""} type="checkbox" /> ${o[a]}`:"radio"===this.checkbox_type?e+=`<input name="mapster-layer-control" class="mapster-layer-toggle" data-layers="${t}" ${i?'checked="checked"':""} type="radio" /> ${o[a]}`:"switch"===this.checkbox_type&&(e+=`<label class="mapster-switch">\n            <input class="mapster-layer-toggle" data-layers="${t}" ${i?'checked="checked"':""} type="checkbox" />\n            <span class="mapster-slider mapster-round"></span>\n          </label> ${o[a]}`):alert("Please double check the layers you've set for the layer control: some don't exist in the style!");e+="</li>"}));e+="</ul>";return e}changeLayerVisibility(){let e=this;jQuery(`.mapster-layer-control-${this.post_id} .mapster-layer-toggle`).each((function(){jQuery(this).data("layers").split(",").forEach((t=>{jQuery(this).is(":checked")?e.map.setLayoutProperty(t.trim(),"visibility","visible"):e.map.setLayoutProperty(t.trim(),"visibility","none")}))}))}addListeners(){var e=this;jQuery(document).on("change",`.mapster-layer-control-${this.post_id} .mapster-layer-toggle`,(function(){e.changeLayerVisibility()}))}onAdd(e){this.map=e;this._container=document.createElement("div");this._container.className=`mapboxgl-ctrl mapster-layer-control mapster-layer-control-${this.post_id}`;const t=setInterval((()=>{if(this.map.isStyleLoaded()){this._container.innerHTML=this.returnHTML();clearInterval(t)}}),100);this.addListeners();return this._container}onRemove(){this._container.parentNode.removeChild(this._container);this._map=void 0}}class StyleControl{constructor(e){this.post_id=e.post_id;this.toggleable_styles=e.toggleable_styles;this.toggleable_styles_titles=e.toggleable_styles_titles;this.initial_style_title=e.initial_style_title;this.map_type=e.map_type;this.default_style=!1}returnHTML(){let e='<ul class="mapster-style-control-content">';const t=new MapsterHelpers;this.default_style=t.getStyle(this.map_type);this.map_type.custom_style_json&&""!==this.map_type.custom_style_json&&(this.default_style=JSON.parse(this.map_type.custom_style_json));e+=`<li><input name="mapster-style-control" class="mapster-style-toggle" data-index="default" checked="checked" type="radio" /> ${this.initial_style_title}`;const o=this.toggleable_styles.replace("\r","").split("\n"),a=this.toggleable_styles_titles.replace("\r","").split("\n");o.forEach(((t,o)=>{if(""!==t){e+="<li>";e+=`<input name="mapster-style-control" class="mapster-style-toggle" data-index="${o}" type="radio" /> ${a[o]}`;e+="</li>"}}));e+="</ul>";return e}addListeners(){var e=this;new MapsterHelpers;jQuery(document).on("change",`.mapster-style-control-${this.post_id} .mapster-style-toggle`,(function(){const t=jQuery(this).data("index");if("default"!==t){const o=e.toggleable_styles.split("\n");o[t].indexOf("{")>-1?e.map.setStyle(JSON.parse(o[t])):e.map.setStyle(o[t]);e.map.fire("mapster_custom_style_load")}else{e.map.setStyle(e.default_style);e.map.fire("mapster_custom_style_load")}}))}onAdd(e){this.map=e;this._container=document.createElement("div");this._container.className=`mapboxgl-ctrl mapster-style-control mapster-style-control-${this.post_id}`;const t=setInterval((()=>{if(this.map.isStyleLoaded()){this._container.innerHTML=this.returnHTML();clearInterval(t)}}),100);this.addListeners();return this._container}onRemove(){this._container.parentNode.removeChild(this._container);this._map=void 0}}class ElevationControl{constructor(e){this.lines=e.lines;this.post_id=e.post_id;this.single_line=e.single_line;this.open_on_load=e.open_on_load;this.profile_color=e.profile_color;this.units=e.units;this.show_line_length=e.show_line_length;this.profile_displayed=!1;this.last_line_displayed=!1}addListeners(){jQuery(document).on("click",`.mapster-elevation-control-${this.post_id} .mapster-elevation-control-content`,(()=>{if(this.profile_displayed){this.removeElevation();this.profile_displayed=!1;jQuery(`.mapster-elevation-control-${this.post_id} .mapster-elevation-control-content`).removeClass("mapster-elevation-control-active")}else{if(this.map.getSource("mapbox-dem"))this.addElevation(this.last_line_displayed);else{this.loadElevationData();this.map.once("idle",(()=>{this.addElevation(this.last_line_displayed)}))}this.profile_displayed=!0;jQuery(`.mapster-elevation-control-${this.post_id} .mapster-elevation-control-content`).addClass("mapster-elevation-control-active")}}));this.single_line&&this.open_on_load&&setTimeout((()=>{this.last_line_displayed=this.lines[0];jQuery(`.mapster-elevation-control-${this.post_id} .mapster-elevation-control-content`).click()}),1e3);this.single_line||this.map.on("click","line",(e=>{this.last_line_displayed=this.lines.find((t=>t.id===e.features[0].properties.post_id));this.profile_displayed&&jQuery(`.mapster-elevation-control-${this.post_id} .mapster-elevation-control-content`).click();jQuery(`.mapster-elevation-control-${this.post_id} .mapster-elevation-control-content`).click()}));this.map.on("mousemove",(()=>{this.map.getLayer("elevation-point-along-layer")&&this.map.setLayoutProperty("elevation-point-along-layer","visibility","none")}))}loadElevationData(){this.map.addSource("mapbox-dem",{type:"raster-dem",url:"mapbox://mapbox.terrain-rgb",tileSize:512,maxzoom:14});this.map.setTerrain({source:"mapbox-dem",exaggeration:1.5})}removeElevation(){document.getElementById("mapster-chartjs-container").remove()}addElevation(e){let t=[],o=turf.length(e.data.line);for(let a=0;a<o;a+=o/50){let o=turf.along(e.data.line,a),r=this.map.queryTerrainElevation(o.geometry.coordinates,{exaggerated:!1});"feet"===this.units&&(r*=3.28084);t.push(r)}let a=document.createElement("div");a.setAttribute("id","mapster-chartjs-container");let r=document.createElement("canvas");r.setAttribute("id","mapster-chartjs");document.getElementById(`mapster-wp-maps-${this.post_id}`).append(a);a.append(r);const s=new MapsterConstants;let i=t.map((e=>""));if(this.show_line_length){i=[];t.forEach(((e,t)=>{let a=o/50;"feet"===this.units&&(a*=.621371);let r=parseInt(t*a*10)/10;i.push(r)}))}new Chart(document.getElementById("mapster-chartjs"),{type:"line",data:{labels:i,datasets:[{label:"Elevation",data:t,fill:!1,borderColor:this.profile_color,pointRadius:0,tension:.2}]},options:s.returnElevationChartOptions(this.units,this.show_line_length),plugins:[s.returnElevationChartPlugin(this.map,e)]})}onAdd(e){this.map=e;this.storedBounds=this.map.getBounds();this._container=document.createElement("div");if(window.mapster_params.public){this._container.className=`mapboxgl-ctrl mapster-elevation-control mapster-elevation-control-${this.post_id}`;this._container.innerHTML='\n        <div class="mapster-elevation-control-content">\n          <svg class="mapster-svg-mountain" focusable="false" viewBox="0 0 24 24" aria-hidden="true">\n            <path d="M14 6l-3.75 5 2.85 3.8-1.6 1.2C9.81 13.75 7 10 7 10l-6 8h22L14 6z"></path>\n          </svg>\n        </div>\n      ';this.addListeners()}return this._container}onRemove(){this._container.parentNode.removeChild(this._container);this._map=void 0}}class MapsterConstants{returnElevationChartPlugin(e,t){return{id:"corsair",afterInit:e=>{e.corsair={x:0,y:0}},afterEvent:(e,t)=>{const{chartArea:{top:o,bottom:a,left:r,right:s}}=e,{event:{x:i,y:n}}=t;if(i<r||i>s||n<o||n>a){e.corsair={x:i,y:n,draw:!1};e.draw()}else{e.corsair={x:i,y:n,draw:!0};e.draw()}},afterDatasetsDraw:(o,a,r)=>{const{ctx:s,chartArea:{top:i,bottom:n,left:l,right:p}}=o,{x:c,y:d,draw:m}=o.corsair;if(!m)return;s.lineWidth=r.width||0;s.setLineDash(r.dash||[]);s.strokeStyle=r.color||"black";s.save();s.beginPath();s.moveTo(c,n);s.lineTo(c,i);s.stroke();s.restore();const u=(c-l)/(p-l);let _=turf.length(t.data.line),h=turf.along(t.data.line,_*u);if(e.getSource("elevation-point-along")&&e.getLayer("elevation-point-along-layer")){e.getSource("elevation-point-along").setData(h);e.setLayoutProperty("elevation-point-along-layer","visibility","visible")}else{e.addSource("elevation-point-along",{type:"geojson",data:h});e.addLayer({id:"elevation-point-along-layer",type:"circle",source:"elevation-point-along"})}}}}returnElevationChartOptions(e,t){return{interaction:{intersect:!1,mode:"index"},scales:{x:{title:{display:!!t,text:""+("meters"===e?"KM":"Miles"),font:{style:"italic",size:10}},grid:{display:!0},ticks:{font:{size:10}}}},maintainAspectRatio:!1,plugins:{legend:{display:!1},title:{display:!0,text:`Elevation (${"meters"===e?"m":"ft"})`},tooltip:{displayColors:!1,callbacks:{label:function(t){return parseInt(10*t.parsed.y)/10+" "+("meters"===e?"m":"ft")}}},corsair:{color:"#333",width:1}}}}returnStyleProviders(){let e=[{id:"standard-day",style:"mapbox://styles/mapbox/standard",lighting:"day"},{id:"standard-night",style:"mapbox://styles/mapbox/standard",lighting:"night"},{id:"standard-dusk",style:"mapbox://styles/mapbox/standard",lighting:"dusk"},{id:"standard-dawn",style:"mapbox://styles/mapbox/standard",lighting:"dawn"},{id:"standard-satellite-day",style:"mapbox://styles/mapbox/standard-satellite",lighting:"day"},{id:"standard-satellite-night",style:"mapbox://styles/mapbox/standard-satellite",lighting:"night"},{id:"streets",style:"mapbox://styles/mapbox/streets-v12"},{id:"outdoors",style:"mapbox://styles/mapbox/outdoors-v12"},{id:"light",style:"mapbox://styles/mapbox/light-v11"},{id:"dark",style:"mapbox://styles/mapbox/dark-v11"},{id:"satellite",style:"mapbox://styles/mapbox/satellite-v9"},{id:"satellite-streets",style:"mapbox://styles/mapbox/satellite-streets-v12"},{id:"navigation-day",style:"mapbox://styles/mapbox/navigation-day-v1"},{id:"navigation-night",style:"mapbox://styles/mapbox/navigation-night-v1"},{id:"custom-image",style:{version:8,glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf",sources:{},layers:[{id:"background",type:"background",paint:{"background-color":"rgba(255,255,255,1)"}}]}},{id:"empty",style:{version:8,glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf",sources:{},layers:[{id:"background",type:"background",paint:{"background-color":"rgba(255,255,255,1)"}}]}},{id:"open-street-map",style:this.returnJsonStyle("https://a.tile.openstreetmap.org/{z}/{x}/{y}.png",'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors')},{id:"open-topo-map",style:this.returnJsonStyle("https://a.tile.opentopomap.org/{z}/{x}/{y}.png",'Map data: &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, <a href="https://viewfinderpanoramas.org">SRTM</a> | Map style: &copy; <a href="https://opentopomap.org">OpenTopoMap</a> (<a href="https://creativecommons.org/licenses/by-sa/3.0/">CC-BY-SA</a>)')},{id:"hot-osm",style:this.returnJsonStyle("https://a.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png",'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Tiles style by <a href="https://www.hotosm.org/" target="_blank">Humanitarian OpenStreetMap Team</a> hosted by <a href="https://openstreetmap.fr/" target="_blank">OpenStreetMap France</a>')},{id:"cyclo-osm",style:this.returnJsonStyle("https://a.tile-cyclosm.openstreetmap.fr/cyclosm/{z}/{x}/{y}.png",'<a href="https://github.com/cyclosm/cyclosm-cartocss-style/releases" title="CyclOSM - Open Bicycle render">CyclOSM</a> | Map data: &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors')},{id:"toner-stamen",style:this.returnJsonStyle("https://tiles.stadiamaps.com/tiles/stamen_toner/{z}/{x}/{y}.png",'Map tiles by <a href="https://stamen.com">Stamen Design</a>, <a href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors')},{id:"watercolor-stamen",style:this.returnJsonStyle("https://tiles.stadiamaps.com/tiles/stamen_watercolor/{z}/{x}/{y}.jpg",'Map tiles by <a href="https://stamen.com">Stamen Design</a>, <a href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors')},{id:"terrain-stamen",style:this.returnJsonStyle("https://tiles.stadiamaps.com/tiles/stamen_terrain/{z}/{x}/{y}.png",'Map tiles by <a href="https://stamen.com">Stamen Design</a>, <a href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors')},{id:"esri-satellite",style:this.returnJsonStyle("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}","Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community")},{id:"esri-topo",style:this.returnJsonStyle("https://server.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}","Tiles &copy; Esri &mdash; Esri, DeLorme, NAVTEQ, TomTom, Intermap, iPC, USGS, FAO, NPS, NRCAN, GeoBase, Kadaster NL, Ordnance Survey, Esri Japan, METI, Esri China (Hong Kong), and the GIS User Community")},{id:"blank-map",style:this.returnJsonStyle("https://a.tile.openstreetmap.org/{z}/{x}/{y}.png",'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors')}];if("1"===window.mapster_params.activated){let t=[{id:"mapster-unicorn",style:"mapbox://styles/mapstertech/cm10x5cvq02n401pwhdpncvrj"},{id:"mapster-minimo",style:"mapbox://styles/mapstertech/cm12g9n3g00t501rbej0m74bv"},{id:"mapster-whaam",style:"mapbox://styles/mapstertech/cm15kgcun033l01r793jh5b30"},{id:"mapster-standard-oil",style:"mapbox://styles/mapstertech/cm12g8j4t03ao01pq9wm99p54"},{id:"mapster-blueprint",style:"mapbox://styles/mapstertech/cm12g880g00t401rb9yc32icp"},{id:"mapster-frank",style:"mapbox://styles/mapstertech/cm12g7tw303an01pqh7vr9sp4"},{id:"mapster-pencil",style:"mapbox://styles/mapstertech/cm10xd4pn02g501rggzgifof7"},{id:"mapster-bubble",style:"mapbox://styles/mapstertech/cm10xc01702g401rg1hmg4db8"},{id:"mapster-memory",style:"mapbox://styles/mapstertech/cm10xaa8m020g01pq4ueh42z2"},{id:"mapster-neon-glow",style:"mapbox://styles/mapstertech/cm10x86ma00l601r74d7a7rfw"},{id:"mapster-vintage",style:"mapbox://styles/mapstertech/cm15klhbj033m01r70dwy5ap8"},{id:"mapster-swiss-ski",style:"mapbox://styles/mapstertech/cm15klq59018k01q13nz0eo5k"},{id:"mapster-neon",style:"mapbox://styles/mapstertech/cm15km0rx023b01rb6v7ieds5"},{id:"mapster-monochrome-blue",style:"mapbox://styles/mapstertech/cm15km82m018l01q1aha7e04l"},{id:"mapster-camouflage",style:"mapbox://styles/mapstertech/cm15l1x1g018n01q127v8g0pu"},{id:"mapster-bright",style:"mapbox://styles/mapstertech/cm15l28wo023c01rb3ukd02j6"}];e=e.concat(t)}return e}returnJsonStyle(e,t){return{version:8,glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf",sources:{"raster-tiles":{type:"raster",tiles:[e],tileSize:256,attribution:t}},layers:[{id:"simple-tiles",type:"raster",source:"raster-tiles",minzoom:0,maxzoom:22}]}}defaultLoader(){return"\n      <svg width='38' height='38' viewBox='0 0 38 38' xmlns='https://www.w3.org/2000/svg' stroke='#333'>\n        <g fill='none' fill-rule='evenodd'>\n            <g transform='translate(1 1)' stroke-width='2'>\n                <circle stroke-opacity='.5' cx='18' cy='18' r='18'/>\n                <path d='M36 18c0-9.94-8.06-18-18-18'>\n                    <animateTransform\n                        attributeName='transform'\n                        type='rotate'\n                        from='0 18 18'\n                        to='360 18 18'\n                        dur='1s'\n                        repeatCount='indefinite'/>\n                </path>\n            </g>\n        </g>\n      </svg>"}loaderHTML(e){let t=this.defaultLoader(),o="rgba(255,255,255,0.6)";if("1"===window.mapster_params.activated&&e&&e.loading_graphic){t=e.loading_graphic.replace("svg",`svg stroke="${e.loader_color}" fill="${e.loader_color}"`);e.background_color&&(o=e.background_color);"custom"===e.loading_graphic&&(t=`<img src="${e.custom_loader}" />`)}return`\n\t\t\t<div class="mapster-map-loader" style="background-color:${o}">\n\t\t\t\t${t}\n\t\t\t</div>\n\t\t`}markerAsSVG(e){return"data:image/svg+xml;charset=UTF-8,"+encodeURIComponent(`\n      <svg display="block" height="41px" width="27px" viewBox="0 0 27 41" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n        <g fill-rule="nonzero">\n          <g transform="translate(3.0, 29.0)" fill="#000000">\n            <ellipse opacity="0.04" cx="10.5" cy="5.80029008" rx="10.5" ry="5.25002273"></ellipse>\n            <ellipse opacity="0.04" cx="10.5" cy="5.80029008" rx="10.5" ry="5.25002273"></ellipse>\n            <ellipse opacity="0.04" cx="10.5" cy="5.80029008" rx="9.5" ry="4.77275007"></ellipse>\n            <ellipse opacity="0.04" cx="10.5" cy="5.80029008" rx="8.5" ry="4.29549936"></ellipse>\n            <ellipse opacity="0.04" cx="10.5" cy="5.80029008" rx="7.5" ry="3.81822308"></ellipse>\n            <ellipse opacity="0.04" cx="10.5" cy="5.80029008" rx="6.5" ry="3.34094679"></ellipse>\n            <ellipse opacity="0.04" cx="10.5" cy="5.80029008" rx="5.5" ry="2.86367051"></ellipse>\n            <ellipse opacity="0.04" cx="10.5" cy="5.80029008" rx="4.5" ry="2.38636864"></ellipse>\n          </g>\n          <g fill="${e}">\n            <path d="M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"></path>\n          </g>\n          <g opacity="0.25" fill="${e}">\n            <path d="M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"></path>\n          </g>\n          <g transform="translate(6.0, 7.0)" fill="#FFFFFF"></g>\n          <g transform="translate(8.0, 8.0)">\n              <circle fill="${e}" opacity="0.25" cx="5.5" cy="5.5" r="5.4999962"></circle>\n              <circle fill="#FFFFFF" cx="5.5" cy="5.5" r="5.4999962"></circle>\n            </g>\n          </g>\n      </svg>\n    `)}}class MapsterHelpers{constructor(){this.queuedImages=[]}isMobile(){let e=!1;/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&(e=!0);return e}changeCursor(e,t,o){t&&t.data&&t.data.enable_popup&&(e.getCanvas().style.cursor="on"===o?"pointer":"grab")}formatResponse(e){["location","line","polygon"].forEach((t=>{e[t+"s"].forEach((o=>{this.setObjectProperties(o,e[t+"_template"]);this.setPopupStyles(o,e.popup_styles)}))}));return new Promise((t=>{t(e)}))}simulateMouseActions(e,t,o,a){const r=o.find((e=>e.mapsterProperties.id===parseInt(t)));if(r){let t=r.mapsterProperties.data.default_zoom_level&&""!==r.mapsterProperties.data.default_zoom_level?r.mapsterProperties.data.default_zoom_level:15;e.jumpTo({center:r.mapsterProperties.data.location.coordinates,zoom:t});if(r.mapsterProperties.data.enable_popup)if("click"===r.mapsterProperties.data.interaction)r.getElement().click();else if("hover"===r.mapsterProperties.data.interaction){const e=new Event("mouseenter");r.getElement().dispatchEvent(e)}}else{const o=a.find((e=>e.id===parseInt(t)));if(o){let t=o.data.default_zoom_level&&""!==o.data.default_zoom_level?o.data.default_zoom_level:15;e.jumpTo({center:o.data.location.coordinates,zoom:t});o.data.enable_popup&&("click"===o.data.interaction?setTimeout((()=>{e.fire("click",{mapsterFeatureID:o.id,originalEvent:{},lngLat:o.data.location.coordinates,point:e.project(o.data.location.coordinates)})}),100):"hover"===o.data.interaction&&setTimeout((()=>{e.fire("mousemove",{originalEvent:{},lngLat:o.data.location.coordinates,point:e.project(o.data.location.coordinates)})}),100))}}}getDefaultCenter(){let e=[0,0];"1"===window.mapster_params.activated&&window.mapster_params.mapster_default_lat&&window.mapster_params.mapster_default_lng&&(e=[parseFloat(window.mapster_params.mapster_default_lng),parseFloat(window.mapster_params.mapster_default_lat)]);return e}getDefaultZoom(){let e=2;"1"===window.mapster_params.activated&&window.mapster_params.mapster_default_zoom&&(e=parseFloat(window.mapster_params.mapster_default_zoom));return e}doHover(e,t){let o=t.data.line?"line":t.data.label||t.data.icon?"symbol":t.data.circle?"circle":t.data.polygon?"fill":[],a="line"===o||"fill"===o||"symbol"===o?t.data:"circle"===o?t.data.circle:t.data.symbol;if("symbol"===o){t.data.label.label_on&&(a=t.data.label.label_properties);t.data.icon.icon_on&&(a=t.data.icon.icon_properties)}if(a&&a.hover_effects&&a.hover_effects.hover_enabled){e.removeFeatureState({source:o});e.setFeatureState({source:o,id:t.id},{hover:!0})}}doHoverOut(e,t){let o=t.data.line?"line":t.data.label||t.data.icon?"symbol":t.data.circle?"circle":t.data.polygon?"fill":[],a="line"===o||"fill"===o?t.data:"circle"===o?t.data.circle:t.data.symbol;if("symbol"===o){t.data.label.label_on&&(a=t.data.label.label_properties);t.data.icon.icon_on&&(a=t.data.icon.icon_properties)}a&&a.hover_effects&&a.hover_effects.hover_enabled&&e.setFeatureState({source:o,id:t.id},{hover:!1})}doMarkerHover(e,t,o){let a=o.mapsterProperties.data;if(a.marker.hover_effects.hover_enabled){const r=new t.Marker({color:a.marker.hover_effects.hover_color,scale:parseFloat(a.marker.hover_effects.hover_scale)/100,rotation:parseFloat(a.marker.hover_effects.hover_rotation),anchor:a.marker.anchor});-1===r._element.className.indexOf("mapster-remove-hover")&&(r._element.className+=" mapster-remove-hover");-1===o._element.className.indexOf("mapster-hide-original")&&(o._element.className+=" mapster-hide-original");r.setLngLat([o._lngLat.lng,o._lngLat.lat]).addTo(e);return r}return!1}doMarkerHoverOut(e,t){t._element.className.indexOf("mapster-hide-original")>-1&&(t._element.className=t._element.className.replace(" mapster-hide-original",""));e.remove()}globeAnimate(e,t,o){e.getZoom();let a=360/(201-t);const r=e.getCenter();"east-west"===o?r.lng+=a:"west-east"===o?r.lng-=a:"north-south"===o?r.lat+=a:"south-north"===o&&(r.lat-=a);e.easeTo({center:r,duration:1e3,easing:e=>e})}setMapCompare(e,t,o,a){
}createFillImages(e,t){t.filter((e=>"fill-image"===e.data.polygon_style)).forEach(((t,o)=>{let a=turf.bbox(t.data.polygon),r=[[a[0],a[3]],[a[2],a[3]],[a[2],a[1]],[a[0],a[1]]];if(t.data.polygon_image){e.addSource(`fill-image-${o}`,{type:"image",url:t.data.polygon_image,coordinates:r});e.addLayer({id:`fill-image-${o}-layer`,type:"raster",source:`fill-image-${o}`,paint:{"raster-fade-duration":0}})}}))
/* </fs_premium_only> */}applyProSearchFilter(e,t){
return t}setGeolocationOnLoad(e){
}setMapBreakpointSizes(e,t){
}async getImageData(e){return wp.media.attachment(e).fetch().then((e=>e))}async setCustomImageMap(e,t,o){
}loadModalSteps(e,t,o,a,r,s){const i=new MapsterConstants;let n=!1,l=[];if("create_point"===a){if(r)if(1===r.length){n=r[0].term_id;if(s.submission_interface.include_address_search){p(e);c()}else{c();d()}}else{p(e);jQuery(`#mapster-submission-modal-${e} .mapster-submission-modal-content`).html(`\n            <div class="mapster-category-container">\n              ${r.map((e=>`\n                  <div class="mapster-category-tile mapster-cat-set" data-category="${e.term_id}">\n                    ${e.icon?`<div class="mapster-category-image"><img src="${e.icon}" /></div>`:""}\n                    ${e.name?`<div class="mapster-category-name"><p>${e.name}</p></div>`:""}\n                    ${e.description?`<div class="mapster-category-description"><p>${e.description}</p></div>`:""}\n                  </div>\n                `)).join("")}\n            </div>\n          `)}else{p(e);jQuery(`#mapster-submission-modal-${e} .mapster-submission-modal-content`).html(`\n          <div class="mapster-category-container" data-category="none">\n            <div class="mapster-category-tile mapster-cat-set">${s.custom_texts.add_point_text}</div>\n          </div>\n        `)}jQuery(document).on("click",`#mapster-submission-modal-${e} .mapster-category-tile.mapster-cat-set`,(function(){"none"!==jQuery(this).data("category")&&(n=jQuery(this).data("category"));c()}))}if("edit_point"===a){const t=window.mapster_params.user_submission_permalink;p(e);jQuery(`#mapster-submission-modal-${e} .mapster-submission-modal-content`).html(`\n        ${i.loaderHTML()}\n        <iframe\n          onload="jQuery('.mapster-map-loader').remove();"\n          class="mapster-submission-embed"\n          src="${t}?pagetype=search&map_id=${e}">\n        </iframe>\n      `)}window.onmessage=function(e){if(e.data&&e.data.indexOf){if(e.data.indexOf("set_point")>-1){c(e.data.replace("set_point-",""))}if(e.data.indexOf("close_modal")>-1){jQuery(".mapster-submission-modal-overlay").fadeOut(50);jQuery(".mapster-submission-modal").fadeOut(100)}}};function p(e){jQuery(`.mapster-submit-${e} #mapster-submission-modal-overlay-${e}`).fadeIn(100);jQuery(`.mapster-submit-${e} #mapster-submission-modal-${e}`).fadeIn(150)}function c(a){s.submission_interface.include_address_search?jQuery(`#mapster-submission-modal-${e} .mapster-submission-modal-content`).html(`\n          <div class="mapster-description-text"><p>${s.custom_texts.choose_how}</p></div>\n          <div class="mapster-category-container">\n            ${s.submission_interface.include_address_search?`<div class="mapster-category-tile mapster-method-set" data-method="address" style="max-width:none;"><p>${s.custom_texts.address_search}</p></div>`:""}\n            <div class="mapster-category-tile mapster-method-set" data-method="click" style="max-width:none;"><p>${s.custom_texts.map_click}</p></div>\n          </div>\n        `):d();jQuery(document).on("click",`#mapster-submission-modal-${e} .mapster-category-tile.mapster-method-set`,(function(){if("address"===jQuery(this).data("method")){const a=new MapboxGeocoder({accessToken:s.submission_interface.mapbox_geocoder_access_token,mapboxgl:o,marker:!1});jQuery(`#mapster-submission-modal-${e} .mapster-submission-modal-content`).html(`<p>${s.custom_texts.search_location}</p>`);jQuery(`#mapster-submission-modal-${e} .mapster-submission-modal-content`)[0].appendChild(a.onAdd(t));a.on("result",(function(){d()}))}"click"===jQuery(this).data("method")&&d()}));jQuery(document).on("click",`#mapster-wp-maps-${e} .mapster-selection-instructions button`,(function(o){const a=t.getCenter();let r=!0;if(s.administration.allowed_area){const e=JSON.parse(s.administration.allowed_area);turf.booleanPointInPolygon([a.lng,a.lat],e.features[0])||(r=!1)}jQuery(".mapboxgl-ctrl").show();jQuery(".mapster-selection-overlay").remove();l=[a.lng,a.lat];jQuery(`#mapster-submission-modal-overlay-${e}`).fadeIn(100);jQuery(`#mapster-submission-modal-${e}`).fadeIn(150);jQuery(`#mapster-submission-modal-${e} .mapster-submission-modal-content`).html(`\n          <div class="mapster-description-text"><p>${r?s.custom_texts.selection_saved:s.custom_texts.selection_error}</p></div>\n          <div class="mapster-category-container">\n            <div class="mapster-category-tile mapster-method-set" data-method="click" style="max-width:none;"><p>${s.custom_texts.try_again}</p></div>\n            ${r?`<div class="mapster-category-tile mapster-coords-set" style="max-width:none;"><p>${s.custom_texts.confirm}</p></div>`:""}\n          </div>\n        `)}));jQuery(document).on("click",`#mapster-submission-modal-${e} .mapster-category-tile.mapster-coords-set`,(function(){const t=window.mapster_params.user_submission_permalink;let o=!!s.administration.template_post&&s.administration.template_post.ID;if(s.administration.multiple_templates){let e=s.submission_interface.categories.indexOf(n);o=s.administration.template_posts[e]}let r=a?"&type=edit&post_id="+a:"";jQuery(`#mapster-submission-modal-${e} .mapster-submission-modal-content`).html(`\n          ${i.loaderHTML()}\n          <iframe\n            onload="jQuery('.mapster-map-loader').remove();"\n            class="mapster-submission-embed"\n            src="${t}?category=${n}&coords=${l.join(",")}&map_id=${e}${r}">\n          </iframe>\n        `)}))}function d(){jQuery(".mapster-submission-modal-close").trigger("click");jQuery(".mapboxgl-ctrl").hide();jQuery(t._container).append(`\n        <div class="mapster-selection-overlay">\n          <div class="mapster-selection-instructions">\n            <p>${s.custom_texts.drag_zoom}</p>\n            <button>${s.custom_texts.capture_point}</button>\n          </div>\n          <svg version="1.1" id="Uploaded to svgrepo.com" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n             width="32px" height="32px" viewBox="0 0 32 32" style="enable-background:new 0 0 32 32;" xml:space="preserve">\n            <style type="text/css">\n              .dashing_een{fill:#141414;}\n              .st0{fill:#141414;}\n            </style>\n            <path class="dashing_een" d="M15.5,21.5v-2c0-0.276,0.224-0.5,0.5-0.5s0.5,0.224,0.5,0.5v2c0,0.276-0.224,0.5-0.5,0.5\n              S15.5,21.776,15.5,21.5z M16,13c0.276,0,0.5-0.224,0.5-0.5v-2c0-0.276-0.224-0.5-0.5-0.5s-0.5,0.224-0.5,0.5v2\n              C15.5,12.776,15.724,13,16,13z M16,3c0.276,0,0.5-0.224,0.5-0.5v-2C16.5,0.224,16.276,0,16,0c-0.276,0-0.5,0.224-0.5,0.5v2\n              C15.5,2.776,15.724,3,16,3z M16,32c0.276,0,0.5-0.224,0.5-0.5v-2c0-0.276-0.224-0.5-0.5-0.5s-0.5,0.224-0.5,0.5v2\n              C15.5,31.776,15.724,32,16,32z M22,16c0-0.276-0.224-0.5-0.5-0.5h-2c-0.276,0-0.5,0.224-0.5,0.5s0.224,0.5,0.5,0.5h2\n              C21.776,16.5,22,16.276,22,16z M13,16c0-0.276-0.224-0.5-0.5-0.5h-2c-0.276,0-0.5,0.224-0.5,0.5s0.224,0.5,0.5,0.5h2\n              C12.776,16.5,13,16.276,13,16z M3,16c0-0.276-0.224-0.5-0.5-0.5h-2C0.224,15.5,0,15.724,0,16c0,0.276,0.224,0.5,0.5,0.5h2\n              C2.776,16.5,3,16.276,3,16z M32,16c0-0.276-0.224-0.5-0.5-0.5h-2c-0.276,0-0.5,0.224-0.5,0.5s0.224,0.5,0.5,0.5h2\n              C31.776,16.5,32,16.276,32,16z M27,16c0,6.065-4.935,11-11,11S5,22.065,5,16S9.935,5,16,5S27,9.935,27,16z M26,16.5h-1.5\n              c-0.276,0-0.5-0.224-0.5-0.5s0.224-0.5,0.5-0.5H26c-0.255-5.115-4.387-9.245-9.5-9.5v1.5C16.5,7.776,16.276,8,16,8\n              s-0.5-0.224-0.5-0.5V6c-5.113,0.255-9.245,4.385-9.5,9.5h1.5C7.776,15.5,8,15.724,8,16s-0.224,0.5-0.5,0.5H6\n              c0.255,5.115,4.387,9.245,9.5,9.5v-1.5c0-0.276,0.224-0.5,0.5-0.5s0.5,0.224,0.5,0.5V26C21.613,25.745,25.745,21.615,26,16.5z"/>\n          </svg>\n        </div>\n      `)}}setProjectionGlobe(e,t){
}create3DModels(e,t){
}setPopupStyles(e,t){if(e.data.popup_style){let o=e.data.popup_style,a=t.find((e=>e.id===o));e.data.popup_style=a}}setObjectProperties(e,t){for(var o in t)if(this.isObject(t[o])){null==e[o]&&(e[o]={});this.setObjectProperties(e[o],t[o])}else null==e[o]&&(e[o]=t[o])}isObject(e){return"object"==typeof e&&!Array.isArray(e)&&null!==e}makeFeatureJSON(e){let t=e.line?e.line:e.location?e.location:!!e.polygon&&e.polygon;return{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:{type:t.type,coordinates:t.coordinates}}]}}getLighting(e){const t=new MapsterConstants;if(""!==e.custom_mapbox_style)return!1;if("custom-image"===e.map_provider)return!1;if(""!==e.access_token){var o=e.map_tile_style_access_token;return t.returnStyleProviders().find((e=>e.id===o)).lighting}o=e.map_tile_style_no_access_token;return t.returnStyleProviders().find((e=>e.id===o)).lighting}getStyle(e){const t=new MapsterConstants;if(""!==e.custom_mapbox_style)return e.custom_mapbox_style;if("custom-image"===e.map_provider)return t.returnStyleProviders().find((e=>"custom-image"===e.id)).style;if(""!==e.access_token){var o=e.map_tile_style_access_token;return t.returnStyleProviders().find((e=>e.id===o)).style}o=e.map_tile_style_no_access_token;return t.returnStyleProviders().find((e=>e.id===o)).style}isInControlMenu(e,t){let o=[];e&&e.enable&&e.included_controls&&(o=JSON.parse(e.included_controls));return o.indexOf(t)>-1}addMapControl(e,t,o,a,r,s,i,n={}){t&&e.removeControl(t);if(o){const t=new i(n);r&&""!==r&&document.getElementById(r)?document.getElementById(r).appendChild(t.onAdd(e)):s?document.getElementById("mapster-control-menu-holder").appendChild(t.onAdd(e)):e.addControl(t,a);return t}return!1}searchCoordinateGeocoder(e){
}searchLocalFeatures(e,t,o,a,r,s=!1){var i={type:"FeatureCollection",features:[]};o.concat(a.concat(r)).forEach((e=>{var t=this.makeFeatureJSON(e.data);i.features.push(this.makeGeocoderResult(e,t,s))}));let n=this.localFeaturesTextMatch(e,t,i.features);n.sort(((e,t)=>e.place_name>t.place_name?1:-1));return n}localFeaturesTextMatch(e,t,o){let a=[];const r=t.split(" ").filter((e=>""!==e));o.forEach((o=>{var s=!1;o.properties.searchableTexts.forEach((i=>{var n={type:"Feature",id:o.properties.id,place_name:jQuery("<div>").html(o.properties.place_name).text()};"1"===window.mapster_params.activated&&o.properties.thumbnail&&(n.place_name=`\n              <img src="${o.properties.thumbnail}" class="mapster-filter-dropdown-image" /><br />${n.place_name}\n            `);if(!(window.mapster_categories_hidden_features&&window.mapster_categories_hidden_features.length>0&&-1!==window.mapster_categories_hidden_features.indexOf(o.properties.id))){if("exact-match"===e&&i&&(i.toLowerCase().indexOf(t.toLowerCase())>-1||" "===t)&&!s){n.center=turf.center(o).geometry.coordinates;"Point"!==o.geometry.type&&(n.bbox=turf.bbox(o));a.push(n);s=!0}
}}))}));return a}initializeSlider(e,t){const o=e=>{jQuery("#mapster-slider ul").animate({left:jQuery("#mapster-slider ul li").width()*("right"===e?-1:1)},200,(()=>{jQuery("#mapster-slider ul li:first-child").appendTo("#mapster-slider ul");jQuery("#mapster-slider ul").css("left","")}))};if(!window.sliderClicksInitialized){jQuery(document).on("click","#mapster-slider .mapster-slider-control_prev",(function(){o("left")}));jQuery(document).on("click","#mapster-slider .mapster-slider-control_next",(function(){o("right")}));window.sliderClicksInitialized=!0}}makeHeatmap(e,t,o,a){
}loadListings(e,t,o){
}setListingEvents(e,t,o){
}setListingStickyMap(){
}createHeatmapProperties(e,t,o,a){
}fadeHeatmapFeatures(e,t){
}setClustering(e,t,o,a,r,s,i,n,l,p,c){s&&this.doMarkerClustering(e,t,o,s,i,n,c);return r||a?this.doSymbolClustering(e,t,o,a,r,n,l,p,c):[]}doMarkerClustering(e,t,o,a,r,s,i){let n=o.cluster_by_category?o.categories_to_cluster.map((e=>"marker-"+e)):["marker"];this.makeClusters(e,t,o,n,s,[],[],i);e.on("render",(()=>{let t=[];n.forEach((o=>{if(!e.isSourceLoaded(o))return;const a=e.querySourceFeatures(o);t=t.concat(a.filter((e=>e.properties.id)).map((e=>e.properties.id)))}));r.forEach((o=>{-1===t.indexOf(o.mapsterProperties.id)?o.remove():(!o._popup||o._popup&&!o._popup.isOpen())&&o.addTo(e)}))}))}doSymbolClustering(e,t,o,a,r,s,i,n,l){var p=[];r&&(o.cluster_by_category?o.categories_to_cluster.forEach((e=>{p.push("symbol-"+e)})):p.push("symbol"));a&&(o.cluster_by_category?o.categories_to_cluster.forEach((e=>{p.push("circle-"+e)})):p.push("circle"));this.makeClusters(e,t,o,p,s,i,n,l);return p}makeClusters(e,t,o,a,r,s,i,n){let l=[];a.forEach((t=>{e.getLayer(`${t}-cluster-count`)&&e.removeLayer(`${t}-cluster-count`);e.getLayer(`${t}-clusters`)&&e.removeLayer(`${t}-clusters`);e.getLayer(`${t}-clusters-border`)&&e.removeLayer(`${t}-clusters-border`);e.getLayer(t)&&e.removeLayer(t);if(e.getSource(t))try{e.removeSource(t)}catch(e){}if(t.indexOf("-")>-1){let e=parseInt(t.split("-")[1]);l.push(e)}}));a.forEach(((a,p)=>{let c,d=a.split("-")[0];if(l.length>0){let t=this.createLayerGeoJSON(e,"location",d,r,s,i,l);e.getSource(d)&&e.getSource(d).setData(t)}else if(e.getLayer(d)&&e.getSource(d)){e.removeLayer(d);e.removeSource(d)}c=a.indexOf("marker")>-1?this.createMarkerGeoJSON(r,a):this.createLayerGeoJSON(e,"location",a,r,s,i,[]);n=n||[];var m=c.features.filter((e=>-1===n.indexOf(e.properties.post_id)));let u=!1;if(o.show_category_name){let e=r.concat(s.concat(i)),t=parseInt(a.split("-")[1]);e.forEach((e=>{u||(u=e.categories.find((e=>e.id===t)))}))}e.addSource(a,{type:"geojson",data:{type:"FeatureCollection",features:m},cluster:!0,clusterMaxZoom:14,clusterRadius:50});if(a.indexOf("marker")>-1)e.addLayer({id:a,source:a,type:"circle",filter:["!",["has","point_count"]],paint:{"circle-radius":0}});else{var _=this.getLayerExpressions("location",a.indexOf("symbol")>-1?"symbol":"circle",t);e.addLayer({id:a,source:a,type:a.split("-")[0],filter:["!",["has","point_count"]],paint:_.paint,layout:_.layout})}this.addIcons(e,a,c);let h="#51bbd6",f=100,g=20,y="#f1f075",b=750,v=30,w="#f28cb1",C=40;
if(o.image_on_cluster&&""!==o.image_on_cluster)this.addNewIcon(e,o.image_on_cluster,"cluster",(()=>{
}));else{e.addLayer({id:`${a}-clusters`,type:"circle",source:a,filter:["has","point_count"],paint:{"circle-color":["step",["get","point_count"],h,f,y,b,w],"circle-radius":["step",["get","point_count"],g,f,v,b,C]}});e.addLayer({id:`${a}-cluster-count`,type:"symbol",source:a,filter:["has","point_count"],layout:{"text-field":u?u.name:"{point_count_abbreviated}","text-font":"mapbox"===t?["DIN Offc Pro Medium","Arial Unicode MS Bold"]:["Open Sans Regular"],"text-size":12}})}setTimeout((()=>{e.on("click",`${a}-clusters`,(t=>{const o=e.queryRenderedFeatures(t.point,{layers:[`${a}-clusters`]}),r=o[0].properties.cluster_id;e.getSource(a).getClusterExpansionZoom(r,((t,a)=>{e.easeTo({center:o[0].geometry.coordinates,zoom:a+1})}))}))}),500)}))}makeGeocoderResult(e,t,o){var a=t.features[0];a.properties={searchableTexts:[e.data.popup?e.data.popup.header_text:"",e.data.popup?e.data.popup.body_text:"",e.title,e.content],id:e.id,place_name:e.title};"1"===window.mapster_params.activated&&o&&e.data.popup&&e.data.popup.featured_image&&(a.properties.thumbnail=e.data.popup.featured_image.url);return a}modifyDropdown(e,t){e.container.classList.add("mapster-maps-dropdown");jQuery(".mapster-maps-dropdown").find(".mapboxgl-ctrl-geocoder--icon.mapboxgl-ctrl-geocoder--icon-search").replaceWith('<svg viewBox="0 0 32 32" class="mapboxgl-ctrl-geocoder--icon mapboxgl-ctrl-geocoder--icon-search" viewBox="0 0 32 32" aria-hidden="true">\n      <path d="M24 11.305l-7.997 11.39L8 11.305z"/>\n    </svg>');jQuery(".mapster-maps-dropdown").find(".mapboxgl-ctrl-geocoder--input").wrap('<div class="input-wrapper"></div>');jQuery(".mapster-maps-dropdown").find(".mapboxgl-ctrl-geocoder--input").attr("disabled",!0);jQuery(".mapster-maps-dropdown").find(".mapboxgl-ctrl-geocoder--input").css("pointer-events","none");jQuery(document).on("click",".mapster-maps-dropdown .input-wrapper, .mapster-maps-dropdown .mapboxgl-ctrl-geocoder--icon-search",(()=>{e.setInput("");jQuery(".suggestions-wrapper .suggestions li").removeClass("active")}));jQuery(document).on("click",".mapboxgl-ctrl-geocoder--icon.mapboxgl-ctrl-geocoder--icon-close",(()=>{e.clear();jQuery(".suggestions-wrapper .suggestions").hide()}))}openExternalLink(e){e&&e.data.open_link_on_click&&e.data.click_link&&e.data.click_link.url&&(e.data.click_link.open_link_in_new_tab?window.open(e.data.click_link.url):window.open(e.data.click_link.url,"_self"))}getMapBounds(e,t,o){var a={type:"FeatureCollection",features:[]};[["location",e],["line",t],["polygon",o]].forEach((e=>{e[1].forEach((e=>{var t=this.makeFeatureJSON(e.data);a.features.push(t.features[0])}))}));if(a.features.length>0){return turf.bbox(a)}return null}openStoreLocatorClick(e,t){e.enable&&jQuery(`.mapster-store-locator-list[data-id="${t}"]`).trigger("click",[!0])}openSidebarClick(e,t,o,a,r,s){!e.enable&&t&&this.setSidebarHTML(o.data,a,r,s)}openPopup(e,t,o,a,r,s,i){if(!s.enable&&!i){o&&o.remove();if(a.data.popup_style){if(!a.data.popup_style.open_as_modal_immediately){a.data.location&&"Point"===a.data.location.type&&(r=a.data.location.coordinates);let o=new t.Popup(this.returnPopupOptions(a.data)).setLngLat(r).setHTML(this.getPopupHTML(a.id,a.data));this.centerPopup(e,o,a);o.addTo(e);return o}this.openDirectToModal(a)}}}openDirectToModal(e){
}centerPopup(e,t,o){
}mouseIsNear(e,t,o){if(e&&e.offset()){var a=e.offset().left-t,r=e.offset().top-t,s=a+e.width()+2*t,i=r+e.height()+2*t,n=o.pageX,l=o.pageY;return n>a&&n<s&&l>r&&l<i}return!1}getDirectionsLatLng(e){let t="";e.location&&(t=e.location.coordinates[1].toString()+","+e.location.coordinates[0].toString());if(e.line){let o=turf.center(e.line);t=o.geometry.coordinates[1].toString()+","+o.geometry.coordinates[0].toString()}if(e.polygon){let o=turf.center(e.polygon);t=o.geometry.coordinates[1].toString()+","+o.geometry.coordinates[0].toString()}return t}getPopupHTML(e,t){var o=this.getPopupStyle(t),a=this.returnPopupCSS(t),r=this.returnPopupLayout(t),s=this.returnPopupContent(t),i=this.returnPopupHTML(t),n="";"to-directions"===s.button_action&&(n=this.getDirectionsLatLng(t));r.enable_image&&"gallery"===s.image_type&&setTimeout((()=>{this.initializeSlider(`mapster-popup-${t.popup_style.id}`,s.images.length+1)}),400);return`\n      <style>${o}</style>\n      ${r.use_custom_css?`<style>${a.css_editor.replace(/#mapster-popup/g,`#mapster-popup-${t.popup_style.id}`)}</style>`:""}\n      ${r.use_custom_html?this.replaceHTMLValues(i.html_editor,s,e):`<div id="mapster-popup-${t.popup_style.id}" class="map-popup-background ${this.sanitizeInput(r.popup_class)} mapster-feature-popup-${e}">\n          ${r.enable_header?`<div class="map-popup-header">\n              <h2>${s.header_text}</h2>\n            </div>`:""}\n          ${r.enable_image&&"feature-image"===s.image_type?'<div class="map-popup-image"></div>':""}\n          ${r.enable_image&&"gallery"===s.image_type?`<div class="map-popup-gallery">\n              <div id="mapster-slider" style="height : ${a.image_height}px;">\n                <div class="mapster-slider-control_next">></div>\n                <div class="mapster-slider-control_prev"><</div>\n                <ul>\n                  ${s.images.map((e=>`<li style="height : ${a.image_height}px; background-image: url(${e});"> </li>`)).join(" ")}\n                </ul>\n              </div>\n            </div>`:""}\n          ${r.enable_body?`<div class="map-popup-body">\n              ${t.popup.render_shortcode&&"1"===window.mapster_params.activated?`<iframe class="mapster-popup-shortcode-iframe" scrolling="no" onload="this.style.height=(this.contentDocument.getElementById('mapster-popup-shortcode-content').offsetHeight+10) + 'px';" src='${window.mapster_params.directory}../admin/includes/mapster-popup-shortcode.php?feature_id=${e}&popup_id=${t.popup_style.id}'></iframe>`:`<p>${s.body_text}</p>`}\n            </div>`:""}\n          ${r.enable_footer?`<div class="map-popup-footer">\n              ${"do-nothing"===s.button_action?`<button class="map-popup-footer-button">${s.button_text}</button>`:""}\n              ${"to-post"===s.button_action?`<button class="map-popup-footer-button" onclick="${s.open_link_in_new_tab?`window.open('${t.popup.permalink}', '_blank');`:`window.open('${t.popup.permalink}', '_self');`}">\n                  ${s.button_text}\n                 </button>`:""}\n              ${"to-link"===s.button_action?`<button class="map-popup-footer-button" onclick="${s.open_link_in_new_tab?`window.open('${s.button_url}', '_blank');`:`window.open('${s.button_url}', '_self');`}">\n                  ${s.button_text}\n                 </button>`:""}\n              ${"to-directions"===s.button_action?`<button class="map-popup-footer-button" onclick="window.open('https://www.google.com/maps/dir/?api=1&destination=${n}', '_blank');">\n                  ${s.button_text}\n                 </button>`:""}\n              ${"to-modal"===s.button_action?`<button class="map-popup-footer-button mapster-button-modal-open">\n                  ${s.button_text}\n                 </button>\n                 <div class="mapster-modal-content-in-popup"><iframe style='width: 100%; height: ${window.innerHeight-300}px;' src='${window.mapster_params.directory}../admin/includes/mapster-modal-shortcode.php?feature_id=${e}&type=modal_details'></iframe></div>`:""}\n            </div>`:""}\n        </div>`}\n    `}getPopupStyle(e){var t=this.returnPopupCSS(e),o=this.returnPopupLayout(e),a=this.returnPopupContent(e),r=e.popup_style.id;return`\n      .mapboxgl-popup .mapboxgl-popup-content, .maplibregl-popup .maplibregl-popup-content {\n        padding: 0px;\n        background: none;\n        border: none;\n        border-radius: none;\n        box-shadow: none;\n      }\n      #mapster-popup-${r}.map-popup-background {\n        background : ${t.background};\n        text-align : ${t.align};\n        border-radius: 3px;\n        box-shadow: 0 1px 2px rgb(0 0 0 / 10%);\n      }\n      #mapster-popup-${r} .map-popup-header {\n        background : ${t.header};\n        padding: 10px;\n      }\n      #mapster-popup-${r} .map-popup-header h2 {\n        all : revert;\n        color : ${t.header_text};\n        text-align : ${t.align};\n        font-weight: bold;\n        margin: 0;\n        padding: 0;\n      }\n      #mapster-popup-${r} .map-popup-image {\n        background-image : url("${a.featured_image?a.featured_image.url:""}");\n        background-position : center center;\n        background-size: cover;\n        height : ${t.image_height}px;\n        width: 100%;\n      }\n      #mapster-popup-${r} .map-popup-body {\n        margin-top: -1px;\n        background : ${t.body};\n        padding: 10px;\n        color : ${t.body_text};\n      }\n      #mapster-popup-${r} .map-popup-body p {\n        padding: 0px;\n        text-align : ${t.align};\n        margin: 0px;\n      }\n      #mapster-popup-${r} .map-popup-footer {\n        margin-top: -1px;\n        background : ${t.footer};\n        padding: 10px;\n      }\n      #mapster-popup-${r} .map-popup-footer .map-popup-footer-button {\n        all : revert;\n        background : ${t.button};\n        border-color: ${t.button};\n        color : ${t.button_text};\n        padding: 5px;\n        text-decoration: none;\n        text-shadow: none;\n      }\n      #mapster-popup-${r} .map-popup-footer .map-popup-footer-button:hover {\n        cursor: pointer;\n        filter: brightness(1.15);\n      }\n\t\t\t.mapboxgl-popup.mapboxgl-popup-anchor-top .mapboxgl-popup-tip, .maplibregl-popup.maplibregl-popup-anchor-top .maplibregl-popup-tip,\n\t\t\t.mapboxgl-popup.mapboxgl-popup-anchor-top-left .mapboxgl-popup-tip, .maplibregl-popup.maplibregl-popup-anchor-top-left .maplibregl-popup-tip,\n\t\t\t.mapboxgl-popup.mapboxgl-popup-anchor-top-right .mapboxgl-popup-tip, .maplibregl-popup.maplibregl-popup-anchor-top-right .maplibregl-popup-tip {\n        border-bottom-color : ${t.pointer};\n        display : ${o.enable_pointer?"block":"none"};\n      }\n\t\t\t.mapboxgl-popup.mapboxgl-popup-anchor-right .mapboxgl-popup-tip, .maplibregl-popup.maplibregl-popup-anchor-right .maplibregl-popup-tip {\n\t\t\t\tborder-left-color : ${t.pointer};\n        display : ${o.enable_pointer?"block":"none"};\n\t\t\t}\n\t\t\t.mapboxgl-popup.mapboxgl-popup-anchor-left .mapboxgl-popup-tip, .maplibregl-popup.maplibregl-popup-anchor-left .maplibregl-popup-tip {\n\t\t\t\tborder-right-color : ${t.pointer};\n        display : ${o.enable_pointer?"block":"none"};\n\t\t\t}\n\t\t\t.mapboxgl-popup.mapboxgl-popup-anchor-bottom .mapboxgl-popup-tip, .maplibregl-popup.maplibregl-popup-anchor-bottom .maplibregl-popup-tip,\n\t\t\t.mapboxgl-popup.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-tip, .maplibregl-popup.maplibregl-popup-anchor-bottom-left .maplibregl-popup-tip,\n\t\t\t.mapboxgl-popup.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-tip, .maplibregl-popup.maplibregl-popup-anchor-bottom-right .maplibregl-popup-tip {\n        border-top-color : ${t.pointer};\n        display : ${o.enable_pointer?"block":"none"};\n      }\n    `}sanitizeInput(e){const t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"};return e.replace(/[&<>"'/]/gi,(e=>t[e]))}setSidebarHTML(e,t,o,a){var r="#mapster-wp-maps-"+a;jQuery(".mapster-sidebar-popup").remove();var s=jQuery(r).height(),i=(jQuery(r).width(),this.getPopupStyle(e)),n=this.returnPopupCSS(e),l=this.returnPopupLayout(e),p=this.returnPopupContent(e),c=this.returnPopupHTML(e);l.enable_image&&"gallery"===p.image_type&&setTimeout((()=>{this.initializeSlider(`mapster-sidebar-popup-${e.popup_style.id}`,p.images.length+1)}),400);jQuery(document).on("click",".mapster-sidebar-popup-exit",(()=>{jQuery(".mapster-sidebar-popup").remove()}));const d=parseFloat(t),m=parseFloat(o),u=`\n      <style>${i.replace(/-popup/g,"-sidebar-popup")}</style>\n      ${l.use_custom_css?`<style>${n.css_editor.replace(/#mapster-popup/g,`#mapster-popup-${e.popup_style.id}`)}</style>`:""}\n      <div id="mapster-sidebar-popup-${e.popup_style.id}" class="mapster-sidebar-popup" style="min-width: ${d}px; min-height: ${s/2}px; max-height: ${s}px; max-width: ${m}px;">\n      ${l.use_custom_html?this.replaceHTMLValues(c.html_editor,p,e.popup_style.id):`<div>\n          <div class="mapster-sidebar-popup-exit">&#10006;</div>\n          ${l.enable_header?`<div class="map-sidebar-popup-header">\n              <h2>${p.header_text}</h2>\n            </div>`:""}\n          ${l.enable_image&&"feature-image"===p.image_type?'<div class="map-sidebar-popup-image"></div>':""}\n          ${l.enable_image&&"gallery"===p.image_type?`<div class="map-sidebar-popup-gallery">\n              <div id="mapster-slider" style="height : ${n.image_height}px;">\n                <div class="mapster-slider-control_next">></div>\n                <div class="mapster-slider-control_prev"><</div>\n                <ul>\n                  ${p.images.map((e=>`<li style="height : ${n.image_height}px; background-image: url(${e});"> </li>`)).join(" ")}\n                </ul>\n              </div>\n            </div>`:""}\n          ${l.enable_body?`<div class="map-sidebar-popup-body">\n              <p>${p.body_text}</p>\n            </div>`:""}\n          ${l.enable_footer?`<div class="map-sidebar-popup-footer">\n              ${"do-nothing"===p.button_action?`<button class="map-sidebar-popup-footer-button">${p.button_text}</button>`:""}\n              ${"to-post"===p.button_action?`<button class="map-sidebar-popup-footer-button" onclick="${p.open_link_in_new_tab?`window.open('${e.popup.permalink}', '_blank');`:`window.open('${e.popup.permalink}', '_self');`}">\n                  ${p.button_text}\n                 </button>`:""}\n              ${"to-link"===p.button_action?`<button class="map-sidebar-popup-footer-button" onclick="${p.open_link_in_new_tab?`window.open('${p.button_url}', '_blank');`:`window.open('${p.button_url}', '_self');`}">\n                  ${p.button_text}\n                 </button>`:""}\n              ${"to-modal"===p.button_action?`<button class="map-sidebar-popup-footer-button mapster-button-modal-open">\n                  ${p.button_text}\n                 </button>\n                 <div class="mapster-modal-content-in-popup">${p.modal_details}</div>`:""}\n            </div>`:""}\n        </div>`}\n      </div>\n    `;jQuery(r).append(u)}replaceHTMLValues(e,t,o){let a;
return`\n      <div class="mapster-feature-popup-${o}">\n        ${a}\n      </div>\n    `}returnPopupHTML(e){return{html_editor:e.popup_style.html_editor}}returnPopupContent(e){return{header_text:e.popup.header_text,image_type:e.popup.image_type,featured_image:e.popup.featured_image,images:e.popup.images,body_text:e.popup.body_text,button_text:e.popup.button_text,button_action:e.popup.button_action,button_url:e.popup.button_url,modal_details:e.popup.modal_details,additional_details:e.additional_details,open_link_in_new_tab:e.popup.open_link_in_new_tab}}returnPopupLayout(e){return{enable_header:e.popup_style.enable_header,enable_image:e.popup_style.enable_image,enable_body:e.popup_style.enable_body,enable_footer:e.popup_style.enable_footer,enable_pointer:e.popup_style.enable_pointer,use_custom_css:e.popup_style.use_custom_css,use_custom_html:e.popup_style.use_custom_html,popup_class:e.popup_style.popup_class}}returnPopupOptions(e){return{anchor:e.popup_style.popup_anchor?e.popup_style.popup_anchor:"bottom",focusAfterOpen:!1,className:"hover"===e.interaction?"mapster-hover-popup":"",closeButton:e.popup_style.close_button,closeOnClick:e.popup_style.close_on_click,closeMapMove:e.popup_style.close_on_map_move,maxWidth:e.popup_style.max_width+"px"}}returnPopupCSS(e){return{background:e.popup_style.background,header:e.popup_style.header,image_height:e.popup_style.image_height,body:e.popup_style.body,footer:e.popup_style.footer,button:e.popup_style.button,pointer:e.popup_style.pointer,header_text:e.popup_style.header_text,body_text:e.popup_style.body_text,button_text:e.popup_style.button_text,align:e.popup_style.align,css_editor:e.popup_style.css_editor,max_width:e.popup_style.max_width}}getMarkerStyles(e){var t=e.data;return{color:t.marker.color,scale:parseFloat(t.marker.scale)/100,rotation:parseFloat(t.marker.rotation),anchor:t.marker.anchor}}getLayerExpressions(e,t,o){if("line"===e)return{layout:{},paint:{"line-color":["case",["boolean",["feature-state","hover"],!1],["get","hover_effects_hover_color"],["has","color"],["get","color"],"#000"],"line-opacity":["case",["boolean",["feature-state","hover"],!1],["/",["to-number",["get","hover_effects_hover_opacity"]],100],["has","opacity"],["/",["to-number",["get","opacity"]],100],1],"line-width":["case",["boolean",["feature-state","hover"],!1],["to-number",["get","hover_effects_hover_width"]],["has","width"],["to-number",["get","width"]],2],"line-dasharray":"mapbox"===o?["case",["==",!0,["to-boolean",["get","dashed_line"]]],["get","dash_properties_line_dash_array"],["literal",[1,0]]]:[1,0]}};if("polygon"===e){if("fill"===t)return{layout:{},paint:{"fill-color":["case",["boolean",["feature-state","hover"],!1],["get","hover_effects_hover_color"],["has","color"],["get","color"],"#000"],"fill-opacity":["case",["boolean",["feature-state","hover"],!1],["/",["to-number",["get","hover_effects_opacity"]],100],["has","opacity"],["/",["to-number",["get","opacity"]],100],1],"fill-outline-color":["case",["boolean",["feature-state","hover"],!1],["get","hover_effects_outline-color"],["has","outline-color"],["get","outline-color"],"rgba(0,0,0,0)"]}};if("fill-extrusion"===t)return"1"===window.mapster_params.activated?{layout:{},paint:{"fill-extrusion-color":["case",["boolean",["feature-state","hover"],!1],["get","hover_effects_hover_color"],["has","color"],["get","color"],"#000"],"fill-extrusion-opacity":.75,"fill-extrusion-base":["case",["boolean",["feature-state","hover"],!1],["/",["to-number",["get","3d_polygon_base"]],100],["has","3d_polygon_base"],["to-number",["get","3d_polygon_base"]],0],"fill-extrusion-height":["case",["boolean",["feature-state","hover"],!1],["to-number",["get","3d_polygon_height"]],["has","3d_polygon_height"],["to-number",["get","3d_polygon_height"]],0]}}:{layout:{},paint:{}}}if("location"===e){if("circle"===t)return{layout:{},paint:{"circle-color":["case",["boolean",["feature-state","hover"],!1],["get","circle_hover_effects_hover_color"],["has","circle_color"],["get","circle_color"],"#000"],"circle-opacity":["case",["boolean",["feature-state","hover"],!1],["/",["to-number",["get","circle_hover_effects_hover_opacity"]],100],["has","circle_opacity"],["/",["to-number",["get","circle_opacity"]],100],1],"circle-radius":["case",["boolean",["feature-state","hover"],!1],["to-number",["get","circle_hover_effects_hover_radius"]],["has","circle_radius"],["to-number",["get","circle_radius"]],0],"circle-stroke-width":["case",["boolean",["feature-state","hover"],!1],["to-number",["get","circle_hover_effects_hover_stroke-width"]],["has","circle_stroke-width"],["to-number",["get","circle_stroke-width"]],0],"circle-stroke-color":["case",["boolean",["feature-state","hover"],!1],["get","circle_hover_effects_hover_stroke-color"],["has","circle_stroke-color"],["get","circle_stroke-color"],"#000"],"circle-stroke-opacity":["case",["boolean",["feature-state","hover"],!1],["/",["to-number",["get","circle_hover_effects_hover_stroke-opacity"]],100],["has","circle_stroke-opacity"],["/",["to-number",["get","circle_stroke-opacity"]],100],1]}};if("symbol"===t)return{layout:{"text-field":["case",["has","label_text_properties_text-field"],["get","label_text_properties_text-field"],"New Text"],"text-font":["case",["==","Open Sans Regular",["get","label_text_properties_text-font"]],["literal",["Open Sans Regular"]],["==","Open Sans Bold",["get","label_text_properties_text-font"]],["literal",["Open Sans Bold"]],["==","Open Sans Italic",["get","label_text_properties_text-font"]],["literal",["Open Sans Italic"]],["==","Klokantech Noto Sans Regular",["get","label_text_properties_text-font"]],["literal",["Klokantech Noto Sans Regular"]],["==","Klokantech Noto Sans Bold",["get","label_text_properties_text-font"]],["literal",["Klokantech Noto Sans Bold"]],["==","Klokantech Noto Sans Italic",["get","label_text_properties_text-font"]],["literal",["Klokantech Noto Sans Italic"]],["==","Metropolis",["get","label_text_properties_text-font"]],["literal",["Metropolis"]],["==","Metropolis Bold",["get","label_text_properties_text-font"]],["literal",["Metropolis Bold"]],["==","Metropolis Regular Italic",["get","label_text_properties_text-font"]],["literal",["Metropolis Regular Italic"]],["literal",["Open Sans Regular"]]],"text-rotate":["case",["has","label_text_properties_text-rotate"],["to-number",["get","label_text_properties_text-rotate"]],0],"text-size":["case",["==",!1,["get","label_label_on"]],0,["has","label_text_properties_text-size"],["to-number",["get","label_text_properties_text-size"]],16],"icon-size":["interpolate",["exponential",2],["zoom"],1,["case",["==",!1,["get","icon_icon_on"]],0,["all",["has","icon_icon_properties_icon-static-size"],["==",!0,["get","icon_icon_properties_icon-static-size"]]],["*",["to-number",["get","icon_icon_properties_icon-size"]],["^",2,-15]],["has","icon_icon_properties_icon-size"],["/",["to-number",["get","icon_icon_properties_icon-size"]],100],1],22,["case",["==",!1,["get","icon_icon_on"]],0,["all",["has","icon_icon_properties_icon-static-size"],["==",!0,["get","icon_icon_properties_icon-static-size"]]],["*",["to-number",["get","icon_icon_properties_icon-static-size"]],["^",2,6]],["has","icon_icon_properties_icon-size"],["/",["to-number",["get","icon_icon_properties_icon-size"]],100],1]],"icon-rotate":["case",["has","icon_icon_properties_icon-rotate"],["to-number",["get","icon_icon_properties_icon-rotate"]],0],"icon-allow-overlap":!0,"icon-ignore-placement":!0,"icon-anchor":["case",["has","icon_icon_properties_icon-anchor"],["get","icon_icon_properties_icon-anchor"],"center"],"icon-offset":["case",["has","icon_icon_properties_offset_array"],["get","icon_icon_properties_offset_array"],["literal",[0,0]]],"text-offset":["case",["has","label_text_properties_offset_array"],["get","label_text_properties_offset_array"],["literal",[0,0]]],"text-allow-overlap":!0,"text-ignore-placement":!0},paint:{"text-color":["case",["has","label_text_properties_text-color"],["get","label_text_properties_text-color"],"#000000"],"text-halo-width":["case",["has","label_text_properties_text-halo-width"],["to-number",["get","label_text_properties_text-halo-width"]],1],"text-halo-color":["case",["has","label_text_properties_text-halo-color"],["get","label_text_properties_text-halo-color"],"#FFFFFF"],"text-halo-blur":["case",["has","label_text_properties_text-halo-blur"],["/",["to-number",["get","label_text_properties_text-halo-blur"]],100],1],"text-opacity":["case",["has","label_text_properties_text-opacity"],["/",["to-number",["get","label_text_properties_text-opacity"]],100],1],"icon-opacity":["case",["boolean",["feature-state","hover"],!1],["/",["to-number",["get","icon_icon_properties_hover_effects_hover_opacity"]],100],["has","icon_icon_properties_icon-opacity"],["/",["to-number",["get","icon_icon_properties_icon-opacity"]],100],1]}}}}addIcons(e,t,o){t.indexOf("symbol")>-1&&o.features.forEach((o=>{o.properties.icon_icon_on&&o.properties["icon_icon_properties_icon-image_url"]&&this.addNewIcon(e,o.properties["icon_icon_properties_icon-image_url"],o.properties["icon_icon_properties_icon-image_id"],(()=>{e.getLayer(t)&&e.setLayoutProperty(t,"icon-image",["case",["has","icon_icon_properties_icon-image_id"],["concat","icon-image-",["get","icon_icon_properties_icon-image_id"]],"none"])}))}))}addNewIcon(e,t,o,a){if(this.queuedImages.indexOf(`icon-image-${o}`)>-1)a();else{this.queuedImages.push(`icon-image-${o}`);t||a();"https:"===window.location.protocol&&t.indexOf("http://")>-1&&(t=t.replace("http","https"));var r=new Image;r.src=t;r.crossOrigin="";r.onload=function(){if(e.loaded()){e.hasImage(`icon-image-${o}`)?e.updateImage(`icon-image-${o}`,r):e.addImage(`icon-image-${o}`,r);a()}else e.once("idle",(()=>{e.hasImage(`icon-image-${o}`)?e.updateImage(`icon-image-${o}`,r):e.addImage(`icon-image-${o}`,r);a()}))}}}createLayerGeoJSON(e,t,o,a,r,s,i){var n={type:"FeatureCollection",features:[]};let l="line"===t?r:"location"===t?a:"polygon"===t?s:[],p=o.indexOf("-")>-1&&o.split("-")[1],c=o.indexOf("-")>-1?o.split("-")[0]:o;if("fill-extrusion"===o){c=o;p=!1}l.forEach((a=>{if(a.data[t]&&c===this.getLayerType(t,a.data)&&(!p||a.categories.find((e=>e.id===parseFloat(p))))){let t=!1;i.length>0&&a.categories.forEach((e=>{i.indexOf(e.id)>-1&&(t=!0)}));if(!t){var r=this.makeFeatureJSON(a.data);let t=!1;if(r.features[0]){t=this.makeFeatureWithProperties(a,r.features[0]);n.features.push(t)}a.data.open_popup_on_load&&-1===o.indexOf("-")&&setTimeout((()=>{if(e){const o=turf.pointOnFeature(r);e.fire("click",{mapsterFeatureID:t.properties.post_id,lngLat:o.geometry.coordinates,originalEvent:{}})}}),500)}}}));return n}createMarkerGeoJSON(e,t){let o=!!t.indexOf("-")&&t.split("-")[1];var a={type:"FeatureCollection",features:[]};a.features=e.filter((e=>!o&&"marker"===e.data.location_style||!(!o||"marker"!==e.data.location_style||!e.categories.find((e=>e.id===parseFloat(o)))))).map((e=>{e.post_id=e.id;return{type:"Feature",properties:e,geometry:e.data.location}}));return a}makeFeatureWithProperties(e,t){var o=JSON.parse(JSON.stringify(t));o.id=e.id;o.properties.post_id=e.id;for(var a in e.data)-1===["polygon","line","location","popup","popup_style"].indexOf(a)&&this.assignToProperty(o,e.data,a);o.properties.dashed_line&&o.properties.dash_properties_dash_length&&(o.properties.dash_properties_line_dash_array=[parseFloat(o.properties.dash_properties_dash_length),parseFloat(o.properties.dash_properties_gap_length)]);(o.properties["label_text_properties_text-translate-x"]||o.properties["label_text_properties_text-translate-y"])&&(o.properties.label_text_properties_offset_array=[parseFloat(o.properties["label_text_properties_text-translate-x"]),parseFloat(o.properties["label_text_properties_text-translate-y"])]);(o.properties["icon_icon_properties_icon-translate-x"]||o.properties["icon_icon_properties_icon-translate-y"])&&(o.properties.icon_icon_properties_offset_array=[parseFloat(o.properties["icon_icon_properties_icon-translate-x"]),parseFloat(o.properties["icon_icon_properties_icon-translate-y"])]);return o}assignToProperty(e,t,o,a){if("object"==typeof t[o])for(var r in t[o])this.assignToProperty(e,t[o],r,a?a+"_"+o:o);else{var s=a?a+"_"+o:o;e.properties[s]=t[o]}}getLayerType(e,t){if("line"===e)return"line";if("polygon"===e){if(!t.polygon_style||"fill"===t.polygon_style)return"fill";if("fill-extrusion"===t.polygon_style)return"fill-extrusion"}if("location"===e){if("circle"===t.location_style)return"circle";if("label"===t.location_style)return"symbol"}}}class MapsterCore{constructor(){}setDataLayers(){}getPostData({post_id:e,single_feature_id:t,feature_ids:o}){const a=new MapsterHelpers;let r=t?`&single_feature_id=${t}`:"",s=o?`&feature_ids=${o}`:"";return fetch(`${window.mapster_params.rest_url}mapster-wp-maps/map${window.mapster_params.qd}id=${e}${r}${s}`).then((e=>e.json())).then((e=>a.formatResponse(e)))}getFeaturesAdmin({locations_ids:e,lines_ids:t,polygons_ids:o,cats:a}){const r=e.concat(t.concat(o));return fetch(`${window.mapster_params.rest_url}mapster-wp-maps/features${window.mapster_params.qd}ids=${JSON.stringify(r)}&categories=${JSON.stringify(a)}`).then((e=>e.json()))}sortLocations({adminFeatures:e}){return e.filter((e=>e.data.location))}sortLines({adminFeatures:e}){return e.filter((e=>e.data.line))}sortPolygons({adminFeatures:e}){return e.filter((e=>e.data.polygon))}doClustering({map:e,map_provider:t,cluster_options:o,circle_clustering:a,label_icon_clustering:r,marker_clustering:s,markers:i,locations:n,lines:l,polygons:p,idsToHide:c}){return(new MapsterHelpers).setClustering(e,t,o,a,r,s,i,n,l,p,c)}loadCustomScripts({map:e,javascript:t,locations:o,lines:a,polygons:r}){if(t&&window[t]){(0,window[t])(e,o.concat(a.concat(r)))}}setLighting({map:e,map_type:t}){let o=(new MapsterHelpers).getLighting(t);o&&e.getConfig("basemap")&&e.getConfig("basemap","lightPreset")&&e.setConfigProperty("basemap","lightPreset",o)}setMapStyle({map:e,map_type:t}){const o=new MapsterHelpers;"custom-image"===t.map_provider?o.setCustomImageMap(e,t,!0):t.custom_style_json&&""!==t.custom_style_json?e.setStyle(JSON.parse(t.custom_style_json)):e.setStyle(o.getStyle(t))}checkQuerystring({post_id:e,map:t,markers:o,locations:a}){
}loadProjection({map:e,map_provider:t,projection:o}){"mapbox"===t&&e.setProjection({name:o,center:[0,30],parallels:[30,30]})}loadBuildings3D({map:e,map_provider:t,buildings_3d:o}){
}setIPLocation({map:e,view:t}){"location"===t.initial_load&&window.mapster_params.ip&&fetch(`http://ip-api.com/json/${window.mapster_params.ip}`).then((e=>e.json())).then((o=>{"fail"!==o.status&&e.flyTo({center:[o.lon,o.lat],zoom:parseFloat(t.manual_zoom),bearing:parseFloat(t.manual_rotation),pitch:parseFloat(t.manual_pitch)})}))}loadTerrain({map:e,map_provider:t,terrain:o}){if("mapbox"===t)if(o){if(!e.getSource("mapbox-mapster-dem")){e.addSource("mapbox-mapster-dem",{type:"raster-dem",url:"mapbox://mapbox.mapbox-terrain-dem-v1",tileSize:512,maxzoom:14});e.setTerrain({source:"mapbox-mapster-dem",exaggeration:1.5});e.addLayer({id:"sky",type:"sky",paint:{"sky-type":"atmosphere","sky-atmosphere-sun":[0,0],"sky-atmosphere-sun-intensity":15}})}}else{e.getLayer("sky")&&e.removeLayer("sky");e.setTerrain(null);e.getSource("mapbox-mapster-dem")&&e.removeSource("mapbox-mapster-dem")}}layerClick({map:e,interactivity:t,clicking_disabled:o,clickedEvent:a,locations:r,lines:s,polygons:i}){if(t||!o){if(a.is3D)return a.location;let t=a.point?a.point:e.project(a.lngLat),o=e.queryRenderedFeatures(t).filter((e=>["symbol","line","fill","circle"].indexOf(e.source.split("-")[0])>-1)),n=o[0];if(a.mapsterFeatureID){let e=o.find((e=>e.id===a.mapsterFeatureID));e&&(n=e)}a.mapsterFoundFeature&&(n=a.mapsterFoundFeature);if(n&&("fill"!==n.layer.id||"fill"===n.layer.id&&0!==n.layer.paint["fill-opacity"])){return r.concat(s.concat(i)).find((e=>e.id===n.properties.post_id))}return!1}return!1}storeLocatorClick({clickedFeature:e,store_locator_options:t}){const o=new MapsterHelpers;e&&e.data.enable_popup&&("click"===e.data.interaction||o.isMobile()&&e.data.click_on_mobile)&&o.openStoreLocatorClick(t,e.id)}sidebarClick({post_id:e,clickedFeature:t,minimum_sidebar_width:o,maximum_sidebar_width:a,store_locator_options:r,open_popups_in_sidebar:s}){const i=new MapsterHelpers;t&&t.data.enable_popup&&("click"===t.data.interaction||i.isMobile()&&t.data.click_on_mobile)&&i.openSidebarClick(r,s,t,o,a,e)}externalClickLayer({clickedFeature:e}){(new MapsterHelpers).openExternalLink(e)}externalClickMarker({clickedMarker:e}){(new MapsterHelpers).openExternalLink(e)}popupClick({map:e,mapLibrary:t,clickedPopup:o,clickedFeature:a,clickedEvent:r,store_locator_options:s,open_popups_in_sidebar:i}){const n=new MapsterHelpers;if(a&&a.data.enable_popup&&("click"===a.data.interaction||n.isMobile()&&a.data.click_on_mobile))return n.openPopup(e,t,o,a,r.lngLat,s,i)}layerHover({map:e,interactivity:t,clicking_disabled:o,hoveredEvent:a,locations:r,lines:s,polygons:i}){if(t||!o){if(a.is3D)return a.location;var n=e.queryRenderedFeatures(a.point).filter((e=>["symbol","line","fill","circle"].indexOf(e.source.split("-")[0])>-1));if(n[0]&&("fill"!==n[0].layer.id||"fill"===n[0].layer.id&&0!==n[0].layer.paint["fill-opacity"])){return r.concat(s.concat(i)).find((e=>e.id===n[0].properties.post_id))}return!1}return!1}layerHoverEffect({map:e,interactivity:t,clicking_disabled:o,hoveredFeature:a}){const r=new MapsterHelpers;r.changeCursor(e,a,"on");"1"===window.mapster_params.activated&&(!t&&o||!a||r.doHover(e,a))}popupHover({map:e,mapLibrary:t,hoveredPopup:o,hoveredFeature:a,hoveredEvent:r,store_locator_options:s}){const i=new MapsterHelpers;if(a&&a.data.enable_popup&&"hover"===a.data.interaction&&(!i.isMobile()||i.isMobile()&&a.data.click_on_mobile))return i.openPopup(e,t,o,a,r.lngLat,s)}markerClick({interactivity:e,clicking_disabled:t,clickedMarker:o}){return!(!e&&t)&&o.mapsterProperties}markerHover({interactivity:e,clicking_disabled:t,hoveredMarker:o}){return!(!e&&t)&&o.mapsterProperties}markerHoverEffect({map:e,mapLibrary:t,interactivity:o,clicking_disabled:a,hoveredMarker:r}){
}openMarkerClickPopup({map:e,mapLibrary:t,clickedMarker:o,clickedFeature:a,clickedPopup:r,store_locator_options:s,open_popups_in_sidebar:i}){const n=new MapsterHelpers;if(!s.enable&&!i&&a&&a.data.enable_popup&&("click"===a.data.interaction||n.isMobile()&&a.data.click_on_mobile)&&a.data.popup_style)if(a.data.popup_style.open_as_modal_immediately)n.openDirectToModal(a);else{const r=new t.Popup(n.returnPopupOptions(a.data));r.setHTML(n.getPopupHTML(a.id,a.data));n.centerPopup(e,r,a);o.setPopup(r)}}openMarkerHoverPopup({map:e,mapLibrary:t,hoveredMarker:o,hoveredFeature:a}){const r=new MapsterHelpers;if(a&&a.data.enable_popup&&"hover"===a.data.interaction&&!r.isMobile()&&a.data.popup_style&&!o.getPopup())if(a.data.popup_style.open_as_modal_immediately)r.openDirectToModal(a);else{const s=new t.Popup(r.returnPopupOptions(a.data));s.setHTML(r.getPopupHTML(a.id,a.data));r.centerPopup(e,s,a);o.setPopup(s).togglePopup()}}markerHoverEffectOff({tempHoverMarker:e,hoveredMarker:t}){
}removeMarkerHoverPopup({hoveredMarker:e}){const t=new MapsterHelpers;e&&e.mapsterProperties.data.enable_popup&&"hover"===e.mapsterProperties.data.interaction&&!t.isMobile()&&(e&&!e.mapsterProperties.data.keep_popup_open_on_hover?e.setPopup(null):e&&e.mapsterProperties.data.keep_popup_open_on_hover&&jQuery(document).on("mousemove.mapster",(function(o){let a=jQuery(`.mapster-feature-popup-${e.mapsterProperties.id}`).closest(".mapboxgl-popup");if(t.mouseIsNear(a,2,o))a.one("mouseleave",(function(){e.setPopup(null);jQuery(document).off("mousemove.mapster")}));else{e.setPopup(null);jQuery(document).off("mousemove.mapster")}})))}layerHoverEffectOff({map:e,interactivity:t,clicking_disabled:o,hoveredFeature:a}){const r=new MapsterHelpers;r.changeCursor(e,a,"off");"1"===window.mapster_params.activated&&(!t&&o||!a||r.doHoverOut(e,a))}removePopupHover({hoveredFeature:e,hoveredPopup:t}){t&&!e.data.keep_popup_open_on_hover?t.remove():t&&e.data.keep_popup_open_on_hover&&jQuery(document).one("mousemove",(function(o){let a=jQuery(`.mapster-feature-popup-${e.id}`).closest(".mapboxgl-popup:hover");a.length?a.one("mouseleave",(function(){t.remove()})):t.remove()}))}setInteractivity({map:e,zoom_on_scroll:t,interactivity:o,allow_rotation_and_pitch:a}){t||e.scrollZoom.disable();if(!o){e.scrollZoom.disable();e.boxZoom.disable();e.dragRotate.disable();e.dragPan.disable();e.keyboard.disable();e.doubleClickZoom.disable();e.touchZoomRotate.disable()}if(o&&!a){e.dragRotate.disable();e.setMaxPitch(0);e.touchZoomRotate.disableRotation()}}setFeaturesToMap({map:e,map_provider:t,locations:o,lines:a,polygons:r}){const s=new MapsterHelpers;[["line","line"],["polygon","fill"],["polygon","fill-extrusion"],["polygon","fill-image"],["location","circle"],["location","symbol"],["location","3d-model"]].forEach((i=>{var n=s.createLayerGeoJSON(e,i[0],i[1],o,a,r,[]);if("3d-model"!==i[1]&&"fill-image"!==i[1])if(e.getSource(i[1])){e.getSource(i[1]).setData(n);s.addIcons(e,i[1],n)}else{e.addSource(i[1],{type:"geojson",data:n});var l=s.getLayerExpressions(i[0],i[1],t);e.addLayer({id:i[1],source:i[1],type:i[1],paint:l.paint,layout:l.layout});s.addIcons(e,i[1],n)}else"3d-model"===i[1]?s.create3DModels(e,o):"fill-image"===i[1]&&s.createFillImages(e,r)}))}setMarkersToMap({map:e,markers:t,mapLibrary:o,locations:a,marker_clustering:r}){a.filter((e=>!e.data.location.coordinates[0]));const s=new MapsterHelpers;let i=[];t.forEach((e=>{a.find((t=>t.id===e.id))?i.push(e):e.remove()}));let n=[];n=n.concat(i);const l=a.filter((e=>"marker"===e.data.location_style));let p=[];l.sort(((e,t)=>{if(e.data.location.coordinates&&t.data.location.coordinates)return e.data.location.coordinates[1]>t.data.location.coordinates[1]?-1:1;if(!e.data.location.coordinates&&-1===p.indexOf(e.title)){alert(`A point is missing coordinates. See ${e.title}.`);p.push(e.title)}if(!t.data.location.coordinates&&-1===p.indexOf(t.title)){alert(`A point is missing coordinates. See ${t.title}.`);p.push(t.title)}}));l.forEach((t=>{if(!i.find((e=>e.mapsterProperties.id===t.id))){var a=s.getMarkerStyles(t),l=s.makeFeatureJSON(t.data).features[0].geometry.coordinates,p=new o.Marker(a).setLngLat(l);p.mapsterProperties=t;r||p.addTo(e);n.push(p);t.data.open_popup_on_load&&setTimeout((()=>{jQuery(p.getElement()).trigger("click")}),100)}}));return n}setHeatmap({map:e,mapLibrary:t,markers:o,locations:a,heatmap:r}){
}setMapSize({post_id:e,layout:t}){var o="#mapster-wp-maps-"+e;const a=new MapsterHelpers;if(!t.full_page){jQuery(o).height(t.height+t.height_units);jQuery(o).width(t.width+t.width_units);a.setMapBreakpointSizes(e,t)}if(t.full_page){jQuery(o).height(window.innerHeight+t.height_units);jQuery(o).width("100%")}if(t.full_page&&t.ignore_container)if(t.map_only){let e=jQuery(".mapster-wp-maps-container").clone();jQuery("html").attr("style","margin-top : 0px !important; overflow-y: hidden;");jQuery("body").children().each((function(){jQuery(this).is("script")||jQuery(this).is("style")||jQuery(this).hide()}));jQuery("body").prepend(e)}else{jQuery(`<div id="margin-compensator" style="padding-bottom: ${window.innerHeight}px"></div>`).insertAfter(o);jQuery(o).css("marginLeft",-1*jQuery(o).offset().left+"px");jQuery(o).width(window.innerWidth+"px");jQuery(o).css("position","absolute")}}setMapMoveEndVariables({map:e}){jQuery('.acf-field[data-name="manual_pitch"]').find(".acf-label label").html(`Manual Pitch <i>(currently: ${e.getPitch()})</i>`);jQuery('.acf-field[data-name="manual_zoom"]').find(".acf-label label").html(`Manual Zoom <i>(currently: ${e.getZoom()})</i>`);jQuery('.acf-field[data-name="manual_rotation"]').find(".acf-label label").html(`Manual Rotation <i>(currently: ${e.getBearing()})</i>`);const{lng:t,lat:o}=e.getCenter();jQuery('.acf-field[data-name="manual_latitude"]').find(".acf-label label").html(`Manual Latitude <i>(currently: ${o})</i>`);jQuery('.acf-field[data-name="manual_longitude"]').find(".acf-label label").html(`Manual Longitude <i>(currently: ${t})</i>`)}setDefaultAccessToken(){""===jQuery('.acf-field[data-name="access_token"]').find(":input").val()&&jQuery('.acf-field[data-name="access_token"]').find(":input").val(window.mapster_params.mapbox_access_token)}setMapType({map_type:e}){if("mapbox"!==e.map_provider){""!==e.access_token&&(maplibregl.accessToken=e.access_token);return maplibregl}if(""!==e.access_token){mapboxgl.accessToken=e.access_token;return mapboxgl}window.alert(window.mapster_params.strings["Mapbox Token Warning"])}setSubmissionModal({post_id:e,map:t,mapLibrary:o,submission:a}){const r=new MapsterHelpers;jQuery(document).on("click",`#mapster-submit-${e}`,(function(){const s=jQuery(this).data("type"),i=jQuery(this).data("header");jQuery(`.mapster-submit-${e} .mapster-submission-modal-title`).text(i);jQuery(`.mapster-submit-${e} #mapster-submission-modal-overlay-${e}`).parent().detach().appendTo("body");jQuery(`.mapster-submit-${e} #mapster-submission-modal-${e}`).parent().detach().appendTo("body");a.submission_interface.categories.length>0?fetch(`${window.mapster_params.rest_url}mapster-wp-maps/submission-info${window.mapster_params.qd}categories=${a.submission_interface.categories.join(",")}`).then((e=>e.json())).then((i=>{r.loadModalSteps(e,t,o,s,i,a)})):r.loadModalSteps(e,t,o,s,!1,a)}));jQuery(document).on("click",".mapster-submission-modal-close",(function(){jQuery(".mapster-submission-modal-overlay").fadeOut(50);jQuery(".mapster-submission-modal").fadeOut(100)}))}setMap({post_id:e,mapLibrary:t,map:o,locations:a,lines:r,polygons:s}){var i="mapster-wp-maps-"+e;const n=new MapsterHelpers;let l=!0,p="manual"===o.view.initial_load?[parseFloat(o.view.manual_longitude),parseFloat(o.view.manual_latitude)]:n.getDefaultCenter();if(jQuery(`#${i}`).data("latitude")&&"null"!==jQuery(`#${i}`).data("latitude")&&jQuery(`#${i}`).data("longitude")&&"null"!==jQuery(`#${i}`).data("longitude")){p=[parseFloat(jQuery(`#${i}`).data("longitude")),parseFloat(jQuery(`#${i}`).data("latitude"))];l=!1}let c="manual"===o.view.initial_load?parseFloat(o.view.manual_zoom):n.getDefaultZoom();if(jQuery(`#${i}`).data("zoom")&&"null"!==jQuery(`#${i}`).data("zoom")){c=parseFloat(jQuery(`#${i}`).data("zoom"));l=!1}const d={renderWorldCopies:o.layout.duplicate_horizontally,style:n.getStyle(o.map_type),container:i,fitBoundsOptions:{padding:20,maxZoom:18},cooperativeGestures:o.cooperative_gestures,projection:{name:o.map_type.projection?o.map_type.projection:"mercator",center:[0,30],parallels:[30,30]},bounds:"fit-features"===o.view.initial_load&&l?n.getMapBounds(a,r,s):null,center:p,zoom:c,preserveDrawingBuffer:!!o.print_control&&o.print_control.enable,pitch:o.view.manual_pitch?parseFloat(o.view.manual_pitch):0,bearing:o.view.manual_rotation?parseFloat(o.view.manual_rotation):0,attributionControl:!1,logoPosition:o.logo_control?o.logo_control.position:"bottom-left"};let m=n.getLighting(o.map_type);m&&(d.config={basemap:{lightPreset:m}});if("1"===window.mapster_params.activated){if(o.restricted_movement.restrict_movement){let e=o.restricted_movement.allowed_bounds.southwest_longitude,t=o.restricted_movement.allowed_bounds.southwest_latitude,a=o.restricted_movement.allowed_bounds.northeast_longitude,r=o.restricted_movement.allowed_bounds.northeast_latitude;if(""!==e&&""!==t&&""!==a&&""!==r){let o=[[parseFloat(e),parseFloat(t)],[parseFloat(a),parseFloat(r)]];d.maxBounds=o}let s=o.restricted_movement.allowed_zoom.min_zoom;""!==s&&(d.minZoom=parseFloat(s));let i=o.restricted_movement.allowed_zoom.max_zoom;""!==i&&(d.maxZoom=parseFloat(i))}o.map_type.map_language&&(d.language=o.map_type.map_language);o.view.padding_around_bounds&&0!==o.view.padding_around_bounds&&(d.fitBoundsOptions.padding=parseInt(o.view.padding_around_bounds))}const u=new t.Map(d);o.map_type.custom_style_json&&""!==o.map_type.custom_style_json&&u.setStyle(JSON.parse(o.map_type.custom_style_json));"custom-image"===o.map_type.map_provider&&n.setCustomImageMap(u,o.map_type);o.map_compare&&o.map_compare.enable_map_slider&&o.map_compare.compared_map&&n.setMapCompare(t,u,e,o.map_compare);if(o.load_3d_model_libraries&&window.Threebox){window.tb=new window.Threebox(u,u.getCanvas().getContext("webgl"),{defaultLights:!0,enableSelectingObjects:!0})}window[`mapsterMap${e}`]=u;n.setProjectionGlobe(u,o.map_type);jQuery(".mapster-wp-maps-loader-container").hide();return u}setLoader({post_id:e,loading:t}){const o=new MapsterConstants;jQuery("#mapster-wp-maps-"+e).append(o.loaderHTML(t))}setLoaderDone({post_id:e}){jQuery("#mapster-wp-maps-"+e+" .mapster-map-loader").fadeOut()}setMapResize({map:e}){e.resize()}setStreetViewControl(){}setMapTypeControl(){}setZoomControl({map:e,mapLibrary:t,controls:o,control_menu:a,zoom_control:r}){const s=new MapsterHelpers;return s.addMapControl(e,o.zoomControl,r.enable,r.position,!1,s.isInControlMenu(a,"zoom_control"),t.NavigationControl)}setAttributionControl({map:e,mapLibrary:t,controls:o,attribution_control:a,map_type:r}){if("mapbox"===r.map_provider){return(new MapsterHelpers).addMapControl(e,o.attributionControl,!0,a.position,!1,!1,t.AttributionControl)}}setControlOrder({control_order:e}){return!(!e||"1"!==window.mapster_params.activated)&&JSON.parse(e)}setControlMenu({map:e,mapLibrary:t,post_id:o,controls:a,control_menu:r}){
}setElevationControl({map:e,mapLibrary:t,controls:o,control_menu:a,elevation_line_chart:r,post_id:s,lines:i}){
}set3DControl(e){const{map:t,mapLibrary:o,control_menu:a,controls:r}=e,s=new MapsterHelpers;return s.addMapControl(t,r["3dControl"],e["3d_control"].enable,e["3d_control"].position,!1,s.isInControlMenu(a,"3d_control"),PitchToggle)}setScaleControl({map:e,mapLibrary:t,controls:o,control_menu:a,scale_control:r}){const s=new MapsterHelpers;return s.addMapControl(e,o.scaleControl,r.enable,r.position,!1,s.isInControlMenu(a,"scale_control"),t.ScaleControl)}setPrintControl({map:e,mapLibrary:t,controls:o,control_menu:a,print_control:r}){const s=new MapsterHelpers;return!!r&&s.addMapControl(e,o.printControl,r.enable,r.position,!1,s.isInControlMenu(a,"print_control"),PrintControl)}setGeolocationControl({map:e,mapLibrary:t,controls:o,control_menu:a,geolocation_control:r}){const s=new MapsterHelpers,i={showAccuracyCircle:r.show_accuracy_circle,showUserHeading:r.show_user_heading,trackUserLocation:r.show_user_heading||r.track_user_location};"1"===window.mapster_params.activated&&r.enable_high_accuracy&&(i.positionOptions={enableHighAccuracy:!0,maximumAge:0,timeout:5e3});const n=s.addMapControl(e,o.geolocationControl,r.enable,r.position,!1,s.isInControlMenu(a,"geolocation_control"),t.GeolocateControl,i);s.setGeolocationOnLoad(r);return n}setFullscreenControl({map:e,mapLibrary:t,controls:o,control_menu:a,fullscreen_control:r}){const s=new MapsterHelpers;return s.addMapControl(e,o.fullscreenControl,r.enable,r.position,!1,s.isInControlMenu(a,"fullscreen_control"),t.FullscreenControl)}setGeocoderControl({map:e,mapLibrary:t,controls:o,control_menu:a,geocoder_control:r}){const s=new MapsterHelpers;if("undefined"!=typeof MapboxGeocoder){var i={accessToken:t.accessToken,mapboxgl:t,placeholder:r.placeholder};""!==r.limit_results&&(i.countries=r.limit_results);r.marker_color&&""!==r.marker_color&&(i.marker={color:r.marker_color});if(r.accept_latlngs){
}if(r.limit_by_bounds&&"1"===window.mapster_params.activated){let e=r.bounds_limit.southwest_longitude,t=r.bounds_limit.southwest_latitude,o=r.bounds_limit.northeast_longitude,a=r.bounds_limit.northeast_latitude;if(""!==e&&""!==t&&""!==o&&""!==a){let r=[parseFloat(e),parseFloat(t),parseFloat(o),parseFloat(a)];i.bbox=r}}return s.addMapControl(e,o.geocoderControl,r.enable,r.position,!1,s.isInControlMenu(a,"geocoder_control"),MapboxGeocoder,i)}}setDirectionsControl({map:e,mapLibrary:t,controls:o,control_menu:a,directions_control:r}){if("undefined"!=typeof MapboxDirections){const i=new MapsterHelpers;var s={accessToken:t.accessToken,mapboxgl:t,unit:r.unit,profile:r.profile,interactive:!1,placeholderOrigin:r.placeholderOrigin};return i.addMapControl(e,o.directionsControl,r.enable,r.position,!1,i.isInControlMenu(a,"directions_control"),MapboxDirections,s)}}setSearchBoxControl({map:e,mapLibrary:t,controls:o,control_menu:a,searchbox_control:r,post_id:s}){const i=new MapsterHelpers;if(r&&"undefined"!=typeof MapsterSearchBoxControl){const n={post_id:s,mapLibrary:t,accessToken:t.accessToken,position:r.position};return i.addMapControl(e,o.searchBoxControl,r.enable,r.position,!1,i.isInControlMenu(a,"searchbox_control"),MapsterSearchBoxControl,n)}}setCustomSearchFilterControl({map:e,mapLibrary:t,controls:o,control_menu:a,custom_search_filter:r,locations:s,lines:i,polygons:n,markers:l}){const p=new MapsterHelpers;if("undefined"!=typeof MapboxGeocoder){var c={mapboxgl:t,marker:!1,flyTo:!1,placeholder:r.placeholder};r.include_geocoder?c.accessToken=t.accessToken:c.localGeocoderOnly=!0;""!==r.limit_results&&(c.countries=r.limit_results);if(r.limit_by_bounds&&"1"===window.mapster_params.activated){let e=r.bounds_limit.southwest_longitude,t=r.bounds_limit.southwest_latitude,o=r.bounds_limit.northeast_longitude,a=r.bounds_limit.northeast_latitude;if(""!==e&&""!==t&&""!==o&&""!==a){let r=[parseFloat(e),parseFloat(t),parseFloat(o),parseFloat(a)];c.bbox=r}}(c=p.applyProSearchFilter(r,c)).localGeocoder=e=>p.searchLocalFeatures(r.search_type,e,s,i,n);const d=p.addMapControl(e,o.customSearchControl,r.enable,r.position,!1,p.isInControlMenu(a,"custom_search_filter"),MapboxGeocoder,c);if(d){d.on("result",(({result:o})=>{const a=l.find((e=>e.mapsterProperties.id===o.id)),r=s.find((e=>e.id===o.id));let i={};o.bbox?i={bounds:o.bbox}:o.center&&(i={center:o.center});"1"===window.mapster_params.activated&&(a&&a.mapsterProperties.data.default_zoom_level?i.zoom=a.mapsterProperties.data.default_zoom_level:r&&r.data.default_zoom_level&&(i.zoom=r.data.default_zoom_level));i.bounds?e.fitBounds(i.bounds):e.flyTo(i);var n=document.createElement("div");n.innerHTML=o.place_name;jQuery(d._inputEl).val(n.innerHTML);a&&a.mapsterProperties.data.enable_popup&&a.setPopup(new t.Popup(p.returnPopupOptions(a.mapsterProperties.data)).setHTML(p.getPopupHTML(a.mapsterProperties.id,a.mapsterProperties.data))).togglePopup()}));return d}}}setFilterDropdownControl({map:e,mapLibrary:t,controls:o,control_menu:a,filter_dropdown:r,locations:s,lines:i,polygons:n,markers:l}){const p=new MapsterHelpers;if("undefined"!=typeof MapboxGeocoder){var c={mapboxgl:t,localGeocoderOnly:!0,marker:!1,placeholder:r.placeholder,minLength:0,limit:1e3,flyTo:!1,localGeocoder:e=>p.searchLocalFeatures("exact-match",e,s,i,n,r.display_images)};const d=p.addMapControl(e,o.filterDropdownControl,r.enable,r.position,!1,p.isInControlMenu(a,"filter_dropdown"),MapboxGeocoder,c);if(d){r.enable&&p.modifyDropdown(d,s);d.on("result",(t=>{const o=l.find((e=>e.mapsterProperties.id===t.result.id)),a=s.find((e=>e.id===t.result.id));let r={};t.result.bbox?r={bounds:t.result.bbox}:t.result.center&&(r={center:t.result.center});"1"===window.mapster_params.activated&&(o&&o.mapsterProperties.data.default_zoom_level?r.zoom=o.mapsterProperties.data.default_zoom_level:a&&a.data.default_zoom_level&&(r.zoom=a.data.default_zoom_level));e.flyTo(r);if(o&&o.mapsterProperties.data.enable_popup){if("click"===o.mapsterProperties.data.interaction)o.getElement().click();else if("hover"===o.mapsterProperties.data.interaction){const e=new Event("mouseenter");o.getElement().dispatchEvent(e)}}else a&&a.data.enable_popup}))}return d}}setCategoryFilterControl({map:e,mapLibrary:t,post_id:o,controls:a,control_menu:r,cluster_options:s,category_filter:i,markers:n,dataLayers:l,locations:p,lines:c,polygons:d,map_provider:m,label_icon_clustering:u,circle_clustering:_,marker_clustering:h}){const f=new MapsterHelpers,g={post_id:o,functionality:i.functionality,independent_children:i.independent_children,initial_visibility:i.initial_visibility,category_order:i.category_order,category_display:i.category_display,checkbox_display:i.checkbox_display,reset_button:i.reset_button,pre_selected_categories:i.pre_selected_categories,additional_filters:i.additional_filters,accordion_layout:i.accordion_layout,excluded_categories:i.excluded_categories,show_number_of_features:i.show_number_of_features,cluster_options:s,markers:n,dataLayers:l,locations:p,lines:c,polygons:d,map_provider:m,circle_clustering:_,label_icon_clustering:u,marker_clustering:h};return f.addMapControl(e,a.categoryFilterControl,i.enable,i.position,i.render_in_external_div,f.isInControlMenu(r,"category_filter"),CategoryControl,g)}setListControl({map:e,mapLibrary:t,post_id:o,controls:a,control_menu:r,list:s,locations:i,lines:n,polygons:l,markers:p}){const c=new MapsterHelpers,d={post_id:o,sort_by_distance:s.sort_by_distance,show_distance:s.show_distance,units:s.units,group_by_category:s.group_by_category,list_order:s.list_order,listing_type:s.listing_type,display_images:s.display_images,number_of_locations:s.number_of_locations,store_locator_options:s.store_locator_options,locations:i,lines:n,polygons:l,markers:p,mapLibrary:t};return c.addMapControl(e,a.listControl,s.enable,s.position,s.render_in_external_div,c.isInControlMenu(r,"list"),ListControl,d)}setDownloadControl({map:e,mapLibrary:t,post_id:o,controls:a,control_menu:r,download_control:s,locations:i,lines:n,polygons:l}){
}setCustomHTMLControl({map:e,mapLibrary:t,controls:o,control_menu:a,custom_html_control:r}){
}setLayerControl({map:e,mapLibrary:t,post_id:o,controls:a,control_menu:r,layer_control:s}){
}setStyleControl({map:e,mapLibrary:t,post_id:o,controls:a,control_menu:r,style_control:s,map_type:i}){
}autoAnimateGlobe({map:e,globe_animation:t,globe_animation_speed:o,globe_animation_direction:a}){
}setListingPosts({post_id:e,map:t,listing_page:o,locations:a,lines:r,polygons:s}){
}setJqueryEvents(){
}}class MapsterContainer{constructor(e,t,o,a){this.core={};this.MapsterMap=a;this.post_id=e;this.single_feature_id=t;this.feature_ids=o;this.postResponse;this.mapLibrary;this.markers=[];this.controls=[];this.clusterLayers=[];this.clickedEvent;this.clickedFeature;this.clickedPopup;this.clickedMarker;this.hoveredEvent;this.hoveredFeature;this.hoveredPopup;this.hoveredMarker;this.tempHoverMarker;this.map;this.postResponseAdmin;this.adminFeatures;this.controlOrder;this.dataLayers;this.defineCore()}defineCore(){const e=new MapsterCore;this.core.set_accesstokendefault={args:[],hook:"access_token_set",func:e.setDefaultAccessToken};this.core.define_postResponse={args:["post_id","single_feature_id","feature_ids"],hook:"data_fetched",func:e.getPostData,promise:!0};this.core.set_mapSize={args:["post_id","postResponse.map.layout"],hook:"map_size_set",func:e.setMapSize};this.core.define_mapLibrary={args:["postResponse.map.map_type"],hook:"map_library_set",func:e.setMapType};this.core.set_submissionModal={args:["post_id","map","mapLibrary","postResponse.map.submission"],hook:"submission_modal_initialized",func:e.setSubmissionModal};this.core.define_map={args:["post_id","mapLibrary","postResponse.map","postResponse.locations","postResponse.lines","postResponse.polygons"],hook:"map_set",func:e.setMap};this.core.set_moveendVariables={args:["map"],hook:"map_moveend",func:e.setMapMoveEndVariables};this.core.set_jquery_events={args:[],hook:"jquery_events_set",func:e.setJqueryEvents};this.core.set_loader={args:["post_id","postResponse.map.loading"],hook:"loading_icon_started",func:e.setLoader};this.core.set_loaderdone={args:["post_id"],hook:"loading_icon_done",func:e.setLoaderDone};this.core.set_mapresize={args:["map"],hook:"map_resize_set",func:e.setMapResize};this.core.set_ipload={args:["map","postResponse.map.view"],hook:"map_set_ip_on_load",func:e.setIPLocation};this.core.set_querystringLoad={args:["post_id","map","markers","postResponse.locations"],hook:"check_querystring",func:e.checkQuerystring};this.core.set_listingposts={args:["post_id","map","postResponse.map.listing_page","postResponse.locations","postResponse.lines","postResponse.polygons"],hook:"map_set_listing_posts",func:e.setListingPosts};this.core.define_dataLayers={args:["map","postResponse.map.map_type.map_provider","dataLayers","postResponse.locations","postResponse.lines","postResponse.polygons"],hook:"map_datalayers_set",func:e.setDataLayers,callback:this.MapsterMap.setDataLayerEvents};this.core.set_mapfeatures={args:["map","postResponse.map.map_type.map_provider","postResponse.locations","postResponse.lines","postResponse.polygons"],hook:"map_features_set",func:e.setFeaturesToMap,callback:this.MapsterMap.setLayerEvents};this.core.define_markers={args:["map","markers","mapLibrary","postResponse.locations","postResponse.map.marker_clustering"],hook:"map_markers_set",func:e.setMarkersToMap,callback:this.MapsterMap.setMarkerEvents};this.core.set_heatmap={args:["map","markers","postResponse.locations","postResponse.map.heatmap"],hook:"map_heatmap_set",func:e.setHeatmap};this.core.define_controlOrder={args:["postResponse.map.control_order"],hook:"control_order_set",func:e.setControlOrder};this.core["define_controls.controlMenu"]={args:["map","mapLibrary","post_id","controls","postResponse.map.control_menu"],hook:"control_menu_set",func:e.setControlMenu};this.core["define_controls.elevationControl"]={args:["map","mapLibrary","post_id","controls","postResponse.map.control_menu","postResponse.map.elevation_line_chart","post_id","postResponse.lines"],hook:"elevation_control_set",func:e.setElevationControl};this.core["define_controls.zoomControl"]={args:["map","mapLibrary","controls","postResponse.map.control_menu","postResponse.map.zoom_control"],hook:"zoom_control_set",func:e.setZoomControl};this.core["define_controls.attributionControl"]={args:["map","mapLibrary","controls","postResponse.map.attribution_control","postResponse.map.map_type"],hook:"attribution_control_set",func:e.setAttributionControl};this.core["define_controls.streetViewControl"]={args:["map","mapLibrary","controls","postResponse.map.street_view_control"],hook:"street_view_control_set",func:e.setStreetViewControl};this.core["define_controls.mapTypeControl"]={args:["map","mapLibrary","controls","postResponse.map.map_type_control"],hook:"map_type_control_set",func:e.setMapTypeControl};this.core["define_controls.geocoderControl"]={args:["map","mapLibrary","controls","postResponse.map.control_menu","postResponse.map.geocoder_control"],hook:"geocoder_control_set",func:e.setGeocoderControl};this.core["define_controls.searchBoxControl"]={args:["map","mapLibrary","post_id","controls","postResponse.map.control_menu","postResponse.map.searchbox_control"],hook:"geocoder_control_set",func:e.setSearchBoxControl};this.core["define_controls.directionsControl"]={args:["map","mapLibrary","controls","postResponse.map.control_menu","postResponse.map.directions_control"],hook:"directions_control_set",func:e.setDirectionsControl};this.core["define_controls.3dControl"]={args:["map","mapLibrary","controls","postResponse.map.control_menu","postResponse.map.3d_control"],hook:"3d_control_set",func:e.set3DControl};this.core["define_controls.scaleControl"]={args:["map","mapLibrary","controls","postResponse.map.control_menu","postResponse.map.scale_control"],hook:"scale_control_set",func:e.setScaleControl};this.core["define_controls.printControl"]={args:["map","mapLibrary","controls","postResponse.map.control_menu","postResponse.map.print_control"],hook:"print_control_set",func:e.setPrintControl};this.core["define_controls.geolocationControl"]={args:["map","mapLibrary","controls","postResponse.map.control_menu","postResponse.map.geolocation_control"],hook:"geolocation_control_set",func:e.setGeolocationControl};this.core["define_controls.fullscreenControl"]={args:["map","mapLibrary","controls","postResponse.map.control_menu","postResponse.map.fullscreen_control"],hook:"fullscreen_control_set",func:e.setFullscreenControl};this.core["define_controls.downloadControl"]={args:["map","mapLibrary","post_id","controls","postResponse.map.control_menu","postResponse.map.download_control","postResponse.locations","postResponse.lines","postResponse.polygons"],hook:"download_control_set",func:e.setDownloadControl};this.core["define_controls.customHTMLControl"]={args:["map","mapLibrary","controls","postResponse.map.control_menu","postResponse.map.custom_html_control"],hook:"custom_html_control_set",func:e.setCustomHTMLControl};this.core["define_controls.layerControl"]={args:["map","mapLibrary","post_id","controls","postResponse.map.control_menu","postResponse.map.layer_control"],hook:"layer_control_set",func:e.setLayerControl};this.core["define_controls.styleControl"]={args:["map","mapLibrary","post_id","controls","postResponse.map.control_menu","postResponse.map.style_control","postResponse.map.map_type"],hook:"style_control_set",func:e.setStyleControl};this.core["define_controls.customSearchControl"]={args:["map","mapLibrary","controls","postResponse.map.control_menu","postResponse.map.filter.custom_search_filter","postResponse.locations","postResponse.lines","postResponse.polygons","markers"],hook:"customSearch_control_set",func:e.setCustomSearchFilterControl};this.core["define_controls.filterDropdownControl"]={args:["map","mapLibrary","controls","postResponse.map.control_menu","postResponse.map.filter.filter_dropdown","postResponse.locations","postResponse.lines","postResponse.polygons","markers"],hook:"filterDropdown_control_set",func:e.setFilterDropdownControl};this.core["define_controls.categoryFilterControl"]={args:["map","mapLibrary","post_id","controls","postResponse.map.control_menu","postResponse.map.cluster_options","postResponse.map.filter.category_filter","markers","dataLayers","postResponse.locations","postResponse.lines","postResponse.polygons","postResponse.map.map_type.map_provider","postResponse.map.circle_clustering","postResponse.map.label_icon_clustering","postResponse.map.marker_clustering"],hook:"categoryFilter_control_set",func:e.setCategoryFilterControl};this.core["define_controls.listControl"]={args:["map","mapLibrary","post_id","controls","postResponse.map.control_menu","postResponse.map.list","postResponse.locations","postResponse.lines","postResponse.polygons","markers"],hook:"list_control_set",func:e.setListControl};this.core.set_autoanimate={args:["map","postResponse.map.view.globe_animation","postResponse.map.view.globe_animation_speed","postResponse.map.view.globe_animation_direction"],hook:"globe_autoanimate_set",func:e.autoAnimateGlobe};this.core.define_clusterLayers={args:["map","postResponse.map.map_type.map_provider","postResponse.map.cluster_options","postResponse.map.circle_clustering","postResponse.map.label_icon_clustering","postResponse.map.marker_clustering","markers","postResponse.locations","postResponse.lines","postResponse.polygons"],hook:"map_clustering_set",func:e.doClustering,callback:this.MapsterMap.setDynamicLayerEvents};this.core.set_customscripts={args:["map","postResponse.map.javascript","postResponse.locations","postResponse.lines","postResponse.polygons"],hook:"custom_scripts_set",func:e.loadCustomScripts};this.core.set_interactivity={args:["map","postResponse.map.zoom_on_scroll","postResponse.map.interactivity","postResponse.map.allow_rotation_and_pitch"],hook:"interactivity_set",func:e.setInteractivity};this.core.set_mapstyle={args:["map","postResponse.map.map_type"],hook:"map_style_set",func:e.setMapStyle,callback:this.MapsterMap.idleReload};this.core.set_lighting={args:["map","postResponse.map.map_type"],hook:"map_lighting_set",func:e.setLighting};this.core.set_terrain={args:["map","postResponse.map.map_type.map_provider","postResponse.map.map_type.terrain"],hook:"map_terrain_set",func:e.loadTerrain};this.core.set_buildings3d={args:["map","postResponse.map.map_type.map_provider","postResponse.map.map_type.buildings_3d"],hook:"map_buildings3d_set",func:e.loadBuildings3D};this.core.set_projection={args:["map","postResponse.map.map_type.map_provider","postResponse.map.map_type.projection"],hook:"map_projection_set",func:e.loadProjection};this.core.define_clickedFeature={args:["map","postResponse.map.interactivity","postResponse.map.clicking_disabled","clickedEvent","postResponse.locations","postResponse.lines","postResponse.polygons"],hook:"layer_feature_clicked",func:e.layerClick};this.core.set_storelocatorclick={args:["clickedFeature","postResponse.map.list.store_locator_options"],hook:"",func:e.storeLocatorClick};this.core.set_sidebarclick={args:["post_id","clickedFeature","postResponse.map.minimum_sidebar_width","postResponse.map.maximum_sidebar_width","postResponse.map.list.store_locator_options","postResponse.map.open_popups_in_sidebar"],hook:"",func:e.sidebarClick};this.core.define_clickedPopup={args:["map","mapLibrary","clickedPopup","clickedFeature","clickedEvent","postResponse.map.list.store_locator_options","postResponse.map.open_popups_in_sidebar"],hook:"popup_opened_from_layer_click",func:e.popupClick};this.core.define_hoveredFeature={args:["map","postResponse.map.interactivity","postResponse.map.clicking_disabled","hoveredEvent","postResponse.locations","postResponse.lines","postResponse.polygons"],hook:"layer_feature_hovered",func:e.layerHover};this.core.set_hoverEffects={args:["map","postResponse.map.interactivity","postResponse.map.clicking_disabled","hoveredFeature","dataLayers"],hook:"",func:e.layerHoverEffect};this.core.define_hoveredPopup={args:["map","mapLibrary","hoveredPopup","hoveredFeature","hoveredEvent","postResponse.map.list.store_locator_options","postResponse.map.open_popups_in_sidebar"],hook:"popup_opened_from_layer_hover",func:e.popupHover};this.core.set_hoverEffectsOff={args:["map","postResponse.map.interactivity","postResponse.map.clicking_disabled","hoveredFeature","dataLayers"],hook:"",func:e.layerHoverEffectOff};this.core.set_hoveredPopupOff={args:["hoveredFeature","hoveredPopup"],hook:"popup_closed_from_layer_hover",func:e.removePopupHover};this.core.set_externallink={args:["clickedFeature"],hook:"external_link_opened",func:e.externalClickLayer};this.core.define_clickedFeature_fromMarker={args:["clickedMarker","postResponse.map.interactivity","postResponse.map.clicking_disabled"],hook:"marker_feature_clicked",func:e.markerClick};this.core.define_hoveredFeature_fromMarker={args:["hoveredMarker","postResponse.map.interactivity","postResponse.map.clicking_disabled"],hook:"marker_feature_hovered",func:e.markerHover};this.core.define_tempHoverMarker={args:["map","mapLibrary","postResponse.map.interactivity","postResponse.map.clicking_disabled","hoveredMarker"],hook:"",func:e.markerHoverEffect};this.core.define_clickedPopup_fromMarker={args:["map","mapLibrary","clickedMarker","clickedFeature","clickedPopup","postResponse.map.list.store_locator_options","postResponse.map.open_popups_in_sidebar"],hook:"popup_opened_from_marker_click",func:e.openMarkerClickPopup};this.core.define_hoveredPopup_fromMarker={args:["map","mapLibrary","hoveredMarker","hoveredFeature","hoveredPopup","postResponse.map.list.store_locator_options","postResponse.map.open_popups_in_sidebar"],hook:"popup_opened_from_marker_hover",func:e.openMarkerHoverPopup};this.core.set_hoverEffectsOff_fromMarker={args:["tempHoverMarker","hoveredMarker"],hook:"",func:e.markerHoverEffectOff};this.core.set_hoveredPopupOff_fromMarker={args:["hoveredMarker","hoveredFeature","hoveredPopup"],hook:"popup_closed_from_marker_hover",func:e.removeMarkerHoverPopup};this.core.define_adminFeatures={args:["postResponseAdmin.locations_ids","postResponseAdmin.lines_ids","postResponseAdmin.polygons_ids","postResponse.cats"],hook:"",func:e.getFeaturesAdmin,promise:!0};this.core["define_postResponse.locations"]={args:["adminFeatures"],hook:"locations_fetched",func:e.sortLocations};this.core["define_postResponse.lines"]={args:["adminFeatures"],hook:"lines_fetched",func:e.sortLines};this.core["define_postResponse.polygons"]={args:["adminFeatures"],hook:"polygons_fetched",func:e.sortPolygons}}doCore(e){let t=this.core[e].args,o=this.core[e].func,a={};for(var r=0;r<t.length;r++){let e=t[r].split(".");a[e[e.length-1]]=this.getObjectProperty(this,t[r])}if(this.core[e].promise)return Promise.resolve(o(a)).then((t=>{this.defineThisObject(e,t);this.core[e].callback&&this.core[e].callback(this,this.MapsterMap);this.core[e].hook&&this.MapsterMap.runHookActions(e,t)}));{const t=o(a);this.defineThisObject(e,t);this.core[e].callback&&this.core[e].callback(this,this.MapsterMap);this.core[e].hook&&this.MapsterMap.runHookActions(e,t);return t}}registerListener(e,t,o,a){this.setStarterValue(e,t,o);jQuery(document).on("change","select"!==t?e:e.replace("select",":input"),(()=>{"check"===t&&this.setObjectProperty(this,o,jQuery(e).is(":checked"));"val"===t&&this.setObjectProperty(this,o,jQuery(e).val());"select"===t&&this.setObjectProperty(this,o,jQuery(e).select2("data").map((e=>e.id)));if(a&&a.length>0)for(var r=0;r<a.length;r++){if(this.core[a[r]].promise){this.MapsterMap.doCoreAndRunActions(a[r]).then((()=>{for(var e=r+1;e<a.length;e++)this.MapsterMap.doCoreAndRunActions(a[e])}));break}this.MapsterMap.doCoreAndRunActions(a[r])}}))}setStarterValue(e,t,o){"check"===t&&this.setObjectProperty(this,o,jQuery(e).is(":checked"));"val"===t&&this.setObjectProperty(this,o,jQuery(e).val());"img"===t&&this.setObjectProperty(this,o,jQuery(e).find("img").attr("src"));"select"===t&&this.setObjectProperty(this,o,jQuery(e).select2("data").map((e=>e.id)))}defineThisObject(e,t){e.indexOf("define_")>-1&&this.setObjectProperty(this,e.split("_")[1],t)}getObjectProperty(e,t){return t.split(".").reduce(((e,t)=>e?.[t]),e)}setObjectProperty(e,t,o){t.split(".").reduce(((e,a)=>{a===t.split(".")[t.split(".").length-1]&&(e[a]=o);void 0===e[a]&&(a===t.split(".")[t.split(".").length-1]?e[a]="":e[a]={});return e?.[a]}),e)}getControlOrder(){return this.controlOrder}}class MapsterMap{constructor(e,t,o,a){this.MapsterContainer=new MapsterContainer(e,o,a,this);this.post_id=e;this.isPublic=t;this.dynamicLayerListenersSet=!1;this.isPublic||this.registerAdminEventListeners()}preInitMap(){return this.isPublic?this.doCoreAndRunActions("define_postResponse"):this.doCoreAndRunActions("define_adminFeatures")}init(){this.preInitMap().then((()=>{if(!this.isPublic){this.doCoreAndRunActions("set_accesstokendefault");this.doCoreAndRunActions("define_postResponse.locations");this.doCoreAndRunActions("define_postResponse.lines");this.doCoreAndRunActions("define_postResponse.polygons")}this.initMap();this.MapsterContainer.map.on("load",(()=>{this.postLoad();this.setMoveEvents(this.MapsterContainer.map)}));this.MapsterContainer.map.on("mapster_custom_style_load",(()=>{this.postStyleSwitch(this.MapsterContainer,this)}))}))}initMap(){this.isPublic&&this.doCoreAndRunActions("set_mapSize");this.doCoreAndRunActions("define_mapLibrary");this.doCoreAndRunActions("define_map");this.doCoreAndRunActions("set_jquery_events");this.doCoreAndRunActions("set_loader");if(this.isPublic){this.doCoreAndRunActions("set_submissionModal");this.doCoreAndRunActions("set_interactivity");this.doCoreAndRunActions("set_listingposts")}}postLoad(){this.doCoreAndRunActions("set_mapresize");this.doCoreAndRunActions("set_terrain");this.doCoreAndRunActions("set_buildings3d");this.doCoreAndRunActions("set_mapfeatures");this.doCoreAndRunActions("define_dataLayers");this.doCoreAndRunActions("define_markers");this.doCoreAndRunActions("set_heatmap");this.doCoreAndRunActions("set_autoanimate");this.setControls();if(this.isPublic){this.doCoreAndRunActions("set_ipload");this.doCoreAndRunActions("define_clusterLayers");this.doCoreAndRunActions("set_querystringLoad")}this.doCoreAndRunActions("set_loaderdone");this.doCoreAndRunActions("set_customscripts")}setControls(){this.doCoreAndRunActions("define_controlOrder");this.doCoreAndRunActions("define_controls.controlMenu");let e=this.getControlOrder(),t=[],o=[{slug:"zoom_control",function:"zoomControl"},{slug:"map_type_control",function:"mapTypeControl"},{slug:"street_view_control",function:"streetViewControl"},{slug:"attribution_control",function:"attributionControl"},{slug:"geocoder_control",function:"geocoderControl"},{slug:"searchbox_control",function:"searchBoxControl"},{slug:"directions_control",function:"directionsControl"},{slug:"3d_control",function:"3dControl"},{slug:"scale_control",function:"scaleControl"},{slug:"print_control",function:"printControl"},{slug:"geolocation_control",function:"geolocationControl"},{slug:"fullscreen_control",function:"fullscreenControl"},{slug:"download_control",function:"downloadControl"},{slug:"custom_html_control",function:"customHTMLControl"},{slug:"layer_control",function:"layerControl"},{slug:"style_control",function:"styleControl"},{slug:"custom_search_filter",function:"customSearchControl"},{slug:"filter_dropdown",function:"filterDropdownControl"},{slug:"category_filter",function:"categoryFilterControl"},{slug:"elevation_line_chart",function:"elevationControl"},{slug:"list",function:"listControl"}];if(e){e.forEach((e=>{let a=o.find((t=>t.slug===e.slug));a&&t.push(a)}));o.forEach((e=>{t.find((t=>t.slug===e.slug))||t.push(e)}))}else t=o;t.forEach((e=>{this.doCoreAndRunActions(`define_controls.${e.function}`)}))}idleReload(e,t){e.map.once("idle",(()=>{t.doCoreAndRunActions("set_loader");t.doCoreAndRunActions("set_lighting");t.doCoreAndRunActions("set_terrain");t.doCoreAndRunActions("set_mapfeatures");t.doCoreAndRunActions("define_dataLayers");t.doCoreAndRunActions("define_markers");t.doCoreAndRunActions("define_clusterLayers");t.doCoreAndRunActions("set_loaderdone")}))}postStyleSwitch(e,t){e.map.once("idle",(()=>{t.doCoreAndRunActions("set_terrain");t.doCoreAndRunActions("set_mapfeatures");t.doCoreAndRunActions("define_dataLayers");t.doCoreAndRunActions("define_markers");t.doCoreAndRunActions("define_clusterLayers");t.doCoreAndRunActions("set_lighting")}))}setLayerEvents(e,t){["symbol","circle","line","fill"].forEach((o=>{e.map.on("click",o,(o=>{e.clickedEvent=o;t.doCoreAndRunActions("define_clickedFeature");t.doCoreAndRunActions("set_storelocatorclick");t.doCoreAndRunActions("set_sidebarclick");t.doCoreAndRunActions("set_externallink");t.doCoreAndRunActions("define_clickedPopup")}));e.map.on("mousemove",o,(o=>{e.hoveredEvent=o;t.doCoreAndRunActions("define_hoveredFeature");t.doCoreAndRunActions("set_hoverEffects");t.doCoreAndRunActions("define_hoveredPopup")}));e.map.on("mouseout",o,(e=>{t.doCoreAndRunActions("set_hoverEffectsOff");t.doCoreAndRunActions("set_hoveredPopupOff")}))}));e.map.on("custom_layer_click",(o=>{e.clickedEvent=o;t.doCoreAndRunActions("define_clickedFeature");t.doCoreAndRunActions("set_storelocatorclick");t.doCoreAndRunActions("set_sidebarclick");t.doCoreAndRunActions("set_externallink");t.doCoreAndRunActions("define_clickedPopup")}));e.map.on("custom_layer_mouseover",(o=>{e.hoveredEvent=o;t.doCoreAndRunActions("define_hoveredFeature");t.doCoreAndRunActions("set_hoverEffects");t.doCoreAndRunActions("define_hoveredPopup")}));e.map.on("custom_layer_mouseout",(e=>{t.doCoreAndRunActions("set_hoverEffectsOff");t.doCoreAndRunActions("set_hoveredPopupOff")}))}setDynamicLayerEvents(e,t){if(e.clusterLayers.length>0&&!this.dynamicLayerListenersSet){e.clusterLayers.forEach((o=>{if(o.indexOf("-")>-1){e.map.on("click",o,(o=>{e.clickedEvent=o;t.doCoreAndRunActions("define_clickedFeature");t.doCoreAndRunActions("set_storelocatorclick");t.doCoreAndRunActions("set_sidebarclick");t.doCoreAndRunActions("set_externallink");t.doCoreAndRunActions("define_clickedPopup")}));e.map.on("mousemove",o,(o=>{e.hoveredEvent=o;t.doCoreAndRunActions("define_hoveredFeature");t.doCoreAndRunActions("set_hoverEffects");t.doCoreAndRunActions("define_hoveredPopup")}));e.map.on("mouseout",o,(e=>{t.doCoreAndRunActions("set_hoverEffectsOff");t.doCoreAndRunActions("set_hoveredPopupOff")}))}}));this.dynamicLayerListenersSet=!0}}setDataLayerEvents(e,t){}setMarkerEvents(e,t){e.markers.forEach((o=>{o.getElement().addEventListener("click",(a=>{e.clickedMarker=o;t.doCoreAndRunActions("define_clickedFeature_fromMarker");t.doCoreAndRunActions("set_storelocatorclick");t.doCoreAndRunActions("set_sidebarclick");t.doCoreAndRunActions("set_externallink");t.doCoreAndRunActions("define_clickedPopup_fromMarker")}));o.getElement().addEventListener("mouseenter",(a=>{e.hoveredMarker=o;t.doCoreAndRunActions("define_hoveredFeature_fromMarker");t.doCoreAndRunActions("define_tempHoverMarker");t.doCoreAndRunActions("define_hoveredPopup_fromMarker")}));o.getElement().addEventListener("mouseleave",(e=>{t.doCoreAndRunActions("set_hoverEffectsOff_fromMarker");t.doCoreAndRunActions("set_hoveredPopupOff_fromMarker")}))}))}setMoveEvents(e){if(!this.isPublic){e.once("idle",(e=>{this.doCoreAndRunActions("set_moveendVariables")}));e.on("moveend",(e=>{this.doCoreAndRunActions("set_moveendVariables")}))}}getControlOrder(){return this.MapsterContainer.getControlOrder()}doCoreAndRunActions(e){return this.MapsterContainer.doCore(e)}runHookActions(e,t){if(window.mwm){let a=this.MapsterContainer.core[e].hook;const r=`${a}/mapster-${this.isPublic?this.post_id:"admin"}`;if(window.mwm.actions[r]){window.mwm.actions[r].funcs;if(window.mwm.actions[r].funcs.length>0)for(var o=0;o<window.mwm.actions[r].funcs.length;o++)window.mwm.actions[r].funcs[o].func(t)}if(window.mwm.actions[a]){window.mwm.actions[a].funcs;if(window.mwm.actions[a].funcs.length>0)for(o=0;o<window.mwm.actions[a].funcs.length;o++)window.mwm.actions[a].funcs[o].func(t)}}}registerAdminEventListeners(){this.MapsterContainer.registerListener('.acf-field[data-name="zoom_on_scroll"] :input',"check","postResponse.map.zoom_on_scroll");this.MapsterContainer.registerListener('.acf-field[data-name="interactivity"] :input',"check","postResponse.map.interactivity");this.MapsterContainer.registerListener('.acf-field[data-name="open_popups_in_sidebar"] :input',"check","postResponse.map.open_popups_in_sidebar");this.MapsterContainer.registerListener('.acf-field[data-name="restrict_movement"] :input',"check","postResponse.map.restricted_movement.restrict_movement");this.MapsterContainer.registerListener('.acf-field[data-name="southwest_longitude"] :input',"val","postResponse.map.restricted_movement.allowed_bounds.southwest_longitude");this.MapsterContainer.registerListener('.acf-field[data-name="southwest_latitude"] :input',"val","postResponse.map.restricted_movement.allowed_bounds.southwest_latitude");this.MapsterContainer.registerListener('.acf-field[data-name="northeast_longitude"] :input',"val","postResponse.map.restricted_movement.allowed_bounds.northeast_longitude");this.MapsterContainer.registerListener('.acf-field[data-name="northeast_latitude"] :input',"val","postResponse.map.restricted_movement.allowed_bounds.northeast_latitude");this.MapsterContainer.registerListener('.acf-field[data-name="min_zoom"] :input',"val","postResponse.map.restricted_movement.allowed_zoom.min_zoom");this.MapsterContainer.registerListener('.acf-field[data-name="max_zoom"] :input',"val","postResponse.map.restricted_movement.allowed_zoom.max_zoom");this.MapsterContainer.registerListener('.acf-field[data-name="control_order"] :input',"val","postResponse.map.control_order");this.MapsterContainer.registerListener('.acf-field[data-name="control_menu"] .acf-field[data-name="enable"] :input',"check","postResponse.map.control_menu.enable",["define_controls.controlMenu"]);this.MapsterContainer.registerListener('.acf-field[data-name="control_menu"] .acf-field[data-name="position"] :input',"val","postResponse.map.control_menu.position",["define_controls.controlMenu"]);this.MapsterContainer.registerListener('.acf-field[data-name="control_menu"] .acf-field[data-name="included_controls"] :input[type="text"]',"val","postResponse.map.control_menu.included_controls",["define_controls.controlMenu"]);this.MapsterContainer.registerListener('.acf-field[data-name="zoom_control"] .acf-field[data-name="enable"] :input',"check","postResponse.map.zoom_control.enable",["define_controls.zoomControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="zoom_control"] .acf-field[data-name="position"] :input',"val","postResponse.map.zoom_control.position",["define_controls.zoomControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="3d_control"] .acf-field[data-name="enable"] :input',"check","postResponse.map.3d_control.enable",["define_controls.3dControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="3d_control"] .acf-field[data-name="position"] :input',"val","postResponse.map.3d_control.position",["define_controls.3dControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="scale_control"] .acf-field[data-name="enable"] :input',"check","postResponse.map.scale_control.enable",["define_controls.scaleControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="scale_control"] .acf-field[data-name="position"] :input',"val","postResponse.map.scale_control.position",["define_controls.scaleControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="print_control"] .acf-field[data-name="enable"] :input',"check","postResponse.map.print_control.enable",["define_controls.printControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="print_control"] .acf-field[data-name="position"] :input',"val","postResponse.map.print_control.position",["define_controls.printControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="attribution_control"] .acf-field[data-name="position"] :input',"val","postResponse.map.attribution_control.position",["define_controls.attributionControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="geolocation_control"] .acf-field[data-name="enable"] :input',"check","postResponse.map.geolocation_control.enable",["define_controls.geolocationControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="geolocation_control"] .acf-field[data-name="position"] :input',"val","postResponse.map.geolocation_control.position",["define_controls.geolocationControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="geolocation_control"] .acf-field[data-name="set_on_load"] :input',"check","postResponse.map.geolocation_control.set_on_load",["define_controls.geolocationControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="fullscreen_control"] .acf-field[data-name="enable"] :input',"check","postResponse.map.fullscreen_control.enable",["define_controls.fullscreenControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="fullscreen_control"] .acf-field[data-name="position"] :input',"val","postResponse.map.fullscreen_control.position",["define_controls.fullscreenControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="street_view_control"] .acf-field[data-name="enable"] :input',"check","postResponse.map.street_view_control.enable",["define_controls.streetViewControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="street_view_control"] .acf-field[data-name="position"] :input',"val","postResponse.map.street_view_control.position",["define_controls.streetViewControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="map_type_control"] .acf-field[data-name="enable"] :input',"check","postResponse.map.map_type_control.enable",["define_controls.mapTypeControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="map_type_control"] .acf-field[data-name="position"] :input',"val","postResponse.map.map_type_control.position",["define_controls.mapTypeControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="download_control"] .acf-field[data-name="enable"] :input',"check","postResponse.map.download_control.enable",["define_controls.downloadControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="download_control"] .acf-field[data-name="position"] :input',"val","postResponse.map.download_control.position",["define_controls.downloadControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="download_control"] .acf-field[data-name="interact_with_filters"] :input',"check","postResponse.map.download_control.interact_with_filters",["define_controls.downloadControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="download_control"] .acf-field[data-name="notify_on_download"] :input',"val","postResponse.map.download_control.notify_on_download",["define_controls.downloadControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="custom_html_control"] .acf-field[data-name="enable"] :input',"check","postResponse.map.custom_html_control.enable",["define_controls.customHTMLControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="custom_html_control"] .acf-field[data-name="position"] :input',"val","postResponse.map.custom_html_control.position",["define_controls.customHTMLControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="custom_html_control"] .acf-field[data-name="custom_html"] :input',"val","postResponse.map.custom_html_control.custom_html",["define_controls.customHTMLControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="layer_control"] .acf-field[data-name="enable"] :input',"check","postResponse.map.layer_control.enable",["define_controls.layerControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="layer_control"] .acf-field[data-name="position"] :input',"val","postResponse.map.layer_control.position",["define_controls.layerControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="layer_control"] .acf-field[data-name="toggleable_layers"] :input',"val","postResponse.map.layer_control.toggleable_layers",["define_controls.layerControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="layer_control"] .acf-field[data-name="toggleable_layer_titles"] :input',"val","postResponse.map.layer_control.toggleable_layer_titles",["define_controls.layerControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="layer_control"] .acf-field[data-name="checkbox_type"] :input',"val","postResponse.map.layer_control.checkbox_type",["define_controls.layerControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="style_control"] .acf-field[data-name="enable"] :input',"check","postResponse.map.style_control.enable",["define_controls.styleControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="style_control"] .acf-field[data-name="position"] :input',"val","postResponse.map.style_control.position",["define_controls.styleControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="style_control"] .acf-field[data-name="toggleable_styles"] :input',"val","postResponse.map.style_control.toggleable_styles",["define_controls.styleControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="style_control"] .acf-field[data-name="toggleable_styles_titles"] :input',"val","postResponse.map.style_control.toggleable_styles_titles",["define_controls.styleControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="style_control"] .acf-field[data-name="initial_style_title"] :input',"val","postResponse.map.style_control.initial_style_title",["define_controls.styleControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="searchbox_control"] .acf-field[data-name="enable"] :input',"check","postResponse.map.searchbox_control.enable",["define_controls.searchBoxControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="searchbox_control"] .acf-field[data-name="position"] :input',"val","postResponse.map.searchbox_control.position",["define_controls.searchBoxControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="geocoder_control"] .acf-field[data-name="enable"] :input',"check","postResponse.map.geocoder_control.enable",["define_controls.geocoderControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="geocoder_control"] .acf-field[data-name="position"] :input',"val","postResponse.map.geocoder_control.position",["define_controls.geocoderControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="geocoder_control"] .acf-field[data-name="limit_results"] :input',"val","postResponse.map.geocoder_control.limit_results",["define_controls.geocoderControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="geocoder_control"] .acf-field[data-name="placeholder"] :input',"val","postResponse.map.geocoder_control.placeholder",["define_controls.geocoderControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="directions_control"] .acf-field[data-name="enable"] :input',"check","postResponse.map.directions_control.enable",["define_controls.directionsControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="directions_control"] .acf-field[data-name="position"] :input',"val","postResponse.map.directions_control.position",["define_controls.directionsControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="directions_control"] .acf-field[data-name="unit"] :input',"val","postResponse.map.directions_control.unit",["define_controls.directionsControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="directions_control"] .acf-field[data-name="profile"] :input',"val","postResponse.map.directions_control.profile",["define_controls.directionsControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="directions_control"] .acf-field[data-name="placeholderOrigin"] :input',"val","postResponse.map.directions_control.placeholderOrigin",["define_controls.directionsControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="custom_search_filter"] .acf-field[data-name="enable"] :input',"check","postResponse.map.filter.custom_search_filter.enable",["define_controls.customSearchControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="custom_search_filter"] .acf-field[data-name="position"] :input',"val","postResponse.map.filter.custom_search_filter.position",["define_controls.customSearchControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="custom_search_filter"] .acf-field[data-name="include_geocoder"] :input',"check","postResponse.map.filter.custom_search_filter.include_geocoder",["define_controls.customSearchControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="custom_search_filter"] .acf-field[data-name="limit_results"] :input',"val","postResponse.map.filter.custom_search_filter.limit_results",["define_controls.customSearchControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="custom_search_filter"] .acf-field[data-name="number_of_results"] :input',"val","postResponse.map.filter.custom_search_filter.number_of_results",["define_controls.customSearchControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="custom_search_filter"] .acf-field[data-name="placeholder"] :input',"val","postResponse.map.filter.custom_search_filter.placeholder",["define_controls.customSearchControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="filter_dropdown"] .acf-field[data-name="enable"] :input',"check","postResponse.map.filter.filter_dropdown.enable",["define_controls.filterDropdownControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="filter_dropdown"] .acf-field[data-name="position"] :input',"val","postResponse.map.filter.filter_dropdown.position",["define_controls.filterDropdownControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="filter_dropdown"] .acf-field[data-name="placeholder"] :input',"val","postResponse.map.filter.filter_dropdown.placeholder",["define_controls.filterDropdownControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="category_filter"] .acf-field[data-name="enable"] :input',"check","postResponse.map.filter.category_filter.enable",["define_controls.categoryFilterControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="category_filter"] .acf-field[data-name="position"] :input',"val","postResponse.map.filter.category_filter.position",["define_controls.categoryFilterControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="category_filter"] .acf-field[data-name="initial_visibility"] :input',"check","postResponse.map.filter.category_filter.initial_visibility",["define_controls.categoryFilterControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="category_filter"] .acf-field[data-name="functionality"] :input',"val","postResponse.map.filter.category_filter.functionality",["define_controls.categoryFilterControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="category_filter"] .acf-field[data-name="independent_children"] :input',"check","postResponse.map.filter.category_filter.independent_children",["define_controls.categoryFilterControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="category_filter"] .acf-field[data-name="category_display"] :input',"val","postResponse.map.filter.category_filter.category_display",["define_controls.categoryFilterControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="category_filter"] .acf-field[data-name="category_order"] :input',"val","postResponse.map.filter.category_filter.category_order",["define_controls.categoryFilterControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="category_filter"] .acf-field[data-name="checkbox_display"] :input',"val","postResponse.map.filter.category_filter.checkbox_display",["define_controls.categoryFilterControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="category_filter"] .acf-field[data-name="pre_selected_categories"] :input',"val","postResponse.map.filter.category_filter.pre_selected_categories",["define_controls.categoryFilterControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="list"] .acf-field[data-name="enable"] :input',"check","postResponse.map.list.enable",["define_controls.listControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="list"] .acf-field[data-name="position"] :input',"val","postResponse.map.list.position",["define_controls.listControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="list"] .acf-field[data-name="units"] :input',"val","postResponse.map.list.units",["define_controls.listControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="list"] .acf-field[data-name="show_distance"] :input',"check","postResponse.map.list.show_distance",["define_controls.listControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="list"] .acf-field[data-name="sort_by_distance"] :input',"check","postResponse.map.list.sort_by_distance",["define_controls.listControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="list"] .acf-field[data-name="listing_type"] :input',"val","postResponse.map.list.listing_type",["define_controls.listControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="list"] .acf-field[data-name="list_order"] :input',"val","postResponse.map.list.list_order",["define_controls.listControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="list"] .acf-field[data-name="group_by_category"] :input',"check","postResponse.map.list.group_by_category",["define_controls.listControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="list"] .acf-field[data-name="number_of_locations"] :input',"val","postResponse.map.list.number_of_locations",["define_controls.listControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="list"] .acf-field[data-name="store_locator_options"] .acf-field[data-name="enable"] :input',"check","postResponse.map.list.store_locator_options.enable",["define_controls.listControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="list"] .acf-field[data-name="store_locator_options"] .acf-field[data-name="sort_hours_by_day"] :input',"check","postResponse.map.list.store_locator_options.sort_hours_by_day",["define_controls.listControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="locations"] select',"select","postResponseAdmin.locations_ids",["define_adminFeatures","define_postResponse.locations","set_mapfeatures","define_dataLayers","define_markers","define_controls.customSearchControl","define_controls.filterDropdownControl","define_controls.categoryFilterControl","define_controls.listControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="lines"] select',"select","postResponseAdmin.lines_ids",["define_adminFeatures","define_postResponse.lines","set_mapfeatures","define_dataLayers","define_markers","define_controls.customSearchControl","define_controls.filterDropdownControl","define_controls.categoryFilterControl","define_controls.listControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="polygons"] select',"select","postResponseAdmin.polygons_ids",["define_adminFeatures","define_postResponse.polygons","set_mapfeatures","define_dataLayers","define_markers","define_controls.customSearchControl","define_controls.filterDropdownControl","define_controls.categoryFilterControl","define_controls.listControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="add_by_category"] select',"select","postResponse.cats",["define_adminFeatures","define_postResponse.locations","define_postResponse.lines","define_postResponse.polygons","set_mapfeatures","define_dataLayers","define_markers","define_controls.customSearchControl","define_controls.filterDropdownControl","define_controls.categoryFilterControl","define_controls.listControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="manual_latitude"] :input',"val","postResponse.map.view.manual_latitude");this.MapsterContainer.registerListener('.acf-field[data-name="manual_longitude"] :input',"val","postResponse.map.view.manual_longitude");this.MapsterContainer.registerListener('.acf-field[data-name="manual_zoom"] :input',"val","postResponse.map.view.manual_zoom");this.MapsterContainer.registerListener('.acf-field[data-name="manual_pitch"] :input',"val","postResponse.map.view.manual_pitch");this.MapsterContainer.registerListener('.acf-field[data-name="manual_rotation"] :input',"val","postResponse.map.view.manual_rotation");this.MapsterContainer.registerListener('.acf-field[data-name="padding_around_bounds"] :input',"val","postResponse.map.view.padding_around_bounds");this.MapsterContainer.registerListener('.acf-field[data-name="initial_load"] :input',"val","postResponse.map.view.initial_load");this.MapsterContainer.registerListener('.acf-field[data-name="loading_graphic"] :input',"val","postResponse.map.loading.loading_graphic");this.MapsterContainer.registerListener('.acf-field[data-name="background_color"] :input',"val","postResponse.map.loading.background_color");this.MapsterContainer.registerListener('.acf-field[data-name="loader_color"] :input',"val","postResponse.map.loading.loader_color");this.MapsterContainer.registerListener('.acf-field[data-name="custom_loader"]',"img","postResponse.map.loading.custom_loader");this.MapsterContainer.registerListener('.acf-field[data-name="circle_clustering"] :input',"check","postResponse.map.circle_clustering");this.MapsterContainer.registerListener('.acf-field[data-name="label_icon_clustering"] :input',"check","postResponse.map.label_icon_clustering");this.MapsterContainer.registerListener('.acf-field[data-name="enable_heatmap"] :input',"check","postResponse.map.heatmap.enable_heatmap",["set_heatmap"]);this.MapsterContainer.registerListener('.acf-field[data-name="heatmap_layer"] :input',"val","postResponse.map.heatmap.heatmap_layer",["set_heatmap"]);this.MapsterContainer.registerListener('.acf-field[data-name="heatmap_layer_visibility"] :input',"val","postResponse.map.heatmap.heatmap_layer_visibility",["set_heatmap"]);this.MapsterContainer.registerListener('.acf-field[data-name="heatmap_weighted_property"] :input',"val","postResponse.map.heatmap.heatmap_weighted_property",["set_heatmap"]);this.MapsterContainer.registerListener('.acf-field[data-name="heatmap_intensity"] :input',"val","postResponse.map.heatmap.heatmap_intensity",["set_heatmap"]);this.MapsterContainer.registerListener('.acf-field[data-name="heatmap_color_range"] :input',"val","postResponse.map.heatmap.heatmap_color_range",["set_heatmap"]);this.MapsterContainer.registerListener('.acf-field[data-name="heatmap_point_radius"] :input',"val","postResponse.map.heatmap.heatmap_point_radius",["set_heatmap"]);this.MapsterContainer.registerListener('.acf-field[data-name="heatmap_opacity"] :input',"val","postResponse.map.heatmap.heatmap_opacity",["set_heatmap"]);this.MapsterContainer.registerListener('.acf-field[data-name="enable_elevation_chart"] :input',"check","postResponse.map.elevation_line_chart.enable_elevation_chart");this.MapsterContainer.registerListener('.acf-field[data-name="map_provider"] :input',"val","postResponse.map.map_type.map_provider",["define_mapLibrary"]);this.MapsterContainer.registerListener('.acf-field[data-name="map_tile_style_access_token"] :input',"val","postResponse.map.map_type.map_tile_style_access_token",["set_mapstyle"]);this.MapsterContainer.registerListener('.acf-field[data-name="map_tile_style_no_access_token"] :input',"val","postResponse.map.map_type.map_tile_style_no_access_token",["set_mapstyle"]);this.MapsterContainer.registerListener('.acf-field[data-name="access_token"] :input',"val","postResponse.map.map_type.access_token");this.MapsterContainer.registerListener('.acf-field[data-name="custom_mapbox_style"] :input',"val","postResponse.map.map_type.custom_mapbox_style",["set_mapstyle"]);this.MapsterContainer.registerListener('.acf-field[data-name="custom_style_json"] :input',"val","postResponse.map.map_type.custom_style_json",["set_mapstyle"]);this.MapsterContainer.registerListener('.acf-field[data-name="snazzy_map_style"] :input',"val","postResponse.map.map_type.snazzy_map_style",["set_mapstyle"]);this.MapsterContainer.registerListener('.acf-field[data-name="custom_image"] :input',"val","postResponse.map.map_type.custom_image",["set_mapstyle"]);this.MapsterContainer.registerListener('.acf-field[data-name="duplicate_horizontally"] :input',"check","postResponse.map.layout.duplicate_horizontally");this.MapsterContainer.registerListener('.acf-field[data-name="terrain"] :input',"check","postResponse.map.map_type.terrain",["set_terrain"]);this.MapsterContainer.registerListener('.acf-field[data-name="buildings_3d"] :input',"check","postResponse.map.map_type.buildings_3d",["set_buildings3d"]);this.MapsterContainer.registerListener('.acf-field[data-name="map_language"] :input',"val","postResponse.map.map_type.map_language");this.MapsterContainer.registerListener('.acf-field[data-name="projection"] :input',"val","postResponse.map.map_type.projection",["set_projection"]);this.MapsterContainer.registerListener('.acf-field[data-name="globe"] :input',"check","postResponse.map.map_type.globe",[]);this.MapsterContainer.registerListener('.acf-field[data-name="globe_background"] :input',"val","postResponse.map.map_type.globe_background",[])}}class MapsterPublic{constructor(){this.actions={}}add_action(e,t){this.actions[e]||(this.actions[e]={funcs:[]});this.actions[e].funcs.push({func:t})}}window.mwm=new MapsterPublic;