!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).turf=e()}}((function(){return function e(t,o,r){function n(i,s){if(!o[i]){if(!t[i]){var l="function"==typeof require&&require;if(!s&&l)return l(i,!0);if(a)return a(i,!0);var p=new Error("Cannot find module '"+i+"'");throw p.code="MODULE_NOT_FOUND",p}var c=o[i]={exports:{}};t[i][0].call(c.exports,(function(e){return n(t[i][1][e]||e)}),c,c.exports,e,t,o,r)}return o[i].exports}for(var a="function"==typeof require&&require,i=0;i<r.length;i++)n(r[i]);return n}({1:[function(e,t,o){t.exports={along:e("@turf/along").default,bbox:e("@turf/bbox").default,center:e("@turf/center").default,distance:e("@turf/distance").default,destination:e("@turf/destination").default,length:e("@turf/length").default,nearestPointOnLine:e("@turf/nearest-point-on-line").default,booleanPointInPolygon:e("@turf/boolean-point-in-polygon").default,pointOnFeature:e("@turf/point-on-feature").default}},{"@turf/along":2,"@turf/bbox":3,"@turf/boolean-point-in-polygon":5,"@turf/center":6,"@turf/destination":8,"@turf/distance":9,"@turf/length":13,"@turf/nearest-point-on-line":17,"@turf/point-on-feature":19}],2:[function(e,t,o){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(o,"__esModule",{value:!0});var n=r(e("@turf/bearing")),a=r(e("@turf/destination")),i=r(e("@turf/distance")),s=e("@turf/helpers"),l=e("@turf/invariant");o.default=function(e,t,o){void 0===o&&(o={});for(var r=l.getGeom(e).coordinates,p=0,c=0;c<r.length&&!(t>=p&&c===r.length-1);c++){if(p>=t){var d=t-p;if(d){var u=n.default(r[c],r[c-1])-180;return a.default(r[c],d,u,o)}return s.point(r[c])}p+=i.default(r[c],r[c+1],o)}return s.point(r[r.length-1])}},{"@turf/bearing":4,"@turf/destination":8,"@turf/distance":9,"@turf/helpers":11,"@turf/invariant":12}],3:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var r=e("@turf/meta");function n(e){var t=[1/0,1/0,-1/0,-1/0];r.coordEach(e,(function(e){t[0]>e[0]&&(t[0]=e[0]);t[1]>e[1]&&(t[1]=e[1]);t[2]<e[0]&&(t[2]=e[0]);t[3]<e[1]&&(t[3]=e[1])}));return t}n.default=n;o.default=n},{"@turf/meta":16}],4:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var r=e("@turf/helpers"),n=e("@turf/invariant");function a(e,t,o){void 0===o&&(o={});if(!0===o.final)return function(e,t){var o=a(t,e);return(o+180)%360}(e,t);var i=n.getCoord(e),s=n.getCoord(t),l=r.degreesToRadians(i[0]),p=r.degreesToRadians(s[0]),c=r.degreesToRadians(i[1]),d=r.degreesToRadians(s[1]),u=Math.sin(p-l)*Math.cos(d),m=Math.cos(c)*Math.sin(d)-Math.sin(c)*Math.cos(d)*Math.cos(p-l);return r.radiansToDegrees(Math.atan2(u,m))}o.default=a},{"@turf/helpers":11,"@turf/invariant":12}],5:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var r=e("@turf/invariant");o.default=function(e,t,o){void 0===o&&(o={});if(!e)throw new Error("point is required");if(!t)throw new Error("polygon is required");var a=r.getCoord(e),i=r.getGeom(t),s=i.type,l=t.bbox,p=i.coordinates;if(l&&!1===function(e,t){return t[0]<=e[0]&&t[1]<=e[1]&&t[2]>=e[0]&&t[3]>=e[1]}(a,l))return!1;"Polygon"===s&&(p=[p]);for(var c=!1,d=0;d<p.length&&!c;d++)if(n(a,p[d][0],o.ignoreBoundary)){for(var u=!1,m=1;m<p[d].length&&!u;){n(a,p[d][m],!o.ignoreBoundary)&&(u=!0);m++}u||(c=!0)}return c};function n(e,t,o){var r=!1;t[0][0]===t[t.length-1][0]&&t[0][1]===t[t.length-1][1]&&(t=t.slice(0,t.length-1));for(var n=0,a=t.length-1;n<t.length;a=n++){var i=t[n][0],s=t[n][1],l=t[a][0],p=t[a][1];if(e[1]*(i-l)+s*(l-e[0])+p*(e[0]-i)==0&&(i-e[0])*(l-e[0])<=0&&(s-e[1])*(p-e[1])<=0)return!o;s>e[1]!=p>e[1]&&e[0]<(l-i)*(e[1]-s)/(p-s)+i&&(r=!r)}return r}},{"@turf/invariant":12}],6:[function(e,t,o){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(o,"__esModule",{value:!0});var n=r(e("@turf/bbox")),a=e("@turf/helpers");o.default=function(e,t){void 0===t&&(t={});var o=n.default(e),r=(o[0]+o[2])/2,i=(o[1]+o[3])/2;return a.point([r,i],t.properties,t)}},{"@turf/bbox":3,"@turf/helpers":11}],7:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});function r(e){var t={type:"Feature"};Object.keys(e).forEach((function(o){switch(o){case"type":case"properties":case"geometry":return;default:t[o]=e[o]}}));t.properties=n(e.properties);t.geometry=a(e.geometry);return t}function n(e){var t={};if(!e)return t;Object.keys(e).forEach((function(o){var r=e[o];"object"==typeof r?null===r?t[o]=null:Array.isArray(r)?t[o]=r.map((function(e){return e})):t[o]=n(r):t[o]=r}));return t}function a(e){var t={type:e.type};e.bbox&&(t.bbox=e.bbox);if("GeometryCollection"===e.type){t.geometries=e.geometries.map((function(e){return a(e)}));return t}t.coordinates=i(e.coordinates);return t}function i(e){var t=e;return"object"!=typeof t[0]?t.slice():t.map((function(e){return i(e)}))}o.default=function(e){if(!e)throw new Error("geojson is required");switch(e.type){case"Feature":return r(e);case"FeatureCollection":return function(e){var t={type:"FeatureCollection"};Object.keys(e).forEach((function(o){switch(o){case"type":case"features":return;default:t[o]=e[o]}}));t.features=e.features.map((function(e){return r(e)}));return t}(e);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return a(e);default:throw new Error("unknown GeoJSON type")}}},{}],8:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var r=e("@turf/helpers"),n=e("@turf/invariant");o.default=function(e,t,o,a){void 0===a&&(a={});var i=n.getCoord(e),s=r.degreesToRadians(i[0]),l=r.degreesToRadians(i[1]),p=r.degreesToRadians(o),c=r.lengthToRadians(t,a.units),d=Math.asin(Math.sin(l)*Math.cos(c)+Math.cos(l)*Math.sin(c)*Math.cos(p)),u=s+Math.atan2(Math.sin(p)*Math.sin(c)*Math.cos(l),Math.cos(c)-Math.sin(l)*Math.sin(d)),m=r.radiansToDegrees(u),f=r.radiansToDegrees(d);return r.point([m,f],a.properties)}},{"@turf/helpers":11,"@turf/invariant":12}],9:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var r=e("@turf/invariant"),n=e("@turf/helpers");o.default=function(e,t,o){void 0===o&&(o={});var a=r.getCoord(e),i=r.getCoord(t),s=n.degreesToRadians(i[1]-a[1]),l=n.degreesToRadians(i[0]-a[0]),p=n.degreesToRadians(a[1]),c=n.degreesToRadians(i[1]),d=Math.pow(Math.sin(s/2),2)+Math.pow(Math.sin(l/2),2)*Math.cos(p)*Math.cos(c);return n.radiansToLength(2*Math.atan2(Math.sqrt(d),Math.sqrt(1-d)),o.units)}},{"@turf/helpers":11,"@turf/invariant":12}],10:[function(e,t,o){"use strict";var r=e("@turf/meta"),n=e("@turf/helpers");function a(e){var t=[];"FeatureCollection"===e.type?r.featureEach(e,(function(e){r.coordEach(e,(function(o){t.push(n.point(o,e.properties))}))})):r.coordEach(e,(function(o){t.push(n.point(o,e.properties))}));return n.featureCollection(t)}t.exports=a;t.exports.default=a},{"@turf/helpers":11,"@turf/meta":16}],11:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});o.earthRadius=6371008.8;o.factors={centimeters:100*o.earthRadius,centimetres:100*o.earthRadius,degrees:o.earthRadius/111325,feet:3.28084*o.earthRadius,inches:39.37*o.earthRadius,kilometers:o.earthRadius/1e3,kilometres:o.earthRadius/1e3,meters:o.earthRadius,metres:o.earthRadius,miles:o.earthRadius/1609.344,millimeters:1e3*o.earthRadius,millimetres:1e3*o.earthRadius,nauticalmiles:o.earthRadius/1852,radians:1,yards:1.0936*o.earthRadius};o.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/o.earthRadius,yards:1.0936133};o.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function r(e,t,o){void 0===o&&(o={});var r={type:"Feature"};(0===o.id||o.id)&&(r.id=o.id);o.bbox&&(r.bbox=o.bbox);r.properties=t||{};r.geometry=e;return r}o.feature=r;o.geometry=function(e,t,o){void 0===o&&(o={});switch(e){case"Point":return n(t).geometry;case"LineString":return i(t).geometry;case"Polygon":return a(t).geometry;case"MultiPoint":return p(t).geometry;case"MultiLineString":return l(t).geometry;case"MultiPolygon":return c(t).geometry;default:throw new Error(e+" is invalid")}};function n(e,t,o){void 0===o&&(o={});if(!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!f(e[0])||!f(e[1]))throw new Error("coordinates must contain numbers");return r({type:"Point",coordinates:e},t,o)}o.point=n;o.points=function(e,t,o){void 0===o&&(o={});return s(e.map((function(e){return n(e,t)})),o)};function a(e,t,o){void 0===o&&(o={});for(var n=0,a=e;n<a.length;n++){var i=a[n];if(i.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var s=0;s<i[i.length-1].length;s++)if(i[i.length-1][s]!==i[0][s])throw new Error("First and last Position are not equivalent.")}return r({type:"Polygon",coordinates:e},t,o)}o.polygon=a;o.polygons=function(e,t,o){void 0===o&&(o={});return s(e.map((function(e){return a(e,t)})),o)};function i(e,t,o){void 0===o&&(o={});if(e.length<2)throw new Error("coordinates must be an array of two or more positions");return r({type:"LineString",coordinates:e},t,o)}o.lineString=i;o.lineStrings=function(e,t,o){void 0===o&&(o={});return s(e.map((function(e){return i(e,t)})),o)};function s(e,t){void 0===t&&(t={});var o={type:"FeatureCollection"};t.id&&(o.id=t.id);t.bbox&&(o.bbox=t.bbox);o.features=e;return o}o.featureCollection=s;function l(e,t,o){void 0===o&&(o={});return r({type:"MultiLineString",coordinates:e},t,o)}o.multiLineString=l;function p(e,t,o){void 0===o&&(o={});return r({type:"MultiPoint",coordinates:e},t,o)}o.multiPoint=p;function c(e,t,o){void 0===o&&(o={});return r({type:"MultiPolygon",coordinates:e},t,o)}o.multiPolygon=c;o.geometryCollection=function(e,t,o){void 0===o&&(o={});return r({type:"GeometryCollection",geometries:e},t,o)};o.round=function(e,t){void 0===t&&(t=0);if(t&&!(t>=0))throw new Error("precision must be a positive number");var o=Math.pow(10,t||0);return Math.round(e*o)/o};function d(e,t){void 0===t&&(t="kilometers");var r=o.factors[t];if(!r)throw new Error(t+" units is invalid");return e*r}o.radiansToLength=d;function u(e,t){void 0===t&&(t="kilometers");var r=o.factors[t];if(!r)throw new Error(t+" units is invalid");return e/r}o.lengthToRadians=u;o.lengthToDegrees=function(e,t){return m(u(e,t))};o.bearingToAzimuth=function(e){var t=e%360;t<0&&(t+=360);return t};function m(e){return 180*(e%(2*Math.PI))/Math.PI}o.radiansToDegrees=m;o.degreesToRadians=function(e){return e%360*Math.PI/180};o.convertLength=function(e,t,o){void 0===t&&(t="kilometers");void 0===o&&(o="kilometers");if(!(e>=0))throw new Error("length must be a positive number");return d(u(e,t),o)};o.convertArea=function(e,t,r){void 0===t&&(t="meters");void 0===r&&(r="kilometers");if(!(e>=0))throw new Error("area must be a positive number");var n=o.areaFactors[t];if(!n)throw new Error("invalid original units");var a=o.areaFactors[r];if(!a)throw new Error("invalid final units");return e/n*a};function f(e){return!isNaN(e)&&null!==e&&!Array.isArray(e)}o.isNumber=f;o.isObject=function(e){return!!e&&e.constructor===Object};o.validateBBox=function(e){if(!e)throw new Error("bbox is required");if(!Array.isArray(e))throw new Error("bbox must be an Array");if(4!==e.length&&6!==e.length)throw new Error("bbox must be an Array of 4 or 6 numbers");e.forEach((function(e){if(!f(e))throw new Error("bbox must only contain numbers")}))};o.validateId=function(e){if(!e)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof e))throw new Error("id must be a number or a string")}},{}],12:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var r=e("@turf/helpers");o.getCoord=function(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if("Feature"===e.type&&null!==e.geometry&&"Point"===e.geometry.type)return e.geometry.coordinates;if("Point"===e.type)return e.coordinates}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return e;throw new Error("coord must be GeoJSON Point or an Array of numbers")};o.getCoords=function(e){if(Array.isArray(e))return e;if("Feature"===e.type){if(null!==e.geometry)return e.geometry.coordinates}else if(e.coordinates)return e.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")};o.containsNumber=function e(t){if(t.length>1&&r.isNumber(t[0])&&r.isNumber(t[1]))return!0;if(Array.isArray(t[0])&&t[0].length)return e(t[0]);throw new Error("coordinates must only contain numbers")};o.geojsonType=function(e,t,o){if(!t||!o)throw new Error("type and name required");if(!e||e.type!==t)throw new Error("Invalid input to "+o+": must be a "+t+", given "+e.type)};o.featureOf=function(e,t,o){if(!e)throw new Error("No feature passed");if(!o)throw new Error(".featureOf() requires a name");if(!e||"Feature"!==e.type||!e.geometry)throw new Error("Invalid input to "+o+", Feature with geometry required");if(!e.geometry||e.geometry.type!==t)throw new Error("Invalid input to "+o+": must be a "+t+", given "+e.geometry.type)};o.collectionOf=function(e,t,o){if(!e)throw new Error("No featureCollection passed");if(!o)throw new Error(".collectionOf() requires a name");if(!e||"FeatureCollection"!==e.type)throw new Error("Invalid input to "+o+", FeatureCollection required");for(var r=0,n=e.features;r<n.length;r++){var a=n[r];if(!a||"Feature"!==a.type||!a.geometry)throw new Error("Invalid input to "+o+", Feature with geometry required");if(!a.geometry||a.geometry.type!==t)throw new Error("Invalid input to "+o+": must be a "+t+", given "+a.geometry.type)}};o.getGeom=function(e){return"Feature"===e.type?e.geometry:e};o.getType=function(e,t){return"FeatureCollection"===e.type?"FeatureCollection":"GeometryCollection"===e.type?"GeometryCollection":"Feature"===e.type&&null!==e.geometry?e.geometry.type:e.type}},{"@turf/helpers":11}],13:[function(e,t,o){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(o,"__esModule",{value:!0});var n=r(e("@turf/distance")),a=e("@turf/meta");o.default=function(e,t){void 0===t&&(t={});return a.segmentReduce(e,(function(e,o){var r=o.geometry.coordinates;return e+n.default(r[0],r[1],t)}),0)}},{"@turf/distance":9,"@turf/meta":16}],14:[function(e,t,o){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(o,"__esModule",{value:!0});var n=e("@turf/helpers"),a=e("@turf/invariant"),i=r(e("@turf/line-segment")),s=e("@turf/meta"),l=r(e("geojson-rbush"));function p(e,t){var o=a.getCoords(e),r=a.getCoords(t);if(2!==o.length)throw new Error("<intersects> line1 must only contain 2 coordinates");if(2!==r.length)throw new Error("<intersects> line2 must only contain 2 coordinates");var i=o[0][0],s=o[0][1],l=o[1][0],p=o[1][1],c=r[0][0],d=r[0][1],u=r[1][0],m=r[1][1],f=(m-d)*(l-i)-(u-c)*(p-s),h=(u-c)*(s-d)-(m-d)*(i-c),_=(l-i)*(s-d)-(p-s)*(i-c);if(0===f)return null;var g=h/f,y=_/f;if(g>=0&&g<=1&&y>=0&&y<=1){var v=i+g*(l-i),b=s+g*(p-s);return n.point([v,b])}return null}o.default=function(e,t){var o={},r=[];"LineString"===e.type&&(e=n.feature(e));"LineString"===t.type&&(t=n.feature(t));if("Feature"===e.type&&"Feature"===t.type&&null!==e.geometry&&null!==t.geometry&&"LineString"===e.geometry.type&&"LineString"===t.geometry.type&&2===e.geometry.coordinates.length&&2===t.geometry.coordinates.length){var c=p(e,t);c&&r.push(c);return n.featureCollection(r)}var d=l.default();d.load(i.default(t));s.featureEach(i.default(e),(function(e){s.featureEach(d.search(e),(function(t){var n=p(e,t);if(n){var i=a.getCoords(n).join(",");if(!o[i]){o[i]=!0;r.push(n)}}}))}));return n.featureCollection(r)}},{"@turf/helpers":11,"@turf/invariant":12,"@turf/line-segment":15,"@turf/meta":16,"geojson-rbush":20}],15:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var r=e("@turf/helpers"),n=e("@turf/invariant"),a=e("@turf/meta");o.default=function(e){if(!e)throw new Error("geojson is required");var t=[];a.flattenEach(e,(function(e){!function(e,t){var o=[],a=e.geometry;if(null!==a){switch(a.type){case"Polygon":o=n.getCoords(a);break;case"LineString":o=[n.getCoords(a)]}o.forEach((function(o){var n=function(e,t){var o=[];e.reduce((function(e,n){var a,i,s,l,p,c,d=r.lineString([e,n],t);d.bbox=(i=n,s=(a=e)[0],l=a[1],p=i[0],c=i[1],[s<p?s:p,l<c?l:c,s>p?s:p,l>c?l:c]);o.push(d);return n}));return o}(o,e.properties);n.forEach((function(e){e.id=t.length;t.push(e)}))}))}}(e,t)}));return r.featureCollection(t)}},{"@turf/helpers":11,"@turf/invariant":12,"@turf/meta":16}],16:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var r=e("@turf/helpers");function n(e,t,o){if(null!==e)for(var r,a,i,s,l,p,c,d,u=0,m=0,f=e.type,h="FeatureCollection"===f,_="Feature"===f,g=h?e.features.length:1,y=0;y<g;y++){l=(d=!!(c=h?e.features[y].geometry:_?e.geometry:e)&&"GeometryCollection"===c.type)?c.geometries.length:1;for(var v=0;v<l;v++){var b=0,w=0;if(null!==(s=d?c.geometries[v]:c)){p=s.coordinates;var C=s.type;u=!o||"Polygon"!==C&&"MultiPolygon"!==C?0:1;switch(C){case null:break;case"Point":if(!1===t(p,m,y,b,w))return!1;m++;b++;break;case"LineString":case"MultiPoint":for(r=0;r<p.length;r++){if(!1===t(p[r],m,y,b,w))return!1;m++;"MultiPoint"===C&&b++}"LineString"===C&&b++;break;case"Polygon":case"MultiLineString":for(r=0;r<p.length;r++){for(a=0;a<p[r].length-u;a++){if(!1===t(p[r][a],m,y,b,w))return!1;m++}"MultiLineString"===C&&b++;"Polygon"===C&&w++}"Polygon"===C&&b++;break;case"MultiPolygon":for(r=0;r<p.length;r++){w=0;for(a=0;a<p[r].length;a++){for(i=0;i<p[r][a].length-u;i++){if(!1===t(p[r][a][i],m,y,b,w))return!1;m++}w++}b++}break;case"GeometryCollection":for(r=0;r<s.geometries.length;r++)if(!1===n(s.geometries[r],t,o))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function a(e,t){var o;switch(e.type){case"FeatureCollection":for(o=0;o<e.features.length&&!1!==t(e.features[o].properties,o);o++);break;case"Feature":t(e.properties,0)}}function i(e,t){if("Feature"===e.type)t(e,0);else if("FeatureCollection"===e.type)for(var o=0;o<e.features.length&&!1!==t(e.features[o],o);o++);}function s(e,t){var o,r,n,a,i,s,l,p,c,d,u=0,m="FeatureCollection"===e.type,f="Feature"===e.type,h=m?e.features.length:1;for(o=0;o<h;o++){s=m?e.features[o].geometry:f?e.geometry:e;p=m?e.features[o].properties:f?e.properties:{};c=m?e.features[o].bbox:f?e.bbox:void 0;d=m?e.features[o].id:f?e.id:void 0;i=(l=!!s&&"GeometryCollection"===s.type)?s.geometries.length:1;for(n=0;n<i;n++)if(null!==(a=l?s.geometries[n]:s))switch(a.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===t(a,u,p,c,d))return!1;break;case"GeometryCollection":for(r=0;r<a.geometries.length;r++)if(!1===t(a.geometries[r],u,p,c,d))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===t(null,u,p,c,d))return!1;u++}}function l(e,t){s(e,(function(e,o,n,a,i){var s,l=null===e?null:e.type;switch(l){case null:case"Point":case"LineString":case"Polygon":return!1!==t(r.feature(e,n,{bbox:a,id:i}),o,0)&&void 0}switch(l){case"MultiPoint":s="Point";break;case"MultiLineString":s="LineString";break;case"MultiPolygon":s="Polygon"}for(var p=0;p<e.coordinates.length;p++){var c={type:s,coordinates:e.coordinates[p]};if(!1===t(r.feature(c,n),o,p))return!1}}))}function p(e,t){l(e,(function(e,o,a){var i=0;if(e.geometry){var s=e.geometry.type;if("Point"!==s&&"MultiPoint"!==s){var l,p=0,c=0,d=0;return!1!==n(e,(function(n,s,u,m,f){if(void 0===l||o>p||m>c||f>d){l=n;p=o;c=m;d=f;i=0}else{var h=r.lineString([l,n],e.properties);if(!1===t(h,o,a,f,i))return!1;i++;l=n}}))&&void 0}}}))}function c(e,t){if(!e)throw new Error("geojson is required");l(e,(function(e,o,n){if(null!==e.geometry){var a=e.geometry.type,i=e.geometry.coordinates;switch(a){case"LineString":if(!1===t(e,o,n,0,0))return!1;break;case"Polygon":for(var s=0;s<i.length;s++)if(!1===t(r.lineString(i[s],e.properties),o,n,s))return!1}}}))}o.coordAll=function(e){var t=[];n(e,(function(e){t.push(e)}));return t};o.coordEach=n;o.coordReduce=function(e,t,o,r){var a=o;n(e,(function(e,r,n,i,s){a=0===r&&void 0===o?e:t(a,e,r,n,i,s)}),r);return a};o.featureEach=i;o.featureReduce=function(e,t,o){var r=o;i(e,(function(e,n){r=0===n&&void 0===o?e:t(r,e,n)}));return r};o.findPoint=function(e,t){t=t||{};if(!r.isObject(t))throw new Error("options is invalid");var o,n=t.featureIndex||0,a=t.multiFeatureIndex||0,i=t.geometryIndex||0,s=t.coordIndex||0,l=t.properties;switch(e.type){case"FeatureCollection":n<0&&(n=e.features.length+n);l=l||e.features[n].properties;o=e.features[n].geometry;break;case"Feature":l=l||e.properties;o=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":o=e;break;default:throw new Error("geojson is invalid")}if(null===o)return null;var p=o.coordinates;switch(o.type){case"Point":return r.point(p,l,t);case"MultiPoint":a<0&&(a=p.length+a);return r.point(p[a],l,t);case"LineString":s<0&&(s=p.length+s);return r.point(p[s],l,t);case"Polygon":i<0&&(i=p.length+i);s<0&&(s=p[i].length+s);return r.point(p[i][s],l,t);case"MultiLineString":a<0&&(a=p.length+a);s<0&&(s=p[a].length+s);return r.point(p[a][s],l,t);case"MultiPolygon":a<0&&(a=p.length+a);i<0&&(i=p[a].length+i);s<0&&(s=p[a][i].length-s);return r.point(p[a][i][s],l,t)}throw new Error("geojson is invalid")};o.findSegment=function(e,t){t=t||{};if(!r.isObject(t))throw new Error("options is invalid");var o,n=t.featureIndex||0,a=t.multiFeatureIndex||0,i=t.geometryIndex||0,s=t.segmentIndex||0,l=t.properties;switch(e.type){case"FeatureCollection":n<0&&(n=e.features.length+n);l=l||e.features[n].properties;o=e.features[n].geometry;break;case"Feature":l=l||e.properties;o=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":o=e;break;default:throw new Error("geojson is invalid")}if(null===o)return null;var p=o.coordinates;switch(o.type){case"Point":case"MultiPoint":return null;case"LineString":s<0&&(s=p.length+s-1);return r.lineString([p[s],p[s+1]],l,t);case"Polygon":i<0&&(i=p.length+i);s<0&&(s=p[i].length+s-1);return r.lineString([p[i][s],p[i][s+1]],l,t);case"MultiLineString":a<0&&(a=p.length+a);s<0&&(s=p[a].length+s-1);return r.lineString([p[a][s],p[a][s+1]],l,t);case"MultiPolygon":a<0&&(a=p.length+a);i<0&&(i=p[a].length+i);s<0&&(s=p[a][i].length-s-1);return r.lineString([p[a][i][s],p[a][i][s+1]],l,t)}throw new Error("geojson is invalid")};o.flattenEach=l;o.flattenReduce=function(e,t,o){var r=o;l(e,(function(e,n,a){r=0===n&&0===a&&void 0===o?e:t(r,e,n,a)}));return r};o.geomEach=s;o.geomReduce=function(e,t,o){var r=o;s(e,(function(e,n,a,i,s){r=0===n&&void 0===o?e:t(r,e,n,a,i,s)}));return r};o.lineEach=c;o.lineReduce=function(e,t,o){var r=o;c(e,(function(e,n,a,i){r=0===n&&void 0===o?e:t(r,e,n,a,i)}));return r};o.propEach=a;o.propReduce=function(e,t,o){var r=o;a(e,(function(e,n){r=0===n&&void 0===o?e:t(r,e,n)}));return r};o.segmentEach=p;o.segmentReduce=function(e,t,o){var r=o,n=!1;p(e,(function(e,a,i,s,l){r=!1===n&&void 0===o?e:t(r,e,a,i,s,l);n=!0}));return r}},{"@turf/helpers":11}],17:[function(e,t,o){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(o,"__esModule",{value:!0});var n=r(e("@turf/bearing")),a=r(e("@turf/distance")),i=r(e("@turf/destination")),s=r(e("@turf/line-intersect")),l=e("@turf/meta"),p=e("@turf/helpers"),c=e("@turf/invariant");o.default=function(e,t,o){void 0===o&&(o={});var r=p.point([1/0,1/0],{dist:1/0}),d=0;l.flattenEach(e,(function(e){for(var l=c.getCoords(e),u=0;u<l.length-1;u++){var m=p.point(l[u]);m.properties.dist=a.default(t,m,o);var f=p.point(l[u+1]);f.properties.dist=a.default(t,f,o);var h=a.default(m,f,o),_=Math.max(m.properties.dist,f.properties.dist),g=n.default(m,f),y=i.default(t,_,g+90,o),v=i.default(t,_,g-90,o),b=s.default(p.lineString([y.geometry.coordinates,v.geometry.coordinates]),p.lineString([m.geometry.coordinates,f.geometry.coordinates])),w=null;if(b.features.length>0){(w=b.features[0]).properties.dist=a.default(t,w,o);w.properties.location=d+a.default(m,w,o)}if(m.properties.dist<r.properties.dist){(r=m).properties.index=u;r.properties.location=d}if(f.properties.dist<r.properties.dist){(r=f).properties.index=u+1;r.properties.location=d+h}w&&w.properties.dist<r.properties.dist&&((r=w).properties.index=u);d+=h}}));return r}},{"@turf/bearing":4,"@turf/destination":8,"@turf/distance":9,"@turf/helpers":11,"@turf/invariant":12,"@turf/line-intersect":14,"@turf/meta":16}],18:[function(e,t,o){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(o,"__esModule",{value:!0});var n=r(e("@turf/clone")),a=r(e("@turf/distance")),i=e("@turf/meta");o.default=function(e,t){if(!e)throw new Error("targetPoint is required");if(!t)throw new Error("points is required");var o,r=1/0,s=0;i.featureEach(t,(function(t,o){var n=a.default(e,t);if(n<r){s=o;r=n}}));(o=n.default(t.features[s])).properties.featureIndex=s;o.properties.distanceToPoint=r;return o}},{"@turf/clone":7,"@turf/distance":9,"@turf/meta":16}],19:[function(e,t,o){"use strict";var r=e("@turf/explode"),n=e("@turf/center"),a=e("@turf/nearest-point"),i=e("@turf/boolean-point-in-polygon"),s=e("@turf/helpers");function l(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var p=l(r),c=l(n),d=l(a),u=l(i);function m(e){for(var t=function(e){if("FeatureCollection"!==e.type)return"Feature"!==e.type?s.featureCollection([s.feature(e)]):s.featureCollection([e]);return e}(e),o=c.default(t),r=!1,n=0;!r&&n<t.features.length;){var a,i=t.features[n].geometry,l=!1;if("Point"===i.type)o.geometry.coordinates[0]===i.coordinates[0]&&o.geometry.coordinates[1]===i.coordinates[1]&&(r=!0);else if("MultiPoint"===i.type){var m=!1;a=0;for(;!m&&a<i.coordinates.length;){if(o.geometry.coordinates[0]===i.coordinates[a][0]&&o.geometry.coordinates[1]===i.coordinates[a][1]){r=!0;m=!0}a++}}else if("LineString"===i.type){a=0;for(;!l&&a<i.coordinates.length-1;){if(f(o.geometry.coordinates[0],o.geometry.coordinates[1],i.coordinates[a][0],i.coordinates[a][1],i.coordinates[a+1][0],i.coordinates[a+1][1])){l=!0;r=!0}a++}}else if("MultiLineString"===i.type)for(var h=0;h<i.coordinates.length;){l=!1;a=0;for(var _=i.coordinates[h];!l&&a<_.length-1;){if(f(o.geometry.coordinates[0],o.geometry.coordinates[1],_[a][0],_[a][1],_[a+1][0],_[a+1][1])){l=!0;r=!0}a++}h++}else"Polygon"!==i.type&&"MultiPolygon"!==i.type||u.default(o,i)&&(r=!0);n++}if(r)return o;var g=s.featureCollection([]);for(n=0;n<t.features.length;n++)g.features=g.features.concat(p.default(t.features[n]).features);return s.point(d.default(o,g).geometry.coordinates)}function f(e,t,o,r,n,a){return Math.sqrt((n-o)*(n-o)+(a-r)*(a-r))===Math.sqrt((e-o)*(e-o)+(t-r)*(t-r))+Math.sqrt((n-e)*(n-e)+(a-t)*(a-t))}t.exports=m;t.exports.default=m},{"@turf/boolean-point-in-polygon":5,"@turf/center":6,"@turf/explode":10,"@turf/helpers":11,"@turf/nearest-point":18}],20:[function(e,t,o){var r=e("rbush"),n=e("@turf/helpers"),a=e("@turf/meta"),i=e("@turf/bbox").default,s=a.featureEach,l=(a.coordEach,n.polygon,n.featureCollection);function p(e){var t=new r(e);t.insert=function(e){if("Feature"!==e.type)throw new Error("invalid feature");e.bbox=e.bbox?e.bbox:i(e);return r.prototype.insert.call(this,e)};t.load=function(e){var t=[];Array.isArray(e)?e.forEach((function(e){if("Feature"!==e.type)throw new Error("invalid features");e.bbox=e.bbox?e.bbox:i(e);t.push(e)})):s(e,(function(e){if("Feature"!==e.type)throw new Error("invalid features");e.bbox=e.bbox?e.bbox:i(e);t.push(e)}));return r.prototype.load.call(this,t)};t.remove=function(e,t){if("Feature"!==e.type)throw new Error("invalid feature");e.bbox=e.bbox?e.bbox:i(e);return r.prototype.remove.call(this,e,t)};t.clear=function(){return r.prototype.clear.call(this)};t.search=function(e){var t=r.prototype.search.call(this,this.toBBox(e));return l(t)};t.collides=function(e){return r.prototype.collides.call(this,this.toBBox(e))};t.all=function(){var e=r.prototype.all.call(this);return l(e)};t.toJSON=function(){return r.prototype.toJSON.call(this)};t.fromJSON=function(e){return r.prototype.fromJSON.call(this,e)};t.toBBox=function(e){var t;if(e.bbox)t=e.bbox;else if(Array.isArray(e)&&4===e.length)t=e;else if(Array.isArray(e)&&6===e.length)t=[e[0],e[1],e[3],e[4]];else if("Feature"===e.type)t=i(e);else{if("FeatureCollection"!==e.type)throw new Error("invalid geojson");t=i(e)}return{minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]}};return t}t.exports=p;t.exports.default=p},{"@turf/bbox":3,"@turf/helpers":11,"@turf/meta":16,rbush:21}],21:[function(e,t,o){r=this,n=function(){"use strict";function e(e,r,n,a,i){!function e(o,r,n,a,i){for(;a>n;){if(a-n>600){var s=a-n+1,l=r-n+1,p=Math.log(s),c=.5*Math.exp(2*p/3),d=.5*Math.sqrt(p*c*(s-c)/s)*(l-s/2<0?-1:1);e(o,r,Math.max(n,Math.floor(r-l*c/s+d)),Math.min(a,Math.floor(r+(s-l)*c/s+d)),i)}var u=o[r],m=n,f=a;for(t(o,n,r),i(o[a],u)>0&&t(o,n,a);m<f;){for(t(o,m,f),m++,f--;i(o[m],u)<0;)m++;for(;i(o[f],u)>0;)f--}0===i(o[n],u)?t(o,n,f):t(o,++f,a),f<=r&&(n=f+1),r<=f&&(a=f-1)}}(e,r,n||0,a||e.length-1,i||o)}function t(e,t,o){var r=e[t];e[t]=e[o],e[o]=r}function o(e,t){return e<t?-1:e>t?1:0}var r=function(e){void 0===e&&(e=9),this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function n(e,t,o){if(!o)return t.indexOf(e);for(var r=0;r<t.length;r++)if(o(e,t[r]))return r;return-1}function a(e,t){i(e,0,e.children.length,t,e)}function i(e,t,o,r,n){n||(n=f(null)),n.minX=1/0,n.minY=1/0,n.maxX=-1/0,n.maxY=-1/0;for(var a=t;a<o;a++){var i=e.children[a];s(n,e.leaf?r(i):i)}return n}function s(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function l(e,t){return e.minX-t.minX}function p(e,t){return e.minY-t.minY}function c(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function d(e){return e.maxX-e.minX+(e.maxY-e.minY)}function u(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function m(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function f(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function h(t,o,r,n,a){for(var i=[o,r];i.length;)if(!((r=i.pop())-(o=i.pop())<=n)){var s=o+Math.ceil((r-o)/n/2)*n;e(t,s,o,r,a),i.push(o,s,s,r)}}return r.prototype.all=function(){return this._all(this.data,[])},r.prototype.search=function(e){var t=this.data,o=[];if(!m(e,t))return o;for(var r=this.toBBox,n=[];t;){for(var a=0;a<t.children.length;a++){var i=t.children[a],s=t.leaf?r(i):i;m(e,s)&&(t.leaf?o.push(i):u(e,s)?this._all(i,o):n.push(i))}t=n.pop()}return o},r.prototype.collides=function(e){var t=this.data;if(!m(e,t))return!1;for(var o=[];t;){for(var r=0;r<t.children.length;r++){var n=t.children[r],a=t.leaf?this.toBBox(n):n;if(m(e,a)){if(t.leaf||u(e,a))return!0;o.push(n)}}t=o.pop()}return!1},r.prototype.load=function(e){if(!e||!e.length)return this;if(e.length<this._minEntries){for(var t=0;t<e.length;t++)this.insert(e[t]);return this}var o=this._build(e.slice(),0,e.length-1,0);if(this.data.children.length)if(this.data.height===o.height)this._splitRoot(this.data,o);else{if(this.data.height<o.height){var r=this.data;this.data=o,o=r}this._insert(o,this.data.height-o.height-1,!0)}else this.data=o;return this},r.prototype.insert=function(e){return e&&this._insert(e,this.data.height-1),this},r.prototype.clear=function(){return this.data=f([]),this},r.prototype.remove=function(e,t){if(!e)return this;for(var o,r,a,i=this.data,s=this.toBBox(e),l=[],p=[];i||l.length;){if(i||(i=l.pop(),r=l[l.length-1],o=p.pop(),a=!0),i.leaf){var c=n(e,i.children,t);if(-1!==c)return i.children.splice(c,1),l.push(i),this._condense(l),this}a||i.leaf||!u(i,s)?r?(o++,i=r.children[o],a=!1):i=null:(l.push(i),p.push(o),o=0,r=i,i=i.children[0])}return this},r.prototype.toBBox=function(e){return e},r.prototype.compareMinX=function(e,t){return e.minX-t.minX},r.prototype.compareMinY=function(e,t){return e.minY-t.minY},r.prototype.toJSON=function(){return this.data},r.prototype.fromJSON=function(e){return this.data=e,this},r.prototype._all=function(e,t){for(var o=[];e;)e.leaf?t.push.apply(t,e.children):o.push.apply(o,e.children),e=o.pop();return t},r.prototype._build=function(e,t,o,r){var n,i=o-t+1,s=this._maxEntries;if(i<=s)return a(n=f(e.slice(t,o+1)),this.toBBox),n;r||(r=Math.ceil(Math.log(i)/Math.log(s)),s=Math.ceil(i/Math.pow(s,r-1))),(n=f([])).leaf=!1,n.height=r;var l=Math.ceil(i/s),p=l*Math.ceil(Math.sqrt(s));h(e,t,o,p,this.compareMinX);for(var c=t;c<=o;c+=p){var d=Math.min(c+p-1,o);h(e,c,d,l,this.compareMinY);for(var u=c;u<=d;u+=l){var m=Math.min(u+l-1,d);n.children.push(this._build(e,u,m,r-1))}}return a(n,this.toBBox),n},r.prototype._chooseSubtree=function(e,t,o,r){for(;r.push(t),!t.leaf&&r.length-1!==o;){for(var n=1/0,a=1/0,i=void 0,s=0;s<t.children.length;s++){var l=t.children[s],p=c(l),d=(u=e,m=l,(Math.max(m.maxX,u.maxX)-Math.min(m.minX,u.minX))*(Math.max(m.maxY,u.maxY)-Math.min(m.minY,u.minY))-p);d<a?(a=d,n=p<n?p:n,i=l):d===a&&p<n&&(n=p,i=l)}t=i||t.children[0]}var u,m;return t},r.prototype._insert=function(e,t,o){var r=o?e:this.toBBox(e),n=[],a=this._chooseSubtree(r,this.data,t,n);for(a.children.push(e),s(a,r);t>=0&&n[t].children.length>this._maxEntries;)this._split(n,t),t--;this._adjustParentBBoxes(r,n,t)},r.prototype._split=function(e,t){var o=e[t],r=o.children.length,n=this._minEntries;this._chooseSplitAxis(o,n,r);var i=this._chooseSplitIndex(o,n,r),s=f(o.children.splice(i,o.children.length-i));s.height=o.height,s.leaf=o.leaf,a(o,this.toBBox),a(s,this.toBBox),t?e[t-1].children.push(s):this._splitRoot(o,s)},r.prototype._splitRoot=function(e,t){this.data=f([e,t]),this.data.height=e.height+1,this.data.leaf=!1,a(this.data,this.toBBox)},r.prototype._chooseSplitIndex=function(e,t,o){for(var r,n,a,s,l,p,d,u=1/0,m=1/0,f=t;f<=o-t;f++){var h=i(e,0,f,this.toBBox),_=i(e,f,o,this.toBBox),g=(n=h,a=_,s=Math.max(n.minX,a.minX),l=Math.max(n.minY,a.minY),p=Math.min(n.maxX,a.maxX),d=Math.min(n.maxY,a.maxY),Math.max(0,p-s)*Math.max(0,d-l)),y=c(h)+c(_);g<u?(u=g,r=f,m=y<m?y:m):g===u&&y<m&&(m=y,r=f)}return r||o-t},r.prototype._chooseSplitAxis=function(e,t,o){var r=e.leaf?this.compareMinX:l,n=e.leaf?this.compareMinY:p;this._allDistMargin(e,t,o,r)<this._allDistMargin(e,t,o,n)&&e.children.sort(r)},r.prototype._allDistMargin=function(e,t,o,r){e.children.sort(r);for(var n=this.toBBox,a=i(e,0,t,n),l=i(e,o-t,o,n),p=d(a)+d(l),c=t;c<o-t;c++){var u=e.children[c];s(a,e.leaf?n(u):u),p+=d(a)}for(var m=o-t-1;m>=t;m--){var f=e.children[m];s(l,e.leaf?n(f):f),p+=d(l)}return p},r.prototype._adjustParentBBoxes=function(e,t,o){for(var r=o;r>=0;r--)s(t[r],e)},r.prototype._condense=function(e){for(var t=e.length-1,o=void 0;t>=0;t--)0===e[t].children.length?t>0?(o=e[t-1].children).splice(o.indexOf(e[t]),1):this.clear():a(e[t],this.toBBox)},r},"object"==typeof o&&void 0!==t?t.exports=n():(r=r||self).RBush=n();var r,n},{}]},{},[1])(1)}));var markerWithLabel=function(e){"use strict";function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function r(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var o,r=a(e);if(t){var n=a(this).constructor;o=Reflect.construct(r,arguments,n)}else o=r.apply(this,arguments);return function(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?s(e):t}(this,o)}}function p(e,t,o){return(p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,o){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=a(e)););return e}(e,t);if(r){var n=Object.getOwnPropertyDescriptor(r,t);return n.get?n.get.call(o):n.value}})(e,t,o||e)}var c="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},d=function(e){return e&&e.Math==Math&&e},u=d("object"==typeof globalThis&&globalThis)||d("object"==typeof window&&window)||d("object"==typeof self&&self)||d("object"==typeof c&&c)||function(){return this}()||Function("return this")(),m={},f=function(e){try{return!!e()}catch(e){return!0}},h=!f((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),_=!f((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")})),g=_,y=Function.prototype.call,v=g?y.bind(y):function(){return y.apply(y,arguments)},b={},w={}.propertyIsEnumerable,C=Object.getOwnPropertyDescriptor,k=C&&!w.call({1:2},1);b.f=k?function(e){var t=C(this,e);return!!t&&t.enumerable}:w;var M,x,L=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},P=_,S=Function.prototype,j=S.bind,R=S.call,O=P&&j.bind(R,R),$=P?function(e){return e&&O(e)}:function(e){return e&&function(){return R.apply(e,arguments)}},E=$,A=E({}.toString),T=E("".slice),F=function(e){return T(A(e),8,-1)},H=$,I=f,z=F,Q=u.Object,D=H("".split),N=I((function(){return!Q("z").propertyIsEnumerable(0)}))?function(e){return"String"==z(e)?D(e,""):Q(e)}:Q,B=u.TypeError,G=function(e){if(null==e)throw B("Can't call method on "+e);return e},q=N,J=G,V=function(e){return q(J(e))},Z=function(e){return"function"==typeof e},W=Z,Y=function(e){return"object"==typeof e?null!==e:W(e)},X=u,U=Z,K=function(e,t){return arguments.length<2?function(e){return U(e)?e:void 0}(X[e]):X[e]&&X[e][t]},ee=$({}.isPrototypeOf),te=u,oe=K("navigator","userAgent")||"",re=te.process,ne=te.Deno,ae=re&&re.versions||ne&&ne.version,ie=ae&&ae.v8;ie&&(x=(M=ie.split("."))[0]>0&&M[0]<4?1:+(M[0]+M[1])),!x&&oe&&(!(M=oe.match(/Edge\/(\d+)/))||M[1]>=74)&&(M=oe.match(/Chrome\/(\d+)/))&&(x=+M[1]);var se=x,le=se,pe=f,ce=!!Object.getOwnPropertySymbols&&!pe((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&le&&le<41})),de=ce&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,ue=K,me=Z,fe=ee,he=de,_e=u.Object,ge=he?function(e){return"symbol"==typeof e}:function(e){var t=ue("Symbol");return me(t)&&fe(t.prototype,_e(e))},ye=u.String,ve=Z,be=u.TypeError,we=function(e){if(ve(e))return e;throw be(function(e){try{return ye(e)}catch(e){return"Object"}}(e)+" is not a function")},Ce=we,ke=v,Me=Z,xe=Y,Le=u.TypeError,Pe={exports:{}},Se=u,je=Object.defineProperty,Re=function(e,t){try{je(Se,e,{value:t,configurable:!0,writable:!0})}catch(o){Se[e]=t}return t},Oe=Re,$e="__core-js_shared__",Ee=u[$e]||Oe($e,{}),Ae=Ee;(Pe.exports=function(e,t){return Ae[e]||(Ae[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.22.2",mode:"global",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.22.2/LICENSE",source:"https://github.com/zloirock/core-js"});var Te=G,Fe=u.Object,He=function(e){return Fe(Te(e))},Ie=He,ze=$({}.hasOwnProperty),Qe=Object.hasOwn||function(e,t){return ze(Ie(e),t)},De=$,Ne=0,Be=Math.random(),Ge=De(1..toString),qe=function(e){return"Symbol("+(void 0===e?"":e)+")_"+Ge(++Ne+Be,36)},Je=u,Ve=Pe.exports,Ze=Qe,We=qe,Ye=ce,Xe=de,Ue=Ve("wks"),Ke=Je.Symbol,et=Ke&&Ke.for,tt=Xe?Ke:Ke&&Ke.withoutSetter||We,ot=function(e){if(!Ze(Ue,e)||!Ye&&"string"!=typeof Ue[e]){var t="Symbol."+e;Ye&&Ze(Ke,e)?Ue[e]=Ke[e]:Ue[e]=Xe&&et?et(t):tt(t)}return Ue[e]},rt=v,nt=Y,at=ge,it=ot,st=u.TypeError,lt=it("toPrimitive"),pt=function(e,t){if(!nt(e)||at(e))return e;var o,r=function(e,t){var o=e[t];return null==o?void 0:Ce(o)}(e,lt);if(r){if(void 0===t&&(t="default"),o=rt(r,e,t),!nt(o)||at(o))return o;throw st("Can't convert object to primitive value")}return void 0===t&&(t="number"),function(e,t){var o,r;if("string"===t&&Me(o=e.toString)&&!xe(r=ke(o,e)))return r;if(Me(o=e.valueOf)&&!xe(r=ke(o,e)))return r;if("string"!==t&&Me(o=e.toString)&&!xe(r=ke(o,e)))return r;throw Le("Can't convert object to primitive value")}(e,t)},ct=ge,dt=function(e){var t=pt(e,"string");return ct(t)?t:t+""},ut=Y,mt=u.document,ft=ut(mt)&&ut(mt.createElement),ht=function(e){return ft?mt.createElement(e):{}},_t=ht,gt=!h&&!f((function(){return 7!=Object.defineProperty(_t("div"),"a",{get:function(){return 7}}).a})),yt=h,vt=v,bt=b,wt=L,Ct=V,kt=dt,Mt=Qe,xt=gt,Lt=Object.getOwnPropertyDescriptor;m.f=yt?Lt:function(e,t){if(e=Ct(e),t=kt(t),xt)try{return Lt(e,t)}catch(e){}if(Mt(e,t))return wt(!vt(bt.f,e,t),e[t])};var Pt={},St=h&&f((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype})),jt=u,Rt=Y,Ot=jt.String,$t=jt.TypeError,Et=function(e){if(Rt(e))return e;throw $t(Ot(e)+" is not an object")},At=h,Tt=gt,Ft=St,Ht=Et,It=dt,zt=u.TypeError,Qt=Object.defineProperty,Dt=Object.getOwnPropertyDescriptor;Pt.f=At?Ft?function(e,t,o){if(Ht(e),t=It(t),Ht(o),"function"==typeof e&&"prototype"===t&&"value"in o&&"writable"in o&&!o.writable){var r=Dt(e,t);r&&r.writable&&(e[t]=o.value,o={configurable:"configurable"in o?o.configurable:r.configurable,enumerable:"enumerable"in o?o.enumerable:r.enumerable,writable:!1})}return Qt(e,t,o)}:Qt:function(e,t,o){if(Ht(e),t=It(t),Ht(o),Tt)try{return Qt(e,t,o)}catch(e){}if("get"in o||"set"in o)throw zt("Accessors not supported");return"value"in o&&(e[t]=o.value),e};var Nt=Pt,Bt=L,Gt=h?function(e,t,o){return Nt.f(e,t,Bt(1,o))}:function(e,t,o){return e[t]=o,e},qt={exports:{}},Jt=Z,Vt=Ee,Zt=$(Function.toString);Jt(Vt.inspectSource)||(Vt.inspectSource=function(e){return Zt(e)});var Wt,Yt,Xt,Ut=Vt.inspectSource,Kt=Z,eo=Ut,to=u.WeakMap,oo=Kt(to)&&/native code/.test(eo(to)),ro=Pe.exports,no=qe,ao=ro("keys"),io={},so=oo,lo=u,po=$,co=Y,uo=Gt,mo=Qe,fo=Ee,ho=io,_o="Object already initialized",go=lo.TypeError,yo=lo.WeakMap;if(so||fo.state){var vo=fo.state||(fo.state=new yo),bo=po(vo.get),wo=po(vo.has),Co=po(vo.set);Wt=function(e,t){if(wo(vo,e))throw new go(_o);return t.facade=e,Co(vo,e,t),t},Yt=function(e){return bo(vo,e)||{}},Xt=function(e){return wo(vo,e)}}else{var ko=function(e){return ao[e]||(ao[e]=no(e))}("state");ho[ko]=!0,Wt=function(e,t){if(mo(e,ko))throw new go(_o);return t.facade=e,uo(e,ko,t),t},Yt=function(e){return mo(e,ko)?e[ko]:{}},Xt=function(e){return mo(e,ko)}}var Mo={set:Wt,get:Yt,has:Xt,enforce:function(e){return Xt(e)?Yt(e):Wt(e,{})},getterFor:function(e){return function(t){var o;if(!co(t)||(o=Yt(t)).type!==e)throw go("Incompatible receiver, "+e+" required");return o}}},xo=h,Lo=Qe,Po=Function.prototype,So=xo&&Object.getOwnPropertyDescriptor,jo=Lo(Po,"name"),Ro=jo&&(!xo||xo&&So(Po,"name").configurable),Oo=u,$o=Z,Eo=Qe,Ao=Gt,To=Re,Fo=Ut,Ho=Ro,Io=Mo.get,zo=Mo.enforce,Qo=String(String).split("String");(qt.exports=function(e,t,o,r){var n,a=!!r&&!!r.unsafe,i=!!r&&!!r.enumerable,s=!!r&&!!r.noTargetGet,l=r&&void 0!==r.name?r.name:t;$o(o)&&("Symbol("===String(l).slice(0,7)&&(l="["+String(l).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!Eo(o,"name")||Ho&&o.name!==l)&&Ao(o,"name",l),(n=zo(o)).source||(n.source=Qo.join("string"==typeof l?l:""))),e!==Oo?(a?!s&&e[t]&&(i=!0):delete e[t],i?e[t]=o:Ao(e,t,o)):i?e[t]=o:To(t,o)})(Function.prototype,"toString",(function(){return $o(this)&&Io(this).source||Fo(this)}));var Do={},No=Math.ceil,Bo=Math.floor,Go=function(e){var t=+e;return t!=t||0===t?0:(t>0?Bo:No)(t)},qo=Go,Jo=Math.max,Vo=Math.min,Zo=Go,Wo=Math.min,Yo=function(e){return function(e){return e>0?Wo(Zo(e),9007199254740991):0}(e.length)},Xo=V,Uo=Yo,Ko=function(e){return function(t,o,r){var n,a=Xo(t),i=Uo(a),s=function(e,t){var o=qo(e);return o<0?Jo(o+t,0):Vo(o,t)}(r,i);if(e&&o!=o){for(;i>s;)if((n=a[s++])!=n)return!0}else for(;i>s;s++)if((e||s in a)&&a[s]===o)return e||s||0;return!e&&-1}},er={includes:Ko(!0),indexOf:Ko(!1)},tr=Qe,or=V,rr=er.indexOf,nr=io,ar=$([].push),ir=function(e,t){var o,r=or(e),n=0,a=[];for(o in r)!tr(nr,o)&&tr(r,o)&&ar(a,o);for(;t.length>n;)tr(r,o=t[n++])&&(~rr(a,o)||ar(a,o));return a},sr=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],lr=ir,pr=sr.concat("length","prototype");Do.f=Object.getOwnPropertyNames||function(e){return lr(e,pr)};var cr={};cr.f=Object.getOwnPropertySymbols;var dr=K,ur=Do,mr=cr,fr=Et,hr=$([].concat),_r=dr("Reflect","ownKeys")||function(e){var t=ur.f(fr(e)),o=mr.f;return o?hr(t,o(e)):t},gr=Qe,yr=_r,vr=m,br=Pt,wr=f,Cr=Z,kr=/#|\.prototype\./,Mr=function(e,t){var o=Lr[xr(e)];return o==Sr||o!=Pr&&(Cr(t)?wr(t):!!t)},xr=Mr.normalize=function(e){return String(e).replace(kr,".").toLowerCase()},Lr=Mr.data={},Pr=Mr.NATIVE="N",Sr=Mr.POLYFILL="P",jr=Mr,Rr=u,Or=m.f,$r=Gt,Er=qt.exports,Ar=Re,Tr=function(e,t,o){for(var r=yr(t),n=br.f,a=vr.f,i=0;i<r.length;i++){var s=r[i];gr(e,s)||o&&gr(o,s)||n(e,s,a(t,s))}},Fr=jr,Hr=function(e,t){var o,r,n,a,i,s=e.target,l=e.global,p=e.stat;if(o=l?Rr:p?Rr[s]||Ar(s,{}):(Rr[s]||{}).prototype)for(r in t){if(a=t[r],n=e.noTargetGet?(i=Or(o,r))&&i.value:o[r],!Fr(l?r:s+(p?".":"#")+r,e.forced)&&void 0!==n){if(typeof a==typeof n)continue;Tr(a,n)}(e.sham||n&&n.sham)&&$r(a,"sham",!0),Er(o,r,a,e)}},Ir=ir,zr=sr,Qr=Object.keys||function(e){return Ir(e,zr)},Dr=h,Nr=$,Br=v,Gr=f,qr=Qr,Jr=cr,Vr=b,Zr=He,Wr=N,Yr=Object.assign,Xr=Object.defineProperty,Ur=Nr([].concat),Kr=!Yr||Gr((function(){if(Dr&&1!==Yr({b:1},Yr(Xr({},"a",{enumerable:!0,get:function(){Xr(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},o=Symbol(),r="abcdefghijklmnopqrst";return e[o]=7,r.split("").forEach((function(e){t[e]=e})),7!=Yr({},e)[o]||qr(Yr({},t)).join("")!=r}))?function(e,t){for(var o=Zr(e),r=arguments.length,n=1,a=Jr.f,i=Vr.f;r>n;)for(var s,l=Wr(arguments[n++]),p=a?Ur(qr(l),a(l)):qr(l),c=p.length,d=0;c>d;)s=p[d++],Dr&&!Br(i,l,s)||(o[s]=l[s]);return o}:Yr;Hr({target:"Object",stat:!0,forced:Object.assign!==Kr},{assign:Kr});var en={};en[ot("toStringTag")]="z";var tn="[object z]"===String(en),on=u,rn=tn,nn=Z,an=F,sn=ot("toStringTag"),ln=on.Object,pn="Arguments"==an(function(){return arguments}()),cn=rn?an:function(e){var t,o,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(o=function(e,t){try{return e[t]}catch(e){}}(t=ln(e),sn))?o:pn?an(t):"Object"==(r=an(t))&&nn(t.callee)?"Arguments":r},dn=cn,un=tn?{}.toString:function(){return"[object "+dn(this)+"]"},mn=tn,fn=qt.exports,hn=un;mn||fn(Object.prototype,"toString",hn,{unsafe:!0});var _n=ht("span").classList,gn=_n&&_n.constructor&&_n.constructor.prototype,yn=gn===Object.prototype?void 0:gn,vn=we,bn=_,wn=$($.bind),Cn=F,kn=Array.isArray||function(e){return"Array"==Cn(e)},Mn=$,xn=f,Ln=Z,Pn=cn,Sn=Ut,jn=function(){},Rn=[],On=K("Reflect","construct"),$n=/^\s*(?:class|function)\b/,En=Mn($n.exec),An=!$n.exec(jn),Tn=function(e){if(!Ln(e))return!1;try{return On(jn,Rn,e),!0}catch(e){return!1}},Fn=function(e){if(!Ln(e))return!1;switch(Pn(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return An||!!En($n,Sn(e))}catch(e){return!0}};Fn.sham=!0;var Hn=!On||xn((function(){var e;return Tn(Tn.call)||!Tn(Object)||!Tn((function(){e=!0}))||e}))?Fn:Tn,In=u,zn=kn,Qn=Hn,Dn=Y,Nn=ot("species"),Bn=In.Array,Gn=N,qn=He,Jn=Yo,Vn=function(e,t){return new(function(e){var t;return zn(e)&&(t=e.constructor,(Qn(t)&&(t===Bn||zn(t.prototype))||Dn(t)&&null===(t=t[Nn]))&&(t=void 0)),void 0===t?Bn:t}(e))(0===t?0:t)},Zn=$([].push),Wn=function(e){var t=1==e,o=2==e,r=3==e,n=4==e,a=6==e,i=7==e,s=5==e||a;return function(l,p,c,d){for(var u,m,f=qn(l),h=Gn(f),_=function(e,t){return vn(e),void 0===t?e:bn?wn(e,t):function(){return e.apply(t,arguments)}}(p,c),g=Jn(h),y=0,v=d||Vn,b=t?v(l,g):o||i?v(l,0):void 0;g>y;y++)if((s||y in h)&&(m=_(u=h[y],y,f),e))if(t)b[y]=m;else if(m)switch(e){case 3:return!0;case 5:return u;case 6:return y;case 2:Zn(b,u)}else switch(e){case 4:return!1;case 7:Zn(b,u)}return a?-1:r||n?n:b}},Yn={forEach:Wn(0),map:Wn(1),filter:Wn(2),some:Wn(3),every:Wn(4),find:Wn(5),findIndex:Wn(6),filterReject:Wn(7)},Xn=f,Un=Yn.forEach,Kn=u,ea={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},ta=yn,oa=function(e,t){var o=[].forEach;return!!o&&Xn((function(){o.call(null,(function(){return 1}),1)}))}()?[].forEach:function(e){return Un(this,e,arguments.length>1?arguments[1]:void 0)},ra=Gt,na=function(e){if(e&&e.forEach!==oa)try{ra(e,"forEach",oa)}catch(t){e.forEach=oa}};for(var aa in ea)ea[aa]&&na(Kn[aa]&&Kn[aa].prototype);function ia(e,t){for(var o in t.prototype)e.prototype[o]=t.prototype[o]}function sa(e){(e=e||window.event).stopPropagation?e.stopPropagation():e.cancelBubble=!0,e.preventDefault?e.preventDefault():e.returnValue=!1}function la(e){(e=e||window.event).stopPropagation?e.stopPropagation():e.cancelBubble=!0}na(ta);var pa=f,ca=se,da=ot("species"),ua=Yn.map;Hr({target:"Array",proto:!0,forced:!(ca>=51||!pa((function(){var e=[];return(e.constructor={})[da]=function(){return{foo:1}},1!==e.map(Boolean).foo})))},{map:function(e){return ua(this,e,arguments.length>1?arguments[1]:void 0)}});var ma=cn,fa=u.String,ha=G,_a=function(e){if("Symbol"===ma(e))throw TypeError("Cannot convert a Symbol value to a string");return fa(e)},ga=/"/g,ya=$("".replace);Hr({target:"String",proto:!0,forced:f((function(){var e="".anchor('"');return e!==e.toLowerCase()||e.split('"').length>3}))},{anchor:function(e){return function(e,t,o,r){var n=_a(ha(e)),a="<"+t;return""!==o&&(a+=" "+o+'="'+ya(_a(r),ga,"&quot;")+'"'),a+">"+n+"</"+t+">"}(this,"a","name",e)}});var va="block",ba="none",wa="absolute",Ca="marker-label",ka="marker-label-event",Ma=function(e){n(a,e);var o=l(a);function a(e){var r,n=e.clickable,i=void 0===n||n,s=e.cursor,l=void 0===s?"pointer":s,p=e.draggable,c=void 0===p||p,d=e.labelAnchor,u=void 0===d?new google.maps.Point(0,0):d,m=e.labelClass,f=void 0===m?Ca:m,h=e.labelContent,_=e.position,g=e.opacity,y=void 0===g?1:g,v=e.map,b=e.labelZIndexOffset,w=void 0===b?1:b,C=e.visible,k=void 0===C||C,M=e.zIndex,x=void 0===M?0:M;return t(this,a),(r=o.call(this)).createElements(),r.anchor=u,r.content=h,r.className=f,r.clickable=i,r.cursor=l,r.draggable=c,_ instanceof google.maps.LatLng?r.position=_:r.position=new google.maps.LatLng(_),r.opacity=y,r.visible=k,r.zIndex=x,r.zIndexOffset=w,v&&r.setMap(v),r}return r(a,[{key:"element",get:function(){return this.labelDiv}},{key:"content",get:function(){return this.labelDiv.innerHTML},set:function(e){"string"==typeof e?(this.labelDiv.innerHTML=e,this.eventDiv.innerHTML=e):(this.labelDiv.innerHTML="",this.labelDiv.appendChild(e),this.eventDiv.innerHTML="",this.eventDiv.appendChild(e.cloneNode(!0)))}},{key:"className",get:function(){return this.labelDiv.className},set:function(e){this.labelDiv.className=e,this.labelDiv.classList.add(Ca),this.eventDiv.className=e,this.eventDiv.classList.add(ka)}},{key:"cursor",get:function(){return this.isInteractive?this.hoverCursor:"inherit"},set:function(e){this.hoverCursor=e,this.isInteractive&&(this.eventDiv.style.cursor=e)}},{key:"isInteractive",get:function(){return this.draggable||this.clickable}},{key:"opacity",set:function(e){this.labelDiv.style.opacity=String(e)}},{key:"title",set:function(e){this.eventDiv.title=e}},{key:"visible",set:function(e){e?(this.labelDiv.style.display=va,this.eventDiv.style.display=va):(this.labelDiv.style.display=ba,this.eventDiv.style.display=ba)}},{key:"onAdd",value:function(){this.getPanes().markerLayer.appendChild(this.labelDiv),this.getPanes().overlayMouseTarget.appendChild(this.eventDiv)}},{key:"draw",value:function(){var e=this.getProjection().fromLatLngToDivPixel(this.position),t=Math.round(e.x+this.anchor.x),o=Math.round(e.y+this.anchor.y);this.labelDiv.style.left="".concat(t,"px"),this.labelDiv.style.top="".concat(o,"px"),this.eventDiv.style.left=this.labelDiv.style.left,this.eventDiv.style.top=this.labelDiv.style.top;var r=(this.zIndex||Math.ceil(e.y))+this.zIndexOffset;this.labelDiv.style.zIndex=String(r),this.eventDiv.style.zIndex=String(r),this.eventDiv.style.display=this.isInteractive?this.eventDiv.style.display:ba,this.eventDiv.style.cursor=this.cursor}},{key:"addDomListener",value:function(e,t){return google.maps.event.addDomListener(this.eventDiv,e,t)}},{key:"onRemove",value:function(){this.labelDiv.parentNode.removeChild(this.labelDiv),this.eventDiv.parentNode.removeChild(this.eventDiv)}},{key:"createElements",value:function(){this.labelDiv=document.createElement("div"),this.eventDiv=document.createElement("div"),this.labelDiv.classList.add(Ca),this.labelDiv.classList.add(ka),this.labelDiv.style.position=wa,this.eventDiv.style.position=wa,this.eventDiv.style.opacity="0.01"}}]),a}(r((function e(){t(this,e),ia(e,google.maps.OverlayView)}))),xa="click",La="dblclick",Pa="drag",Sa="dragend",ja="dragstart",Ra="mousedown",Oa="mouseover",$a="mouseout",Ea="mouseup",Aa=function(e){n(i,e);var o=l(i);function i(e){var r;return t(this,i),(r=o.call(this,function(e,t){var o=Object.assign({},e);return["labelAnchor","labelZIndexOffset","labelClass","labelContent"].forEach((function(e){return delete o[e]})),o}(e))).isTouchScreen=!1,r.isDraggingLabel=!1,r.isMouseDownOnLabel=!1,r.shouldIgnoreClick=!1,r.label=new Ma(Object.assign({},e)),r.propertyListeners=[google.maps.event.addListener(s(r),"clickable_changed",r.handleClickableOrDraggableChange),google.maps.event.addListener(s(r),"cursor_changed",(function(){r.label.cursor=r.getCursor()})),google.maps.event.addListener(s(r),"draggable_changed",r.handleClickableOrDraggableChange),google.maps.event.addListener(s(r),"position_changed",(function(){r.label.position=r.getPosition()})),google.maps.event.addListener(s(r),"opacity_changed",(function(){r.label.opacity=r.getOpacity()})),google.maps.event.addListener(s(r),"title_changed",(function(){r.label.title=r.getTitle()})),google.maps.event.addListener(s(r),"visible_changed",(function(){r.label.visible=r.getVisible()})),google.maps.event.addListener(s(r),"zindex_changed",(function(){r.label.zIndex=r.getZIndex(),r.label.draw()}))],r}return r(i,[{key:"isInteractive",get:function(){return this.getClickable()||this.getDraggable()}},{key:"labelElement",get:function(){return this.label.element}},{key:"labelContent",get:function(){return this.label.content},set:function(e){this.label.content=e}},{key:"labelClass",get:function(){return this.label.className},set:function(e){this.label.className=e}},{key:"setMap",value:function(e){var t=this;p(a(i.prototype),"setMap",this).call(this,e),setTimeout((function(){t.label.setMap(e),t.removeInteractiveListeners(),e&&t.addInteractiveListeners()}))}},{key:"handleClickableOrDraggableChange",value:function(){this.label.clickable=this.getClickable(),this.label.draggable=this.getDraggable(),this.isInteractive?this.addInteractiveListeners():this.removeInteractiveListeners()}},{key:"removeInteractiveListeners",value:function(){this.interactiveListeners&&(this.interactiveListeners.forEach((function(e){return google.maps.event.removeListener(e)})),this.interactiveListeners=null)}},{key:"addInteractiveListeners",value:function(){var e=this;if(!this.interactiveListeners){if(!this.getMap())return;this.interactiveListeners=[this.label.addDomListener(Oa,(function(t){e.isTouchScreen||(google.maps.event.trigger(e,Oa,{latLng:e.getPosition()}),sa(t))})),this.label.addDomListener($a,(function(t){e.isTouchScreen||(e.mouseOutTimeout&&clearTimeout(e.mouseOutTimeout),e.isMouseDownOnLabel?e.mouseOutTimeout=setTimeout((function(){e.isMouseDownOnLabel&&(e.isMouseDownOnLabel=!1,google.maps.event.trigger(e,Ea,{latLng:e.getPosition()}),e.isDraggingLabel&&(e.isDraggingLabel=!1,e.shouldIgnoreClick=!0,google.maps.event.trigger(e,Sa,{latLng:e.getPosition()}))),google.maps.event.trigger(e,$a,{latLng:e.getPosition()})}),200):google.maps.event.trigger(e,$a,{latLng:e.getPosition()}),sa(t))})),this.label.addDomListener(Ra,(function(t){e.isDraggingLabel=!1,e.isMouseDownOnLabel=!0,google.maps.event.trigger(e,Ra,{latLng:e.getPosition()}),e.isTouchScreen||sa(t)})),this.label.addDomListener(Ea,(function(t){var o={latLng:e.getPosition()};e.isMouseDownOnLabel&&(e.isMouseDownOnLabel=!1,google.maps.event.trigger(e,Ea,o),e.isDraggingLabel&&(e.isDraggingLabel=!1,e.shouldIgnoreClick=!0,google.maps.event.trigger(e,Sa,o)),e.getDraggable()||sa(t))})),this.label.addDomListener(xa,(function(t){e.shouldIgnoreClick?e.shouldIgnoreClick=!1:google.maps.event.trigger(e,xa,{latLng:e.getPosition()}),sa(t)})),this.label.addDomListener(La,(function(t){google.maps.event.trigger(e,La,{latLng:e.getPosition()}),sa(t)})),google.maps.event.addListener(this.getMap(),"mousemove",(function(t){if(e.isMouseDownOnLabel&&e.getDraggable())if(e.isDraggingLabel){var o=new google.maps.LatLng(t.latLng.lat()-e.eventOffset.y,t.latLng.lng()-e.eventOffset.x);google.maps.event.trigger(e,Pa,Object.assign(Object.assign({},t),{latLng:o}))}else e.isDraggingLabel=!0,e.eventOffset=new google.maps.Point(t.latLng.lng()-e.getPosition().lng(),t.latLng.lat()-e.getPosition().lat()),google.maps.event.trigger(e,ja,Object.assign(Object.assign({},t),{latLng:e.getPosition()}))})),google.maps.event.addListener(this,ja,(function(){e.label.zIndex=1e6})),google.maps.event.addListener(this,Pa,(function(t){var o=t.latLng;e.setPosition(o)})),google.maps.event.addListener(this,Sa,(function(){e.label.zIndex=e.getZIndex(),e.label.draw()})),this.label.addDomListener("touchstart",(function(t){e.isTouchScreen=!0,la(t)})),this.label.addDomListener("touchmove",(function(e){la(e)})),this.label.addDomListener("touchend",(function(e){la(e)}))]}}}]),i}(r((function e(o){t(this,e),ia(e,google.maps.Marker),google.maps.Marker.call(this,o)})));return e.MarkerWithLabel=Aa,Object.defineProperty(e,"__esModule",{value:!0}),e}({}),markerClusterer=function(e){"use strict";function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function r(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var o,r=a(e);if(t){var n=a(this).constructor;o=Reflect.construct(r,arguments,n)}else o=r.apply(this,arguments);return function(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,o)}}function l(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||p(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){if(e){if("string"==typeof e)return c(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,r=new Array(t);o<t;o++)r[o]=e[o];return r}var d="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},u=function(e){return e&&e.Math==Math&&e},m=u("object"==typeof globalThis&&globalThis)||u("object"==typeof window&&window)||u("object"==typeof self&&self)||u("object"==typeof d&&d)||function(){return this}()||Function("return this")(),f={},h=function(e){try{return!!e()}catch(e){return!0}},_=!h((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),g=!h((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")})),y=g,v=Function.prototype.call,b=y?v.bind(v):function(){return v.apply(v,arguments)},w={},C={}.propertyIsEnumerable,k=Object.getOwnPropertyDescriptor,M=k&&!C.call({1:2},1);w.f=M?function(e){var t=k(this,e);return!!t&&t.enumerable}:C;var x,L,P=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},S=g,j=Function.prototype,R=j.bind,O=j.call,$=S&&R.bind(O,O),E=S?function(e){return e&&$(e)}:function(e){return e&&function(){return O.apply(e,arguments)}},A=E,T=A({}.toString),F=A("".slice),H=function(e){return F(T(e),8,-1)},I=E,z=h,Q=H,D=m.Object,N=I("".split),B=z((function(){return!D("z").propertyIsEnumerable(0)}))?function(e){return"String"==Q(e)?N(e,""):D(e)}:D,G=m.TypeError,q=function(e){if(null==e)throw G("Can't call method on "+e);return e},J=B,V=q,Z=function(e){return J(V(e))},W=function(e){return"function"==typeof e},Y=W,X=function(e){return"object"==typeof e?null!==e:Y(e)},U=m,K=W,ee=function(e,t){return arguments.length<2?function(e){return K(e)?e:void 0}(U[e]):U[e]&&U[e][t]},te=E({}.isPrototypeOf),oe=m,re=ee("navigator","userAgent")||"",ne=oe.process,ae=oe.Deno,ie=ne&&ne.versions||ae&&ae.version,se=ie&&ie.v8;se&&(L=(x=se.split("."))[0]>0&&x[0]<4?1:+(x[0]+x[1])),!L&&re&&(!(x=re.match(/Edge\/(\d+)/))||x[1]>=74)&&(x=re.match(/Chrome\/(\d+)/))&&(L=+x[1]);var le=L,pe=le,ce=h,de=!!Object.getOwnPropertySymbols&&!ce((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&pe&&pe<41})),ue=de&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,me=ee,fe=W,he=te,_e=ue,ge=m.Object,ye=_e?function(e){return"symbol"==typeof e}:function(e){var t=me("Symbol");return fe(t)&&he(t.prototype,ge(e))},ve=m.String,be=W,we=m.TypeError,Ce=function(e){if(be(e))return e;throw we(function(e){try{return ve(e)}catch(e){return"Object"}}(e)+" is not a function")},ke=Ce,Me=b,xe=W,Le=X,Pe=m.TypeError,Se={exports:{}},je=m,Re=Object.defineProperty,Oe=function(e,t){try{Re(je,e,{value:t,configurable:!0,writable:!0})}catch(o){je[e]=t}return t},$e=Oe,Ee="__core-js_shared__",Ae=m[Ee]||$e(Ee,{}),Te=Ae;(Se.exports=function(e,t){return Te[e]||(Te[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.22.2",mode:"global",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.22.2/LICENSE",source:"https://github.com/zloirock/core-js"});var Fe=q,He=m.Object,Ie=function(e){return He(Fe(e))},ze=Ie,Qe=E({}.hasOwnProperty),De=Object.hasOwn||function(e,t){return Qe(ze(e),t)},Ne=E,Be=0,Ge=Math.random(),qe=Ne(1..toString),Je=function(e){return"Symbol("+(void 0===e?"":e)+")_"+qe(++Be+Ge,36)},Ve=m,Ze=Se.exports,We=De,Ye=Je,Xe=de,Ue=ue,Ke=Ze("wks"),et=Ve.Symbol,tt=et&&et.for,ot=Ue?et:et&&et.withoutSetter||Ye,rt=function(e){if(!We(Ke,e)||!Xe&&"string"!=typeof Ke[e]){var t="Symbol."+e;Xe&&We(et,e)?Ke[e]=et[e]:Ke[e]=Ue&&tt?tt(t):ot(t)}return Ke[e]},nt=b,at=X,it=ye,st=rt,lt=m.TypeError,pt=st("toPrimitive"),ct=function(e,t){if(!at(e)||it(e))return e;var o,r=function(e,t){var o=e[t];return null==o?void 0:ke(o)}(e,pt);if(r){if(void 0===t&&(t="default"),o=nt(r,e,t),!at(o)||it(o))return o;throw lt("Can't convert object to primitive value")}return void 0===t&&(t="number"),function(e,t){var o,r;if("string"===t&&xe(o=e.toString)&&!Le(r=Me(o,e)))return r;if(xe(o=e.valueOf)&&!Le(r=Me(o,e)))return r;if("string"!==t&&xe(o=e.toString)&&!Le(r=Me(o,e)))return r;throw Pe("Can't convert object to primitive value")}(e,t)},dt=ct,ut=ye,mt=function(e){var t=dt(e,"string");return ut(t)?t:t+""},ft=X,ht=m.document,_t=ft(ht)&&ft(ht.createElement),gt=function(e){return _t?ht.createElement(e):{}},yt=gt,vt=!_&&!h((function(){return 7!=Object.defineProperty(yt("div"),"a",{get:function(){return 7}}).a})),bt=_,wt=b,Ct=w,kt=P,Mt=Z,xt=mt,Lt=De,Pt=vt,St=Object.getOwnPropertyDescriptor;f.f=bt?St:function(e,t){if(e=Mt(e),t=xt(t),Pt)try{return St(e,t)}catch(e){}if(Lt(e,t))return kt(!wt(Ct.f,e,t),e[t])};var jt={},Rt=_&&h((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype})),Ot=m,$t=X,Et=Ot.String,At=Ot.TypeError,Tt=function(e){if($t(e))return e;throw At(Et(e)+" is not an object")},Ft=_,Ht=vt,It=Rt,zt=Tt,Qt=mt,Dt=m.TypeError,Nt=Object.defineProperty,Bt=Object.getOwnPropertyDescriptor;jt.f=Ft?It?function(e,t,o){if(zt(e),t=Qt(t),zt(o),"function"==typeof e&&"prototype"===t&&"value"in o&&"writable"in o&&!o.writable){var r=Bt(e,t);r&&r.writable&&(e[t]=o.value,o={configurable:"configurable"in o?o.configurable:r.configurable,enumerable:"enumerable"in o?o.enumerable:r.enumerable,writable:!1})}return Nt(e,t,o)}:Nt:function(e,t,o){if(zt(e),t=Qt(t),zt(o),Ht)try{return Nt(e,t,o)}catch(e){}if("get"in o||"set"in o)throw Dt("Accessors not supported");return"value"in o&&(e[t]=o.value),e};var Gt=jt,qt=P,Jt=_?function(e,t,o){return Gt.f(e,t,qt(1,o))}:function(e,t,o){return e[t]=o,e},Vt={exports:{}},Zt=W,Wt=Ae,Yt=E(Function.toString);Zt(Wt.inspectSource)||(Wt.inspectSource=function(e){return Yt(e)});var Xt,Ut,Kt,eo=Wt.inspectSource,to=W,oo=eo,ro=m.WeakMap,no=to(ro)&&/native code/.test(oo(ro)),ao=Se.exports,io=Je,so=ao("keys"),lo=function(e){return so[e]||(so[e]=io(e))},po={},co=no,uo=m,mo=E,fo=X,ho=Jt,_o=De,go=Ae,yo=lo,vo=po,bo="Object already initialized",wo=uo.TypeError,Co=uo.WeakMap;if(co||go.state){var ko=go.state||(go.state=new Co),Mo=mo(ko.get),xo=mo(ko.has),Lo=mo(ko.set);Xt=function(e,t){if(xo(ko,e))throw new wo(bo);return t.facade=e,Lo(ko,e,t),t},Ut=function(e){return Mo(ko,e)||{}},Kt=function(e){return xo(ko,e)}}else{var Po=yo("state");vo[Po]=!0,Xt=function(e,t){if(_o(e,Po))throw new wo(bo);return t.facade=e,ho(e,Po,t),t},Ut=function(e){return _o(e,Po)?e[Po]:{}},Kt=function(e){return _o(e,Po)}}var So={set:Xt,get:Ut,has:Kt,enforce:function(e){return Kt(e)?Ut(e):Xt(e,{})},getterFor:function(e){return function(t){var o;if(!fo(t)||(o=Ut(t)).type!==e)throw wo("Incompatible receiver, "+e+" required");return o}}},jo=_,Ro=De,Oo=Function.prototype,$o=jo&&Object.getOwnPropertyDescriptor,Eo=Ro(Oo,"name"),Ao=Eo&&(!jo||jo&&$o(Oo,"name").configurable),To=m,Fo=W,Ho=De,Io=Jt,zo=Oe,Qo=eo,Do=Ao,No=So.get,Bo=So.enforce,Go=String(String).split("String");(Vt.exports=function(e,t,o,r){var n,a=!!r&&!!r.unsafe,i=!!r&&!!r.enumerable,s=!!r&&!!r.noTargetGet,l=r&&void 0!==r.name?r.name:t;Fo(o)&&("Symbol("===String(l).slice(0,7)&&(l="["+String(l).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!Ho(o,"name")||Do&&o.name!==l)&&Io(o,"name",l),(n=Bo(o)).source||(n.source=Go.join("string"==typeof l?l:""))),e!==To?(a?!s&&e[t]&&(i=!0):delete e[t],i?e[t]=o:Io(e,t,o)):i?e[t]=o:zo(t,o)})(Function.prototype,"toString",(function(){return Fo(this)&&No(this).source||Qo(this)}));var qo={},Jo=Math.ceil,Vo=Math.floor,Zo=function(e){var t=+e;return t!=t||0===t?0:(t>0?Vo:Jo)(t)},Wo=Zo,Yo=Math.max,Xo=Math.min,Uo=function(e,t){var o=Wo(e);return o<0?Yo(o+t,0):Xo(o,t)},Ko=Zo,er=Math.min,tr=function(e){return function(e){return e>0?er(Ko(e),9007199254740991):0}(e.length)},or=Z,rr=Uo,nr=tr,ar=function(e){return function(t,o,r){var n,a=or(t),i=nr(a),s=rr(r,i);if(e&&o!=o){for(;i>s;)if((n=a[s++])!=n)return!0}else for(;i>s;s++)if((e||s in a)&&a[s]===o)return e||s||0;return!e&&-1}},ir={includes:ar(!0),indexOf:ar(!1)},sr=De,lr=Z,pr=ir.indexOf,cr=po,dr=E([].push),ur=function(e,t){var o,r=lr(e),n=0,a=[];for(o in r)!sr(cr,o)&&sr(r,o)&&dr(a,o);for(;t.length>n;)sr(r,o=t[n++])&&(~pr(a,o)||dr(a,o));return a},mr=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],fr=ur,hr=mr.concat("length","prototype");qo.f=Object.getOwnPropertyNames||function(e){return fr(e,hr)};var _r={};_r.f=Object.getOwnPropertySymbols;var gr=ee,yr=qo,vr=_r,br=Tt,wr=E([].concat),Cr=gr("Reflect","ownKeys")||function(e){var t=yr.f(br(e)),o=vr.f;return o?wr(t,o(e)):t},kr=De,Mr=Cr,xr=f,Lr=jt,Pr=h,Sr=W,jr=/#|\.prototype\./,Rr=function(e,t){var o=$r[Or(e)];return o==Ar||o!=Er&&(Sr(t)?Pr(t):!!t)},Or=Rr.normalize=function(e){return String(e).replace(jr,".").toLowerCase()},$r=Rr.data={},Er=Rr.NATIVE="N",Ar=Rr.POLYFILL="P",Tr=Rr,Fr=m,Hr=f.f,Ir=Jt,zr=Vt.exports,Qr=Oe,Dr=function(e,t,o){for(var r=Mr(t),n=Lr.f,a=xr.f,i=0;i<r.length;i++){var s=r[i];kr(e,s)||o&&kr(o,s)||n(e,s,a(t,s))}},Nr=Tr,Br=function(e,t){var o,r,n,a,i,s=e.target,l=e.global,p=e.stat;if(o=l?Fr:p?Fr[s]||Qr(s,{}):(Fr[s]||{}).prototype)for(r in t){if(a=t[r],n=e.noTargetGet?(i=Hr(o,r))&&i.value:o[r],!Nr(l?r:s+(p?".":"#")+r,e.forced)&&void 0!==n){if(typeof a==typeof n)continue;Dr(a,n)}(e.sham||n&&n.sham)&&Ir(a,"sham",!0),zr(o,r,a,e)}},Gr=Ce,qr=g,Jr=E(E.bind),Vr=H,Zr=Array.isArray||function(e){return"Array"==Vr(e)},Wr={};Wr[rt("toStringTag")]="z";var Yr="[object z]"===String(Wr),Xr=m,Ur=Yr,Kr=W,en=H,tn=rt("toStringTag"),on=Xr.Object,rn="Arguments"==en(function(){return arguments}()),nn=Ur?en:function(e){var t,o,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(o=function(e,t){try{return e[t]}catch(e){}}(t=on(e),tn))?o:rn?en(t):"Object"==(r=en(t))&&Kr(t.callee)?"Arguments":r},an=E,sn=h,ln=W,pn=nn,cn=eo,dn=function(){},un=[],mn=ee("Reflect","construct"),fn=/^\s*(?:class|function)\b/,hn=an(fn.exec),_n=!fn.exec(dn),gn=function(e){if(!ln(e))return!1;try{return mn(dn,un,e),!0}catch(e){return!1}},yn=function(e){if(!ln(e))return!1;switch(pn(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return _n||!!hn(fn,cn(e))}catch(e){return!0}};yn.sham=!0;var vn=!mn||sn((function(){var e;return gn(gn.call)||!gn(Object)||!gn((function(){e=!0}))||e}))?yn:gn,bn=m,wn=Zr,Cn=vn,kn=X,Mn=rt("species"),xn=bn.Array,Ln=function(e,t){return new(function(e){var t;return wn(e)&&(t=e.constructor,(Cn(t)&&(t===xn||wn(t.prototype))||kn(t)&&null===(t=t[Mn]))&&(t=void 0)),void 0===t?xn:t}(e))(0===t?0:t)},Pn=B,Sn=Ie,jn=tr,Rn=Ln,On=E([].push),$n=function(e){var t=1==e,o=2==e,r=3==e,n=4==e,a=6==e,i=7==e,s=5==e||a;return function(l,p,c,d){for(var u,m,f=Sn(l),h=Pn(f),_=function(e,t){return Gr(e),void 0===t?e:qr?Jr(e,t):function(){return e.apply(t,arguments)}}(p,c),g=jn(h),y=0,v=d||Rn,b=t?v(l,g):o||i?v(l,0):void 0;g>y;y++)if((s||y in h)&&(m=_(u=h[y],y,f),e))if(t)b[y]=m;else if(m)switch(e){case 3:return!0;case 5:return u;case 6:return y;case 2:On(b,u)}else switch(e){case 4:return!1;case 7:On(b,u)}return a?-1:r||n?n:b}},En={forEach:$n(0),map:$n(1),filter:$n(2),some:$n(3),every:$n(4),find:$n(5),findIndex:$n(6),filterReject:$n(7)},An=h,Tn=le,Fn=rt("species"),Hn=function(e){return Tn>=51||!An((function(){var t=[];return(t.constructor={})[Fn]=function(){return{foo:1}},1!==t[e](Boolean).foo}))},In=En.map;function zn(e,t){var o={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(o[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(o[r[n]]=e[r[n]])}return o}Br({target:"Array",proto:!0,forced:!Hn("map")},{map:function(e){return In(this,e,arguments.length>1?arguments[1]:void 0)}});var Qn=Ce,Dn=Ie,Nn=B,Bn=tr,Gn=m.TypeError,qn=function(e){return function(t,o,r,n){Qn(o);var a=Dn(t),i=Nn(a),s=Bn(a),l=e?s-1:0,p=e?-1:1;if(r<2)for(;;){if(l in i){n=i[l],l+=p;break}if(l+=p,e?l<0:s<=l)throw Gn("Reduce of empty array with no initial value")}for(;e?l>=0:s>l;l+=p)l in i&&(n=o(n,i[l],l,a));return n}},Jn={left:qn(!1),right:qn(!0)},Vn=h,Zn=function(e,t){var o=[][e];return!!o&&Vn((function(){o.call(null,t||function(){return 1},1)}))},Wn="process"==H(m.process),Yn=Jn.left,Xn=le,Un=Wn;Br({target:"Array",proto:!0,forced:!Zn("reduce")||!Un&&Xn>79&&Xn<83},{reduce:function(e){var t=arguments.length;return Yn(this,e,t,t>1?arguments[1]:void 0)}});var Kn=nn,ea=Yr?{}.toString:function(){return"[object "+Kn(this)+"]"},ta=Yr,oa=Vt.exports,ra=ea;ta||oa(Object.prototype,"toString",ra,{unsafe:!0});var na=En.filter;Br({target:"Array",proto:!0,forced:!Hn("filter")},{filter:function(e){return na(this,e,arguments.length>1?arguments[1]:void 0)}});var aa=function(){function e(o){var r=o.markers,n=o.position;t(this,e),this.markers=r,n&&(n instanceof google.maps.LatLng?this._position=n:this._position=new google.maps.LatLng(n))}return r(e,[{key:"bounds",get:function(){if(0!==this.markers.length||this._position)return this.markers.reduce((function(e,t){return e.extend(t.getPosition())}),new google.maps.LatLngBounds(this._position,this._position))}},{key:"position",get:function(){return this._position||this.bounds.getCenter()}},{key:"count",get:function(){return this.markers.filter((function(e){return e.getVisible()})).length}},{key:"push",value:function(e){this.markers.push(e)}},{key:"delete",value:function(){this.marker&&(this.marker.setMap(null),delete this.marker),this.markers.length=0}}]),e}(),ia=function(e,t,o,r){var n=sa(e.getBounds(),t,r);return o.filter((function(e){return n.contains(e.getPosition())}))},sa=function(e,t,o){var r=pa(e,t),n=r.northEast,a=r.southWest,i=ca({northEast:n,southWest:a},o);return da(i,t)},la=function(e,t){var o=(t.lat-e.lat)*Math.PI/180,r=(t.lng-e.lng)*Math.PI/180,n=Math.sin(o/2)*Math.sin(o/2)+Math.cos(e.lat*Math.PI/180)*Math.cos(t.lat*Math.PI/180)*Math.sin(r/2)*Math.sin(r/2);return 2*Math.atan2(Math.sqrt(n),Math.sqrt(1-n))*6371},pa=function(e,t){return{northEast:t.fromLatLngToDivPixel(e.getNorthEast()),southWest:t.fromLatLngToDivPixel(e.getSouthWest())}},ca=function(e,t){var o=e.northEast,r=e.southWest;return o.x+=t,o.y-=t,r.x-=t,r.y+=t,{northEast:o,southWest:r}},da=function(e,t){var o=e.northEast,r=e.southWest,n=new google.maps.LatLngBounds;return n.extend(t.fromDivPixelToLatLng(o)),n.extend(t.fromDivPixelToLatLng(r)),n},ua=function(){function e(o){var r=o.maxZoom,n=void 0===r?16:r;t(this,e),this.maxZoom=n}return r(e,[{key:"noop",value:function(e){var t=e.markers;return fa(t)}}]),e}(),ma=function(e){n(a,e);var o=s(a);function a(e){var r;t(this,a);var n=e.viewportPadding,i=void 0===n?60:n,s=zn(e,["viewportPadding"]);return(r=o.call(this,s)).viewportPadding=60,r.viewportPadding=i,r}return r(a,[{key:"calculate",value:function(e){var t=e.markers,o=e.map,r=e.mapCanvasProjection;return o.getZoom()>=this.maxZoom?{clusters:this.noop({markers:t,map:o,mapCanvasProjection:r}),changed:!1}:{clusters:this.cluster({markers:ia(o,r,t,this.viewportPadding),map:o,mapCanvasProjection:r})}}}]),a}(ua),fa=function(e){return e.map((function(e){return new aa({position:e.getPosition(),markers:[e]})}))},ha=gt("span").classList,_a=ha&&ha.constructor&&ha.constructor.prototype,ga=_a===Object.prototype?void 0:_a,ya=En.forEach,va=m,ba={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},wa=ga,Ca=Zn("forEach")?[].forEach:function(e){return ya(this,e,arguments.length>1?arguments[1]:void 0)},ka=Jt,Ma=function(e){if(e&&e.forEach!==Ca)try{ka(e,"forEach",Ca)}catch(t){e.forEach=Ca}};for(var xa in ba)ba[xa]&&Ma(va[xa]&&va[xa].prototype);Ma(wa);var La=b;Br({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return La(URL.prototype.toString,this)}});var Pa=function(e){n(a,e);var o=s(a);function a(e){var r;t(this,a);var n=e.maxDistance,i=void 0===n?4e4:n,s=e.gridSize,l=void 0===s?40:s,p=zn(e,["maxDistance","gridSize"]);return(r=o.call(this,p)).clusters=[],r.maxDistance=i,r.gridSize=l,r}return r(a,[{key:"cluster",value:function(e){var t=this,o=e.markers,r=e.map,n=e.mapCanvasProjection;return this.clusters=[],o.forEach((function(e){t.addToClosestCluster(e,r,n)})),this.clusters}},{key:"addToClosestCluster",value:function(e,t,o){for(var r=this.maxDistance,n=null,a=0;a<this.clusters.length;a++){var i=this.clusters[a],s=la(i.bounds.getCenter().toJSON(),e.getPosition().toJSON());s<r&&(r=s,n=i)}if(n&&sa(n.bounds,o,this.gridSize).contains(e.getPosition()))n.push(e);else{var l=new aa({markers:[e]});this.clusters.push(l)}}}]),a}(ma),Sa=function(e){n(a,e);var o=s(a);function a(e){t(this,a);var r=zn(e,[]);return o.call(this,r)}return r(a,[{key:"calculate",value:function(e){var t=e.markers,o=e.map,r=e.mapCanvasProjection;return{clusters:this.cluster({markers:t,map:o,mapCanvasProjection:r}),changed:!1}}},{key:"cluster",value:function(e){return this.noop(e)}}]),a}(ua),ja=ur,Ra=mr,Oa=Object.keys||function(e){return ja(e,Ra)},$a=_,Ea=E,Aa=b,Ta=h,Fa=Oa,Ha=_r,Ia=w,za=Ie,Qa=B,Da=Object.assign,Na=Object.defineProperty,Ba=Ea([].concat),Ga=!Da||Ta((function(){if($a&&1!==Da({b:1},Da(Na({},"a",{enumerable:!0,get:function(){Na(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},o=Symbol(),r="abcdefghijklmnopqrst";return e[o]=7,r.split("").forEach((function(e){t[e]=e})),7!=Da({},e)[o]||Fa(Da({},t)).join("")!=r}))?function(e,t){for(var o=za(e),r=arguments.length,n=1,a=Ha.f,i=Ia.f;r>n;)for(var s,l=Qa(arguments[n++]),p=a?Ba(Fa(l),a(l)):Fa(l),c=p.length,d=0;c>d;)s=p[d++],$a&&!Aa(i,l,s)||(o[s]=l[s]);return o}:Da;Br({target:"Object",stat:!0,forced:Object.assign!==Ga},{assign:Ga});var qa={exports:{}};qa.exports=function(){function e(o,r,n,a,i,s){if(!(i-a<=n)){var l=a+i>>1;t(o,r,l,a,i,s%2),e(o,r,n,a,l-1,s+1),e(o,r,n,l+1,i,s+1)}}function t(e,r,n,a,i,s){for(;i>a;){if(i-a>600){var l=i-a+1,p=n-a+1,c=Math.log(l),d=.5*Math.exp(2*c/3),u=.5*Math.sqrt(c*d*(l-d)/l)*(p-l/2<0?-1:1);t(e,r,n,Math.max(a,Math.floor(n-p*d/l+u)),Math.min(i,Math.floor(n+(l-p)*d/l+u)),s)}var m=r[2*n+s],f=a,h=i;for(o(e,r,a,n),r[2*i+s]>m&&o(e,r,a,i);f<h;){for(o(e,r,f,h),f++,h--;r[2*f+s]<m;)f++;for(;r[2*h+s]>m;)h--}r[2*a+s]===m?o(e,r,a,h):o(e,r,++h,i),h<=n&&(a=h+1),n<=h&&(i=h-1)}}function o(e,t,o,n){r(e,o,n),r(t,2*o,2*n),r(t,2*o+1,2*n+1)}function r(e,t,o){var r=e[t];e[t]=e[o],e[o]=r}function n(e,t,o,r){var n=e-o,a=t-r;return n*n+a*a}var a=function(e){return e[0]},i=function(e){return e[1]},s=function(t,o,r,n,s){void 0===o&&(o=a),void 0===r&&(r=i),void 0===n&&(n=64),void 0===s&&(s=Float64Array),this.nodeSize=n,this.points=t;for(var l=t.length<65536?Uint16Array:Uint32Array,p=this.ids=new l(t.length),c=this.coords=new s(2*t.length),d=0;d<t.length;d++)p[d]=d,c[2*d]=o(t[d]),c[2*d+1]=r(t[d]);e(p,c,n,0,p.length-1,0)};return s.prototype.range=function(e,t,o,r){return function(e,t,o,r,n,a,i){for(var s,l,p=[0,e.length-1,0],c=[];p.length;){var d=p.pop(),u=p.pop(),m=p.pop();if(u-m<=i)for(var f=m;f<=u;f++)s=t[2*f],l=t[2*f+1],s>=o&&s<=n&&l>=r&&l<=a&&c.push(e[f]);else{var h=Math.floor((m+u)/2);s=t[2*h],l=t[2*h+1],s>=o&&s<=n&&l>=r&&l<=a&&c.push(e[h]);var _=(d+1)%2;(0===d?o<=s:r<=l)&&(p.push(m),p.push(h-1),p.push(_)),(0===d?n>=s:a>=l)&&(p.push(h+1),p.push(u),p.push(_))}}return c}(this.ids,this.coords,e,t,o,r,this.nodeSize)},s.prototype.within=function(e,t,o){return function(e,t,o,r,a,i){for(var s=[0,e.length-1,0],l=[],p=a*a;s.length;){var c=s.pop(),d=s.pop(),u=s.pop();if(d-u<=i)for(var m=u;m<=d;m++)n(t[2*m],t[2*m+1],o,r)<=p&&l.push(e[m]);else{var f=Math.floor((u+d)/2),h=t[2*f],_=t[2*f+1];n(h,_,o,r)<=p&&l.push(e[f]);var g=(c+1)%2;(0===c?o-a<=h:r-a<=_)&&(s.push(u),s.push(f-1),s.push(g)),(0===c?o+a>=h:r+a>=_)&&(s.push(f+1),s.push(d),s.push(g))}}return l}(this.ids,this.coords,e,t,o,this.nodeSize)},s}();var Ja=qa.exports;const Va={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:e=>e},Za=Math.fround||(Wa=new Float32Array(1),e=>(Wa[0]=+e,Wa[0]));var Wa;class Ya{constructor(e){this.options=ni(Object.create(Va),e),this.trees=new Array(this.options.maxZoom+1)}load(e){const{log:t,minZoom:o,maxZoom:r,nodeSize:n}=this.options;t&&console.time("total time");const a=`prepare ${e.length} points`;t&&console.time(a),this.points=e;let i=[];for(let t=0;t<e.length;t++)e[t].geometry&&i.push(Ua(e[t],t));this.trees[r+1]=new Ja(i,ai,ii,n,Float32Array),t&&console.timeEnd(a);for(let e=r;e>=o;e--){const o=+Date.now();i=this._cluster(i,e),this.trees[e]=new Ja(i,ai,ii,n,Float32Array),t&&console.log("z%d: %d clusters in %dms",e,i.length,+Date.now()-o)}return t&&console.timeEnd("total time"),this}getClusters(e,t){let o=((e[0]+180)%360+360)%360-180;const r=Math.max(-90,Math.min(90,e[1]));let n=180===e[2]?180:((e[2]+180)%360+360)%360-180;const a=Math.max(-90,Math.min(90,e[3]));if(e[2]-e[0]>=360)o=-180,n=180;else if(o>n){const e=this.getClusters([o,r,180,a],t),i=this.getClusters([-180,r,n,a],t);return e.concat(i)}const i=this.trees[this._limitZoom(t)],s=i.range(ti(o),oi(a),ti(n),oi(r)),l=[];for(const e of s){const t=i.points[e];l.push(t.numPoints?Ka(t):this.points[t.index])}return l}getChildren(e){const t=this._getOriginId(e),o=this._getOriginZoom(e),r="No cluster with the specified id.",n=this.trees[o];if(!n)throw new Error(r);const a=n.points[t];if(!a)throw new Error(r);const i=this.options.radius/(this.options.extent*Math.pow(2,o-1)),s=n.within(a.x,a.y,i),l=[];for(const t of s){const o=n.points[t];o.parentId===e&&l.push(o.numPoints?Ka(o):this.points[o.index])}if(0===l.length)throw new Error(r);return l}getLeaves(e,t,o){t=t||10,o=o||0;const r=[];return this._appendLeaves(r,e,t,o,0),r}getTile(e,t,o){const r=this.trees[this._limitZoom(e)],n=Math.pow(2,e),{extent:a,radius:i}=this.options,s=i/a,l=(o-s)/n,p=(o+1+s)/n,c={features:[]};return this._addTileFeatures(r.range((t-s)/n,l,(t+1+s)/n,p),r.points,t,o,n,c),0===t&&this._addTileFeatures(r.range(1-s/n,l,1,p),r.points,n,o,n,c),t===n-1&&this._addTileFeatures(r.range(0,l,s/n,p),r.points,-1,o,n,c),c.features.length?c:null}getClusterExpansionZoom(e){let t=this._getOriginZoom(e)-1;for(;t<=this.options.maxZoom;){const o=this.getChildren(e);if(t++,1!==o.length)break;e=o[0].properties.cluster_id}return t}_appendLeaves(e,t,o,r,n){const a=this.getChildren(t);for(const t of a){const a=t.properties;if(a&&a.cluster?n+a.point_count<=r?n+=a.point_count:n=this._appendLeaves(e,a.cluster_id,o,r,n):n<r?n++:e.push(t),e.length===o)break}return n}_addTileFeatures(e,t,o,r,n,a){for(const i of e){const e=t[i],s=e.numPoints;let l,p,c;if(s)l=ei(e),p=e.x,c=e.y;else{const t=this.points[e.index];l=t.properties,p=ti(t.geometry.coordinates[0]),c=oi(t.geometry.coordinates[1])}const d={type:1,geometry:[[Math.round(this.options.extent*(p*n-o)),Math.round(this.options.extent*(c*n-r))]],tags:l};let u;s?u=e.id:this.options.generateId?u=e.index:this.points[e.index].id&&(u=this.points[e.index].id),void 0!==u&&(d.id=u),a.features.push(d)}}_limitZoom(e){return Math.max(this.options.minZoom,Math.min(Math.floor(+e),this.options.maxZoom+1))}_cluster(e,t){const o=[],{radius:r,extent:n,reduce:a,minPoints:i}=this.options,s=r/(n*Math.pow(2,t));for(let r=0;r<e.length;r++){const n=e[r];if(n.zoom<=t)continue;n.zoom=t;const l=this.trees[t+1],p=l.within(n.x,n.y,s),c=n.numPoints||1;let d=c;for(const e of p){const o=l.points[e];o.zoom>t&&(d+=o.numPoints||1)}if(d>c&&d>=i){let e=n.x*c,i=n.y*c,s=a&&c>1?this._map(n,!0):null;const u=(r<<5)+(t+1)+this.points.length;for(const o of p){const r=l.points[o];if(r.zoom<=t)continue;r.zoom=t;const p=r.numPoints||1;e+=r.x*p,i+=r.y*p,r.parentId=u,a&&(s||(s=this._map(n,!0)),a(s,this._map(r)))}n.parentId=u,o.push(Xa(e/d,i/d,u,d,s))}else if(o.push(n),d>1)for(const e of p){const r=l.points[e];r.zoom<=t||(r.zoom=t,o.push(r))}}return o}_getOriginId(e){return e-this.points.length>>5}_getOriginZoom(e){return(e-this.points.length)%32}_map(e,t){if(e.numPoints)return t?ni({},e.properties):e.properties;const o=this.points[e.index].properties,r=this.options.map(o);return t&&r===o?ni({},r):r}}function Xa(e,t,o,r,n){return{x:Za(e),y:Za(t),zoom:1/0,id:o,parentId:-1,numPoints:r,properties:n}}function Ua(e,t){const[o,r]=e.geometry.coordinates;return{x:Za(ti(o)),y:Za(oi(r)),zoom:1/0,index:t,parentId:-1}}function Ka(e){return{type:"Feature",id:e.id,properties:ei(e),geometry:{type:"Point",coordinates:[(t=e.x,360*(t-.5)),ri(e.y)]}};var t}function ei(e){const t=e.numPoints,o=t>=1e4?Math.round(t/1e3)+"k":t>=1e3?Math.round(t/100)/10+"k":t;return ni(ni({},e.properties),{cluster:!0,cluster_id:e.id,point_count:t,point_count_abbreviated:o})}function ti(e){return e/360+.5}function oi(e){const t=Math.sin(e*Math.PI/180),o=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return o<0?0:o>1?1:o}function ri(e){const t=(180-360*e)*Math.PI/180;return 360*Math.atan(Math.exp(t))/Math.PI-90}function ni(e,t){for(const o in t)e[o]=t[o];return e}function ai(e){return e.x}function ii(e){return e.y}var si=function e(t,o){if(t===o)return!0;if(t&&o&&"object"==typeof t&&"object"==typeof o){if(t.constructor!==o.constructor)return!1;var r,n,a;if(Array.isArray(t)){if((r=t.length)!=o.length)return!1;for(n=r;0!=n--;)if(!e(t[n],o[n]))return!1;return!0}if(t.constructor===RegExp)return t.source===o.source&&t.flags===o.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===o.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===o.toString();if((r=(a=Object.keys(t)).length)!==Object.keys(o).length)return!1;for(n=r;0!=n--;)if(!Object.prototype.hasOwnProperty.call(o,a[n]))return!1;for(n=r;0!=n--;){var i=a[n];if(!e(t[i],o[i]))return!1}return!0}return t!=t&&o!=o},li=function(e){n(a,e);var o=s(a);function a(e){var r;t(this,a);var n=e.maxZoom,i=e.radius,s=void 0===i?60:i,l=zn(e,["maxZoom","radius"]);return(r=o.call(this,{maxZoom:n})).superCluster=new Ya(Object.assign({maxZoom:r.maxZoom,radius:s},l)),r.state={zoom:null},r}return r(a,[{key:"calculate",value:function(e){var t=!1;if(!si(e.markers,this.markers)){t=!0,this.markers=l(e.markers);var o=this.markers.map((function(e){return{type:"Feature",geometry:{type:"Point",coordinates:[e.getPosition().lng(),e.getPosition().lat()]},properties:{marker:e}}}));this.superCluster.load(o)}var r={zoom:e.map.getZoom()};return t||this.state.zoom>this.maxZoom&&r.zoom>this.maxZoom||(t=t||!si(this.state,r)),this.state=r,t&&(this.clusters=this.cluster(e)),{clusters:this.clusters,changed:t}}},{key:"cluster",value:function(e){var t=e.map;return this.superCluster.getClusters([-180,-90,180,90],Math.round(t.getZoom())).map(this.transformCluster.bind(this))}},{key:"transformCluster",value:function(e){var t=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var o=[],r=!0,n=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(o.push(i.value),!t||o.length!==t);r=!0);}catch(e){n=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(n)throw a}}return o}}(e,t)||p(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e.geometry.coordinates,2),o=t[0],r=t[1],n=e.properties;if(n.cluster)return new aa({markers:this.superCluster.getLeaves(n.cluster_id,1/0).map((function(e){return e.properties.marker})),position:new google.maps.LatLng({lat:r,lng:o})});var a=n.marker;return new aa({markers:[a],position:a.getPosition()})}}]),a}(ua),pi={},ci=_,di=Rt,ui=jt,mi=Tt,fi=Z,hi=Oa;pi.f=ci&&!di?Object.defineProperties:function(e,t){mi(e);for(var o,r=fi(t),n=hi(t),a=n.length,i=0;a>i;)ui.f(e,o=n[i++],r[o]);return e};var _i,gi=ee("document","documentElement"),yi=Tt,vi=pi,bi=mr,wi=po,Ci=gi,ki=gt,Mi=lo("IE_PROTO"),xi=function(){},Li=function(e){return"<script>"+e+"<\/script>"},Pi=function(e){e.write(Li("")),e.close();var t=e.parentWindow.Object;return e=null,t},Si=function(){try{_i=new ActiveXObject("htmlfile")}catch(e){}var e,t;Si="undefined"!=typeof document?document.domain&&_i?Pi(_i):((t=ki("iframe")).style.display="none",Ci.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(Li("document.F=Object")),e.close(),e.F):Pi(_i);for(var o=bi.length;o--;)delete Si.prototype[bi[o]];return Si()};wi[Mi]=!0;var ji=Object.create||function(e,t){var o;return null!==e?(xi.prototype=yi(e),o=new xi,xi.prototype=null,o[Mi]=e):o=Si(),void 0===t?o:vi.f(o,t)},Ri=jt,Oi=rt("unscopables"),$i=Array.prototype;null==$i[Oi]&&Ri.f($i,Oi,{configurable:!0,value:ji(null)});var Ei=ir.includes;Br({target:"Array",proto:!0},{includes:function(e){return Ei(this,e,arguments.length>1?arguments[1]:void 0)}}),function(e){$i[Oi][e]=!0}("includes");var Ai=X,Ti=H,Fi=rt("match"),Hi=m.TypeError,Ii=nn,zi=m.String,Qi=function(e){if("Symbol"===Ii(e))throw TypeError("Cannot convert a Symbol value to a string");return zi(e)},Di=rt("match"),Ni=Br,Bi=function(e){if(function(e){var t;return Ai(e)&&(void 0!==(t=e[Fi])?!!t:"RegExp"==Ti(e))}(e))throw Hi("The method doesn't accept regular expressions");return e},Gi=q,qi=Qi,Ji=E("".indexOf);Ni({target:"String",proto:!0,forced:!function(e){var t=/./;try{"/./"[e](t)}catch(o){try{return t[Di]=!1,"/./"[e](t)}catch(e){}}return!1}("includes")},{includes:function(e){return!!~Ji(qi(Gi(this)),qi(Bi(e)),arguments.length>1?arguments[1]:void 0)}});var Vi=Br,Zi=ir.indexOf,Wi=Zn,Yi=E([].indexOf),Xi=!!Yi&&1/Yi([1],1,-0)<0,Ui=Wi("indexOf");Vi({target:"Array",proto:!0,forced:Xi||!Ui},{indexOf:function(e){var t=arguments.length>1?arguments[1]:void 0;return Xi?Yi(this,e,t)||0:Zi(this,e,t)}});var Ki=mt,es=jt,ts=P,os=Br,rs=m,ns=Uo,as=Zo,is=tr,ss=Ie,ls=Ln,ps=function(e,t,o){var r=Ki(t);r in e?es.f(e,r,ts(0,o)):e[r]=o},cs=Hn("splice"),ds=rs.TypeError,us=Math.max,ms=Math.min;os({target:"Array",proto:!0,forced:!cs},{splice:function(e,t){var o,r,n,a,i,s,l=ss(this),p=is(l),c=ns(e,p),d=arguments.length;if(0===d?o=r=0:1===d?(o=0,r=p-c):(o=d-2,r=ms(us(as(t),0),p-c)),p+o-r>9007199254740991)throw ds("Maximum allowed length exceeded");for(n=ls(l,r),a=0;a<r;a++)(i=c+a)in l&&ps(n,a,l[i]);if(n.length=r,o<r){for(a=c;a<p-r;a++)s=a+o,(i=a+r)in l?l[s]=l[i]:delete l[s];for(a=p;a>p-r+o;a--)delete l[a-1]}else if(o>r)for(a=p-r;a>c;a--)s=a+o-1,(i=a+r-1)in l?l[s]=l[i]:delete l[s];for(a=0;a<o;a++)l[a+c]=arguments[a+2];return l.length=p-r+o,n}});var fs=m,hs=W,_s=fs.String,gs=fs.TypeError,ys=E,vs=Tt,bs=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,o={};try{(e=ys(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(o,[]),t=o instanceof Array}catch(e){}return function(o,r){return vs(o),function(e){if("object"==typeof e||hs(e))return e;throw gs("Can't set "+_s(e)+" as a prototype")}(r),t?e(o,r):o.__proto__=r,o}}():void 0),ws=W,Cs=X,ks=bs,Ms=E(1..valueOf),xs=q,Ls=Qi,Ps=E("".replace),Ss="[\t\n\v\f\r                　\u2028\u2029\ufeff]",js=RegExp("^"+Ss+Ss+"*"),Rs=RegExp(Ss+Ss+"*$"),Os=function(e){return function(t){var o=Ls(xs(t));return 1&e&&(o=Ps(o,js,"")),2&e&&(o=Ps(o,Rs,"")),o}},$s={start:Os(1),end:Os(2),trim:Os(3)},Es=_,As=m,Ts=E,Fs=Tr,Hs=Vt.exports,Is=De,zs=te,Qs=ye,Ds=ct,Ns=h,Bs=qo.f,Gs=f.f,qs=jt.f,Js=Ms,Vs=$s.trim,Zs="Number",Ws=As.Number,Ys=Ws.prototype,Xs=As.TypeError,Us=Ts("".slice),Ks=Ts("".charCodeAt),el=function(e){var t,o,r,n,a,i,s,l,p=Ds(e,"number");if(Qs(p))throw Xs("Cannot convert a Symbol value to a number");if("string"==typeof p&&p.length>2)if(p=Vs(p),43===(t=Ks(p,0))||45===t){if(88===(o=Ks(p,2))||120===o)return NaN}else if(48===t){switch(Ks(p,1)){case 66:case 98:r=2,n=49;break;case 79:case 111:r=8,n=55;break;default:return+p}for(i=(a=Us(p,2)).length,s=0;s<i;s++)if((l=Ks(a,s))<48||l>n)return NaN;return parseInt(a,r)}return+p};if(Fs(Zs,!Ws(" 0o1")||!Ws("0b1")||Ws("+0x1"))){for(var tl,ol=function(e){var t=arguments.length<1?0:Ws(function(e){var t=Ds(e,"number");return"bigint"==typeof t?t:el(t)}(e)),o=this;return zs(Ys,o)&&Ns((function(){Js(o)}))?function(e,t,o){var r,n;return ks&&ws(r=t.constructor)&&r!==o&&Cs(n=r.prototype)&&n!==o.prototype&&ks(e,n),e}(Object(t),o,ol):t},rl=Es?Bs(Ws):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),nl=0;rl.length>nl;nl++)Is(Ws,tl=rl[nl])&&!Is(ol,tl)&&qs(ol,tl,Gs(Ws,tl));ol.prototype=Ys,Ys.constructor=ol,Hs(As,Zs,ol)}var al,il=r((function e(o,r){t(this,e),this.markers={sum:o.length};var n=r.map((function(e){return e.count})),a=n.reduce((function(e,t){return e+t}),0);this.clusters={count:r.length,markers:{mean:a/r.length,sum:a,min:Math.min.apply(Math,l(n)),max:Math.max.apply(Math,l(n))}}})),sl=function(){function e(){t(this,e)}return r(e,[{key:"render",value:function(e,t){var o=e.count,r=e.position,n=o>Math.max(10,t.clusters.markers.mean)?"#ff0000":"#0000ff",a=window.btoa('\n  <svg fill="'.concat(n,'" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 240 240">\n    <circle cx="120" cy="120" opacity=".6" r="70" />\n    <circle cx="120" cy="120" opacity=".3" r="90" />\n    <circle cx="120" cy="120" opacity=".2" r="110" />\n  </svg>'));return new google.maps.Marker({position:r,icon:{url:"data:image/svg+xml;base64,".concat(a),scaledSize:new google.maps.Size(45,45)},label:{text:String(o),color:"rgba(255,255,255,0.9)",fontSize:"12px"},title:"Cluster of ".concat(o," markers"),zIndex:Number(google.maps.Marker.MAX_ZINDEX)+o})}}]),e}(),ll=r((function e(){t(this,e),function(e,t){for(var o in t.prototype)e.prototype[o]=t.prototype[o]}(e,google.maps.OverlayView)}));e.MarkerClustererEvents=void 0,(al=e.MarkerClustererEvents||(e.MarkerClustererEvents={})).CLUSTERING_BEGIN="clusteringbegin",al.CLUSTERING_END="clusteringend",al.CLUSTER_CLICK="click";var pl=function(e,t,o){o.fitBounds(t.bounds)},cl=function(o){n(i,o);var a=s(i);function i(e){var o,r=e.map,n=e.markers,s=void 0===n?[]:n,p=e.algorithm,c=void 0===p?new li({}):p,d=e.renderer,u=void 0===d?new sl:d,m=e.onClusterClick,f=void 0===m?pl:m;return t(this,i),(o=a.call(this)).markers=l(s),o.clusters=[],o.algorithm=c,o.renderer=u,o.onClusterClick=f,r&&o.setMap(r),o}return r(i,[{key:"addMarker",value:function(e,t){this.markers.includes(e)||(this.markers.push(e),t||this.render())}},{key:"addMarkers",value:function(e,t){var o=this;e.forEach((function(e){o.addMarker(e,!0)})),t||this.render()}},{key:"removeMarker",value:function(e,t){var o=this.markers.indexOf(e);return-1!==o&&(e.setMap(null),this.markers.splice(o,1),t||this.render(),!0)}},{key:"removeMarkers",value:function(e,t){var o=this,r=!1;return e.forEach((function(e){r=o.removeMarker(e,!0)||r})),r&&!t&&this.render(),r}},{key:"clearMarkers",value:function(e){this.markers.length=0,e||this.render()}},{key:"render",value:function(){var t=this.getMap();if(t instanceof google.maps.Map&&this.getProjection()){google.maps.event.trigger(this,e.MarkerClustererEvents.CLUSTERING_BEGIN,this);var o=this.algorithm.calculate({markers:this.markers,map:t,mapCanvasProjection:this.getProjection()}),r=o.clusters,n=o.changed;(n||null==n)&&(this.reset(),this.clusters=r,this.renderClusters()),google.maps.event.trigger(this,e.MarkerClustererEvents.CLUSTERING_END,this)}}},{key:"onAdd",value:function(){this.idleListener=this.getMap().addListener("idle",this.render.bind(this)),this.render()}},{key:"onRemove",value:function(){google.maps.event.removeListener(this.idleListener),this.reset()}},{key:"reset",value:function(){this.markers.forEach((function(e){return e.setMap(null)})),this.clusters.forEach((function(e){return e.delete()})),this.clusters=[]}},{key:"renderClusters",value:function(){var t=this,o=new il(this.markers,this.clusters),r=this.getMap();this.clusters.forEach((function(n){1===n.markers.length?n.marker=n.markers[0]:(n.marker=t.renderer.render(n,o),t.onClusterClick&&n.marker.addListener("click",(function(o){google.maps.event.trigger(t,e.MarkerClustererEvents.CLUSTER_CLICK,n),t.onClusterClick(o,n,r)}))),n.marker.setMap(r)}))}}]),i}(ll);return e.AbstractAlgorithm=ua,e.AbstractViewportAlgorithm=ma,e.Cluster=aa,e.ClusterStats=il,e.DefaultRenderer=sl,e.GridAlgorithm=Pa,e.MarkerClusterer=cl,e.NoopAlgorithm=Sa,e.SuperClusterAlgorithm=li,e.defaultOnClusterClickHandler=pl,e.distanceBetweenPoints=la,e.extendBoundsToPaddedViewport=sa,e.extendPixelBounds=ca,e.filterMarkersToPaddedViewport=ia,e.noop=fa,e.pixelBoundsToLatLngBounds=da,Object.defineProperty(e,"__esModule",{value:!0}),e}({});class ControlMenu{constructor(e){this.post_id=e.post_id;this.div_position=e.div_position}addListeners(){jQuery(document).on("click",`.mapster-control-menu-${this.post_id} .mapster-control-menu-toggle`,(()=>{jQuery(`.mapster-control-menu-${this.post_id} #mapster-control-menu-holder`).is(":visible")?jQuery(`.mapster-control-menu-${this.post_id} #mapster-control-menu-holder`).fadeOut():jQuery(`.mapster-control-menu-${this.post_id} #mapster-control-menu-holder`).fadeIn()}))}onAdd(e){this.map=e;this._container=document.createElement("div");this._container.className=`mapboxgl-ctrl mapster-control-menu mapster-control-menu-${this.post_id}`;this._container.innerHTML=`\n      <div>\n        ${"above"===this.div_position?"<div id='mapster-control-menu-holder'></div>":""}\n        <span class="mapster-control-menu-toggle dashicons dashicons-menu"></span>\n        ${"below"===this.div_position?"<div id='mapster-control-menu-holder'></div>":""}\n      </div>\n    `;this.addListeners();return this._container}onRemove(){this._container.parentNode.removeChild(this._container);this._map=void 0}}class CustomHTMLControl{constructor(e){this.custom_html=e.custom_html}onAdd(e){this.map=e;this._container=document.createElement("div");this._container.innerHTML=this.custom_html;return this._container}onRemove(){this._container.parentNode.removeChild(this._container);this._map=void 0}}class DownloadControl{constructor(e){this.post_id=e.post_id;this.interact_with_filters=e.interact_with_filters;this.notify_on_download=e.notify_on_download;this.included_fields=e.included_fields;this.features=e.locations.concat(e.lines.concat(e.polygons))}addListeners(){jQuery(document).on("click",`.mapster-download-control-${this.post_id} .mapster-data-download`,(()=>{this.downloadFeatures()}))}downloadFeatures(){let e=this.processFeatures();e.length>0?this.downloadCSV(e):alert("No features selected for download.")}processFeatures(e){let t=[];this.features.forEach((e=>{if(this.interact_with_filters&&window.mapster_categories_hidden_features&&window.mapster_categories_hidden_features.indexOf(e.id)>-1)return;let o=e.data.location?e.data.location:e.data.line?e.data.line:e.data.polygon?e.data.polygon:null,r={};r.title=e.title;r.permalink=e.permalink;r.categories=e.categories.map((e=>e.name)).join(",");this.getRecursivePropertyValue(r,e.data.additional_details,"");r.geography=JSON.stringify(o);if(this.included_fields&&""!==this.included_fields){let e={};this.included_fields.split(",").forEach((t=>{let o=t.trim();r[o]&&(e[o]=r[o])}));r=e}t.push(r)}));return t}getRecursivePropertyValue(e,t,o){for(let r in t)Array.isArray(t[r])?e[o+r]=t[r].join(","):"object"==typeof t[r]?this.getRecursivePropertyValue(e,t[r],o+r+"_"):e[o+r]=JSON.stringify(t[r])}downloadCSV(e){const t=(e,t)=>null===t?"":t;let o=[];e.forEach((e=>{for(let t in e)-1===o.indexOf(t)&&o.push(t)}));e.forEach((e=>{o.forEach((t=>{e[t]||(e[t]="")}))}));let r=e.map((e=>o.map((o=>JSON.stringify(e[o],t).replace(/\\"/g,'""'))).join(",")));r.unshift(o.join(","));r=r.join("\r\n");var n=document.createElement("a"),a=new Blob(["\ufeff",r]),i=URL.createObjectURL(a);n.href=i;n.download="map-data-download.csv";document.body.appendChild(n);n.click();document.body.removeChild(n);if(this.notify_on_download){let e=[];jQuery(`.mapster-download-control-${this.post_id} .mapster-category-control input`).each((function(){jQuery(this).is(":checked")&&e.push(jQuery(this).closest("li").text().trim())}));fetch(`${window.mapster_params.rest_url}mapster-wp-maps/send-email`,{method:"POST",body:JSON.stringify({users:this.notify_on_download,active_filters:e})})}}onAdd(e){this.map=e;this.storedBounds=this.map.getBounds();this._container=document.createElement("div");if(window.mapster_params.public){this._container.className=`mapboxgl-ctrl mapster-download-control mapster-download-control-${this.post_id}`;this._container.innerHTML='\n        <div class="mapster-download-control-content">\n          <button class="mapster-data-download">Download Data</button>\n        </div>\n      ';this.addListeners()}return this._container}onRemove(){this._container.parentNode.removeChild(this._container);this._map=void 0}}class ListControl{constructor(e,t,o,r,n,a){this.post_id=e.post_id;this.sort_by_distance=e.sort_by_distance;this.show_distance=e.show_distance;this.units=e.units;this.group_by_category=e.group_by_category;this.list_order=e.list_order;this.markers=e.markers;this.mapLibrary=e.mapLibrary;this.listing_type=e.listing_type;this.display_images=e.display_images;this.number_of_locations=e.number_of_locations;this.store_locator=e.store_locator_options.enable;this.sort_hours_by_day=e.store_locator_options.sort_hours_by_day;this.features=e.locations.concat(e.lines.concat(e.polygons));this.currentPage=1;this.storedBounds=null;this.storedMapLocation=null}storeLocatorHTML(e){return"<div>Upgrade to Mapster Pro to enable this functionality.</div>"}filterFeatures(){const e=new MapsterHelpers;let t=[];this.features.forEach(((o,r)=>{if(!(window.mapster_categories_hidden_features&&window.mapster_categories_hidden_features.indexOf(o.id)>-1)){var n=e.makeFeatureJSON(o.data);if(this.show_distance||this.sort_by_distance){var a=turf.distance(turf.center(n).geometry.coordinates,this.getCenter());o.distance=a*("imperial"===this.units?.621371:1)}t.push(o)}}));return t}sortFeatures(e){return this.sort_by_distance?e.sort(((e,t)=>e.distance>t.distance?1:-1)):e}getCategories(){return[]}sortCategories(e){return e}getCategoryListStructure(e){return[]}setCategoryListHTML(e){return""}setHTML(e){new MapsterHelpers;let t="<ul>",o=this.sortFeatures(this.filterFeatures()),r=this.sortCategories(this.getCategories(o));if(this.group_by_category){let e=this.getCategoryListStructure(r,o);t=this.setCategoryListHTML(e)}else{var n=[];o.forEach(((e,t)=>{"paginate"===this.listing_type?this.number_of_locations*(this.currentPage-1)<=t&&this.number_of_locations*this.currentPage>t&&n.push(e):n=o}));this.store_locator?t=this.storeLocatorHTML(t,n):n.forEach((e=>{let o="";
t+=`\n            <li data-id="${e.id}">\n              ${o}\n              ${e.title}\n              <em>${e.distance?e.distance.toFixed(2)+("imperial"===this.units?" miles":" km"):""}</em>\n            </li>\n          `}));t+="</ul>"}if("paginate"===this.listing_type){t+='<div class="mapster-paging">';this.currentPage>1&&(t+='<span class="mapster-back dashicons dashicons-arrow-left"></span>');this.number_of_locations*this.currentPage<o.length&&(t+='<span class="mapster-next dashicons dashicons-arrow-right"></span>');t+="</div>"}if(e)return t;jQuery(`.mapster-list-control-${this.post_id} .mapster-list-control-content`).html(t)}getStoreHTML(e){return""}getCenter(){return[this.map.getCenter().lng,this.map.getCenter().lat]}addListeners(){var e=this;const t=new MapsterHelpers;jQuery(document).on("click",`.mapster-list-control-${this.post_id} li`,(function(o,r=!1){if(!(jQuery(this).find(".mapster-accordion-indicator").length>0||o.isTrigger&&3!==o.isTrigger)){var n=e.features.find((e=>parseInt(e.id)==jQuery(this).data("id"))),a=t.makeFeatureJSON(n.data).features[0];if("Point"===a.geometry.type){const t=e.markers.find((e=>e.mapsterProperties.id===n.id));t&&n.data.enable_popup&&e.openPopup(t,n);!t&&n.data.enable_popup&&(r||e.openPopupNonMarker(n));let o=n.data.default_zoom_level&&""!==n.data.default_zoom_level?n.data.default_zoom_level:15;e.centerMap(a.geometry.coordinates,o)}else{n.data.enable_popup&&(r||e.openPopupNonMarker(n));var i=turf.bbox(a);e.fitBounds(i,{padding:20})}if(e.store_locator){jQuery(`.mapster-list-control-${e.post_id} .mapster-list-control-content`).hide();jQuery(`.mapster-list-control-${e.post_id} .mapster-list-control-single-content`).show();jQuery(`.mapster-list-control-${e.post_id} .mapster-list-control-single-content`).html(e.getStoreHTML(n))}}}));jQuery(document).on("click",`.mapster-list-control-${this.post_id} .mapster-accordion-indicator-open, .mapster-list-control-${this.post_id} .mapster-accordion-indicator-closed`,(function(){let e=!1;jQuery(this).hasClass("mapster-accordion-indicator-open")&&(e=!0);if(e){jQuery(this).removeClass("mapster-accordion-indicator-open");jQuery(this).addClass("mapster-accordion-indicator-closed");jQuery(this).next("ul").slideToggle()}else{jQuery(this).addClass("mapster-accordion-indicator-open");jQuery(this).next("ul").slideToggle()}}));jQuery(document).on("click",`.mapster-list-control-${this.post_id} .mapster-next`,(()=>{this.currentPage=this.currentPage+1;this.setHTML()}));jQuery(document).on("click",`.mapster-list-control-${this.post_id} .mapster-back`,(()=>{this.currentPage=this.currentPage-1;this.setHTML()}));jQuery(document).on("click",`.mapster-list-control-${this.post_id} .mapster-store-locator-results`,(()=>{jQuery(".mapster-list-control-content").show();jQuery(".mapster-list-control-single-content").hide();jQuery(".mapster-list-control-single-content").empty();this.storedBounds&&this.map.fitBounds(this.storedBounds);this.storedMapLocation&&this.map.flyTo(this.storedMapLocation)}));jQuery(document).on("change",`.mapster-list-control-${this.post_id} .mapster-cat-toggle`,(()=>{this.setHTML()}))}openPopup(e,t){new MapsterHelpers;jQuery(e.getElement()).trigger("click")}openPopupNonMarker(e){const t=(new MapsterHelpers).makeFeatureJSON(e.data),o=turf.pointOnFeature(t),r=(this.map._container.offsetWidth,this.map._container.offsetHeight,()=>{const t=this.map.project(o.geometry.coordinates);return this.map.queryRenderedFeatures(t).find((t=>t.properties.post_id&&t.properties.post_id===e.id))||!1}),n=()=>{const t=r();if(t){this.map.fire("click",{mapsterFoundFeature:t,mapsterFeatureID:e.id,lngLat:o.geometry.coordinates,originalEvent:{}});this.map.off("move",n)}};r()?this.map.fire("click",{mapsterFeatureID:e.id,lngLat:o.geometry.coordinates,originalEvent:{}}):this.map.on("move",n)}centerMap(e,t){this.map.flyTo({center:e,zoom:t})}fitBounds(e,t){this.map.fitBounds(e,t)}onAdd(e){this.map=e;this.storedMapLocation={center:this.map.getCenter(),zoom:this.map.getZoom(),pitch:this.map.getPitch(),bearing:this.map.getBearing()};this._container=document.createElement("div");this._container.className=`mapboxgl-ctrl mapster-list-control mapster-list-control-${this.post_id}`+(this.store_locator?" mapster-store-locator":"")+(window.innerWidth<768?" mapster-mobile":"");this._container.innerHTML=`<div class="mapster-list-control-content" style="max-height : ${jQuery(this.map._container).height()-100}px">`+this.setHTML(!0)+`</div><div class="mapster-list-control-single-content" style="max-height : ${jQuery(this.map._container).height()}px;"></div>`;if(window.innerWidth<768&&this.store_locator){jQuery(this.map._container).css("overflow","visible");this._container.style.marginTop=`${jQuery(this.map._container).height()}px`;jQuery(this.map._container).after(`<div style="height: ${jQuery(this.map._container).height()}px"></div>`);jQuery(".maplibregl-control-container > div, .mapboxgl-control-container > div").width("100%");jQuery(".mapboxgl-ctrl-geocoder").width("100%")}this.addListeners();this.map.on("moveend",(()=>{this.group_by_category||this.setHTML()}));setTimeout((()=>{this.store_locator&&!jQuery(".mapster-store-locator .mapboxgl-ctrl-geocoder").length&&jQuery(".mapboxgl-ctrl-geocoder").prependTo(".mapster-store-locator")}),100);return this._container}onAddGoogleMap(e){this.map=e;this._container=document.createElement("div");this._container.className=`mapboxgl-ctrl mapster-list-control mapster-list-control-${this.post_id} mapster-list-control-google`+(this.store_locator?" mapster-store-locator":"")+(window.innerWidth<768?" mapster-mobile":"");this._container.innerHTML=`<div class="mapster-list-control-content" style="max-height : ${jQuery(this.map.__gm.developerProvidedDiv).height()-100}px">`+this.setHTML(!0)+`</div><div class="mapster-list-control-single-content" style="max-height : ${jQuery(this.map.__gm.developerProvidedDiv).height()}px;"></div>`;this.addListeners();this.map.addListener("dragend",(()=>{this.group_by_category||this.setHTML()}));google.maps.event.addListenerOnce(this.map,"idle",(()=>{this.store_locator&&setTimeout((()=>{jQuery(".mapster-google-geocoder-input").addClass("geocoder-google-store-locator");jQuery(".mapster-google-geocoder-input").prependTo(".mapster-store-locator")}),1e3);const e=this.map.getBounds();this.storedBounds=[e.getSouthWest().lng(),e.getSouthWest().lat(),e.getNorthEast().lng(),e.getNorthEast().lat()]}));return this._container}onRemove(){this._container.parentNode.removeChild(this._container);this._map=void 0}}
;class PitchToggle{constructor(e=-20,t=70,o=null){this._bearing=-20;this._pitch=70;this._minpitchzoom=o}onAdd(e){this._map=e;let t=this;this._btn=document.createElement("button");this._btn.className="mapboxgl-ctrl-icon mapboxgl-ctrl-pitchtoggle-3d";this._btn.type="button";this._btn["aria-label"]="Toggle Pitch";this._btn.onclick=function(){if(0===e.getPitch()){let o={pitch:t._pitch,bearing:t._bearing};t._minpitchzoom&&e.getZoom()>t._minpitchzoom&&(o.zoom=t._minpitchzoom);e.easeTo(o);t._btn.className="mapboxgl-ctrl-icon mapboxgl-ctrl-pitchtoggle-2d"}else{e.easeTo({pitch:0,bearing:0});t._btn.className="mapboxgl-ctrl-icon mapboxgl-ctrl-pitchtoggle-3d"}};this._container=document.createElement("div");this._container.className="mapboxgl-ctrl-group mapboxgl-ctrl";this._container.appendChild(this._btn);return this._container}onRemove(){this._container.parentNode.removeChild(this._container);this._map=void 0}}class PrintControl{constructor(){}onAdd(e){this._map=e;let t=this;this._btn=document.createElement("button");this._btn.className="mapboxgl-ctrl-icon mapboxgl-ctrl-printcontrol";this._btn.type="button";this._btn["aria-label"]="Print";this._btn.innerHTML='\n      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16" style="margin-top: 3px;">\n        <path d="M5 1a2 2 0 0 0-2 2v1h10V3a2 2 0 0 0-2-2zm6 8H5a1 1 0 0 0-1 1v3a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1"/>\n        <path d="M0 7a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2h-1v-2a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v2H2a2 2 0 0 1-2-2zm2.5 1a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1"/>\n      </svg>\n    ';this._btn.onclick=function(){
};this._container=document.createElement("div");this._container.className="mapboxgl-ctrl-group mapboxgl-ctrl";this._container.appendChild(this._btn);return this._container}printMap(){"devicePixelRatio"in window||Object.defineProperty(window,"devicePixelRatio",{get:function(){return 3.125}});const e=document.createElement("canvas"),t=this._map.getCanvas().width,o=this._map.getCanvas().height;e.width=t;e.height=o;const r=e.getContext("2d"),n=new Image;n.onload=function(){r.fillStyle="#333";r.fillRect(0,0,t,o);r.drawImage(n,0,0);let a=document.createElement("a");a.download="image.png";a.href=e.toDataURL("image/png",.92);a.click()};n.src=this._map.getCanvas().toDataURL("image/png")}onRemove(){this._container.parentNode.removeChild(this._container);this._map=void 0}}class CategoryControl{constructor(e){this.post_id=e.post_id;this.displayMode=e.category_display;this.checkboxMode=e.checkbox_display;this.initialVisibility=e.initial_visibility;this.preSelectedCategories=e.pre_selected_categories;this.categoryOrder=e.category_order;this.independentChildren=e.independent_children;this.excludedCategories=e.excluded_categories;this.functionality=e.functionality;this.additional_filters=e.additional_filters;this.reset_button=e.reset_button;this.accordion_layout=e.accordion_layout;this.show_number_of_features=e.show_number_of_features;this.did_one_accordion=!1;this.markers=e.markers;this.map_provider=e.map_provider;this.circle_clustering=e.circle_clustering;this.label_icon_clustering=e.label_icon_clustering;this.marker_clustering=e.marker_clustering;this.cluster_options=e.cluster_options;this.features=e.locations.concat(e.lines.concat(e.polygons));this.dataLayers=e.dataLayers;this.locations=e.locations;this.lines=e.lines;this.polygons=e.polygons}setMarkers(e){this.markers=e}organizeCategories(){let e=[];this.features.forEach((t=>{t.categories.forEach((t=>{-1===e.findIndex((e=>e.id===t.id))&&e.push(t)}))}));e=this.filterCategories(e);e=this.sortCategories(e);return e}returnHTML(){return`\n      <div>\n        ${this.returnCategoryHTML(this.organizeCategories())}\n      </div>\n    `}returnCategoryHTML(e){var t="<ul>";e.filter((e=>0===e.parent)).forEach(((o,r)=>{var n=e.filter((e=>e.parent===o.id));t+=this.returnInputHTML(o,n);t+=this.returnChildrenHTML(o,e)}));return t+="</ul>"}returnChildrenHTML(e,t){var o="<ul>",r=t.filter((t=>t.parent===e.id));r.forEach((e=>{o+=this.returnInputHTML(e,[]);o+=this.returnChildrenHTML(e,t)}));o+="</ul>";0===r.length&&(o="");return o}returnInputHTML(e,t){var o=!0;this.initialVisibility||this.preSelectedCategories&&(!this.preSelectedCategories||-1!==this.preSelectedCategories.indexOf(e.id))||(o=!1);return this.returnAccordionHTML(`\n      <li>\n        ${"checkbox"===this.checkboxMode?`\n          <input class="mapster-cat-toggle" id="${e.id}" data-term="${e.id}" data-parent="${e.parent}" ${o?'checked="checked"':""} type="checkbox" />\n        `:`\n        <label class="mapster-switch">\n          <input class="mapster-cat-toggle" id="${e.id}" data-term="${e.id}" data-parent="${e.parent}" ${o?'checked="checked"':""} type="checkbox" />\n          <span class="mapster-slider mapster-round"></span>\n        </label>\n        `}\n        ${"colors"===this.displayMode?`<div class="mapster-color-swatch" style="background-color: ${e.color};"></div>`:""}\n        ${"icons"===this.displayMode?`<div class="mapster-icon-swatch" style="background-image: url(${e.icon});background-size: cover;"></div>`:""}\n        <label for="${e.id}">${e.name} ${this.returnNumberOfFeatures(e)?`<span class="mapster-number-of-features">(${this.returnNumberOfFeatures(e)})</span>`:""}</label>\n      </li>\n    `,e,t)}setToggles(e){var t=jQuery(e).data("term"),o=jQuery(e).data("parent"),r=jQuery(e).is(":checked");if(!this.independentChildren)if(0===o)r?jQuery(`.mapster-category-control-${this.post_id} .mapster-cat-toggle[data-parent="${t}"]`).prop("checked",!0):jQuery(`.mapster-category-control-${this.post_id} .mapster-cat-toggle[data-parent="${t}"]`).prop("checked",!1);else if(r)jQuery(`.mapster-category-control-${this.post_id} .mapster-cat-toggle[data-term="${o}"]`).prop("checked",!0);else{var n=!0;jQuery(`.mapster-category-control-${this.post_id} .mapster-cat-toggle[data-parent="${o}"]`).each((function(){jQuery(this).is(":checked")&&(n=!1)}));n&&jQuery(`.mapster-category-control-${this.post_id} .mapster-cat-toggle[data-term="${o}"]`).prop("checked",!1)}}returnIDsToHideFeatures(e){let t=[];this.features.forEach((o=>{if(o.categories.length>0)if("exclusive"===this.functionality)o.categories.find((t=>e.indexOf(t.id)>-1))&&t.push(o.id);else if("inclusive"===this.functionality){var r=!0;o.categories.forEach((t=>{-1===e.indexOf(t.id)&&(r=!1)}));r&&t.push(o.id)}}));return t}returnNumberOfFeatures(){return!1}adjustMarkers(e){let t=[];this.markers.forEach((o=>{const r=this.returnMarkerProperties(o);if(r.categories.length>0)if("exclusive"===this.functionality)if(r.categories.find((t=>e.indexOf(t.id)>-1))){this.changeMarker("hide",o);t.push(o.mapsterProperties.id)}else this.changeMarker("show",o);else if("inclusive"===this.functionality){var n=!0;if(r.categories.length>0){r.categories.forEach((t=>{-1===e.indexOf(t.id)&&(n=!1)}));if(n){this.changeMarker("hide",o);t.push(o.mapsterProperties.id)}else this.changeMarker("show",o)}}}));this.adjustMarkerClusters(t)}adjustMarkerClusters(e){if(this.marker_clustering){let t=["marker"];(new MapsterHelpers).makeClusters(this.map,this.map_provider,this.cluster_options,t,this.locations,[],[],e)}}returnAccordionHTML(e,t,o){return e}filterCategories(e){return e}sortCategories(e){return e}changeMarker(e,t){"hide"===e?t.remove():"show"===e&&t.addTo(this.map)}changeLayerVisibility(){var e=[];jQuery(`.mapster-category-control-${this.post_id} .mapster-cat-toggle`).each((function(){jQuery(this).is(":checked")||e.push(jQuery(this).data("term"))}));var t=this.returnIDsToHideFeatures(e);this.setHiddenFeatures(t);this.adjustMarkers(e)}setHiddenFeatures(e){const t=new MapsterHelpers;if(this.map.getLayer("symbol")){this.map.getLayer("symbol-clusters")&&t.setClustering(this.map,this.map_provider,this.cluster_options,this.circle_clustering,this.label_icon_clustering,this.marker_clustering,this.markers,this.locations,this.lines,this.polygons,e);let o=this.locations.filter((t=>-1===e.indexOf(t.id))),r=t.createLayerGeoJSON(this.map,"location","symbol",o,[],[],[]);this.map.getSource("symbol").setData(r)}this.map.getStyle().layers.find((e=>"circle"===e.type&&e.id.indexOf("clusters")>-1))&&t.setClustering(this.map,this.map_provider,this.cluster_options,this.circle_clustering,this.label_icon_clustering,this.marker_clustering,this.markers,this.locations,this.lines,this.polygons,e);if(this.map.getLayer("circle")){this.map.setPaintProperty("circle","circle-radius",["case",["in",["get","post_id"],["literal",e]],0,["has","circle_radius"],["to-number",["get","circle_radius"]],0]);this.map.setPaintProperty("circle","circle-stroke-width",["case",["in",["get","post_id"],["literal",e]],0,["has",'"circle_stroke-width"'],["to-number",["get",'"circle_stroke-width"']],0])}this.map.getLayer("line")&&this.map.setPaintProperty("line","line-width",["case",["in",["get","post_id"],["literal",e]],0,["has","width"],["to-number",["get","width"]],2]);if(this.map.getLayer("fill")){const t=new MapsterHelpers;let o=this.polygons.filter((t=>-1===e.indexOf(t.id))),r=t.createLayerGeoJSON(this.map,"polygon","fill",[],[],o,[]);this.map.getSource("fill").setData(r)}if(this.map.getLayer("fill-extrusion")){const t=new MapsterHelpers;let o=this.polygons.filter((t=>-1===e.indexOf(t.id))),r=t.createLayerGeoJSON(this.map,"polygon","fill-extrusion",[],[],o,[]);this.map.getSource("fill-extrusion").setData(r)}}returnMarkerProperties(e){return e.mapsterProperties}addResetButton(){if(this.reset_button){let e=this;jQuery(document).on("click",`.mapster-category-control-${this.post_id} #mapster-reset-categories`,(function(){jQuery(`.mapster-category-control-${e.post_id} .mapster-cat-toggle`).each((function(){let t=jQuery(this).data("term");var o=!0;e.initialVisibility||e.preSelectedCategories&&(!e.preSelectedCategories||-1!==e.preSelectedCategories.indexOf(t))||(o=!1);jQuery(this).prop("checked",o)}));e.changeLayerVisibility()}));return'<button id="mapster-reset-categories">Reset</button>'}return""}addListeners(){var e=this;jQuery(document).on("change",`.mapster-category-control-${this.post_id} .mapster-cat-toggle`,(function(){e.setToggles(this);e.changeLayerVisibility()}));jQuery(document).on("click",`.mapster-category-control-${this.post_id} .mapster-accordion-indicator`,(function(){let t=!1;jQuery(this).parent().hasClass("mapster-accordion-indicator-open")&&(t=!0);jQuery(`.mapster-category-control-${e.post_id} .mapster-accordion-indicator`).each((function(){if(jQuery(this).parent().next("ul").is(":visible")){jQuery(this).parent().next("ul").slideToggle(400,(()=>jQuery(this).parent().addClass("mapster-accordion-indicator-closed")));jQuery(this).parent().removeClass("mapster-accordion-indicator-open")}}));if(t)jQuery(this).parent().addClass("mapster-accordion-indicator-closed");else{jQuery(this).parent().addClass("mapster-accordion-indicator-open");jQuery(this).parent().next("ul").slideToggle()}}))}onAdd(e){this.map=e;this._container=document.createElement("div");this._container.className=`mapboxgl-ctrl mapster-category-control mapster-category-control-${this.post_id}`;this._container.innerHTML=this.returnHTML();this.initialVisibility||setTimeout((()=>{this.changeLayerVisibility()}),10);this.addListeners();return this._container}onAddGoogleMap(e){this.map=e;this._container=document.createElement("div");this._container.className=`mapster-category-control mapster-google-category-control mapster-category-control-${this.post_id}`;this._container.innerHTML=this.returnHTML();this.addListeners();return this._container}onRemove(){this._container.parentNode.removeChild(this._container);this.map=void 0}}
;class LayerControl{constructor(e){this.post_id=e.post_id;this.toggleable_layers=e.toggleable_layers;this.toggleable_layer_titles=e.toggleable_layer_titles;this.checkbox_type=e.checkbox_type}returnHTML(){let e='<ul class="mapster-layer-control-content">';const t=this.toggleable_layers.replace("\r","").split("\n"),o=this.toggleable_layer_titles.replace("\r","").split("\n");t.forEach(((t,r)=>{e+="<li>";const n=t.split(",");let a=!0,i=!0;n.forEach((e=>{if(""!==e){this.map.getLayer(e.trim())||(a=!1);"hidden"!==this.map.getLayoutProperty(e.trim(),"visibility")&&void 0===this.map.getLayoutProperty(e.trim(),"visibility")||(i=!1)}}));a?"checkbox"===this.checkbox_type?e+=`<input class="mapster-layer-toggle" data-layers="${t}" ${i?'checked="checked"':""} type="checkbox" /> ${o[r]}`:"radio"===this.checkbox_type?e+=`<input name="mapster-layer-control" class="mapster-layer-toggle" data-layers="${t}" ${i?'checked="checked"':""} type="radio" /> ${o[r]}`:"switch"===this.checkbox_type&&(e+=`<label class="mapster-switch">\n            <input class="mapster-layer-toggle" data-layers="${t}" ${i?'checked="checked"':""} type="checkbox" />\n            <span class="mapster-slider mapster-round"></span>\n          </label> ${o[r]}`):alert("Please double check the layers you've set for the layer control: some don't exist in the style!");e+="</li>"}));e+="</ul>";return e}changeLayerVisibility(){let e=this;jQuery(`.mapster-layer-control-${this.post_id} .mapster-layer-toggle`).each((function(){jQuery(this).data("layers").split(",").forEach((t=>{jQuery(this).is(":checked")?e.map.setLayoutProperty(t.trim(),"visibility","visible"):e.map.setLayoutProperty(t.trim(),"visibility","none")}))}))}addListeners(){var e=this;jQuery(document).on("change",`.mapster-layer-control-${this.post_id} .mapster-layer-toggle`,(function(){e.changeLayerVisibility()}))}onAdd(e){this.map=e;this._container=document.createElement("div");this._container.className=`mapboxgl-ctrl mapster-layer-control mapster-layer-control-${this.post_id}`;const t=setInterval((()=>{if(this.map.isStyleLoaded()){this._container.innerHTML=this.returnHTML();clearInterval(t)}}),100);this.addListeners();return this._container}onRemove(){this._container.parentNode.removeChild(this._container);this._map=void 0}}class StyleControl{constructor(e){this.post_id=e.post_id;this.toggleable_styles=e.toggleable_styles;this.toggleable_styles_titles=e.toggleable_styles_titles;this.initial_style_title=e.initial_style_title;this.map_type=e.map_type;this.default_style=!1}returnHTML(){let e='<ul class="mapster-style-control-content">';const t=new MapsterHelpers;this.default_style=t.getStyle(this.map_type);this.map_type.custom_style_json&&""!==this.map_type.custom_style_json&&(this.default_style=JSON.parse(this.map_type.custom_style_json));e+=`<li><input name="mapster-style-control" class="mapster-style-toggle" data-index="default" checked="checked" type="radio" /> ${this.initial_style_title}`;const o=this.toggleable_styles.replace("\r","").split("\n"),r=this.toggleable_styles_titles.replace("\r","").split("\n");o.forEach(((t,o)=>{if(""!==t){e+="<li>";e+=`<input name="mapster-style-control" class="mapster-style-toggle" data-index="${o}" type="radio" /> ${r[o]}`;e+="</li>"}}));e+="</ul>";return e}addListeners(){var e=this;new MapsterHelpers;jQuery(document).on("change",`.mapster-style-control-${this.post_id} .mapster-style-toggle`,(function(){const t=jQuery(this).data("index");if("default"!==t){const o=e.toggleable_styles.split("\n");o[t].indexOf("{")>-1?e.map.setStyle(JSON.parse(o[t])):e.map.setStyle(o[t]);e.map.fire("mapster_custom_style_load")}else{e.map.setStyle(e.default_style);e.map.fire("mapster_custom_style_load")}}))}onAdd(e){this.map=e;this._container=document.createElement("div");this._container.className=`mapboxgl-ctrl mapster-style-control mapster-style-control-${this.post_id}`;const t=setInterval((()=>{if(this.map.isStyleLoaded()){this._container.innerHTML=this.returnHTML();clearInterval(t)}}),100);this.addListeners();return this._container}onRemove(){this._container.parentNode.removeChild(this._container);this._map=void 0}}class ElevationControl{constructor(e){this.lines=e.lines;this.post_id=e.post_id;this.single_line=e.single_line;this.open_on_load=e.open_on_load;this.profile_color=e.profile_color;this.units=e.units;this.show_line_length=e.show_line_length;this.profile_displayed=!1;this.last_line_displayed=!1}addListeners(){jQuery(document).on("click",`.mapster-elevation-control-${this.post_id} .mapster-elevation-control-content`,(()=>{if(this.profile_displayed){this.removeElevation();this.profile_displayed=!1;jQuery(`.mapster-elevation-control-${this.post_id} .mapster-elevation-control-content`).removeClass("mapster-elevation-control-active")}else{if(this.map.getSource("mapbox-dem"))this.addElevation(this.last_line_displayed);else{this.loadElevationData();this.map.once("idle",(()=>{this.addElevation(this.last_line_displayed)}))}this.profile_displayed=!0;jQuery(`.mapster-elevation-control-${this.post_id} .mapster-elevation-control-content`).addClass("mapster-elevation-control-active")}}));this.single_line&&this.open_on_load&&setTimeout((()=>{this.last_line_displayed=this.lines[0];jQuery(`.mapster-elevation-control-${this.post_id} .mapster-elevation-control-content`).click()}),1e3);this.single_line||this.map.on("click","line",(e=>{this.last_line_displayed=this.lines.find((t=>t.id===e.features[0].properties.post_id));this.profile_displayed&&jQuery(`.mapster-elevation-control-${this.post_id} .mapster-elevation-control-content`).click();jQuery(`.mapster-elevation-control-${this.post_id} .mapster-elevation-control-content`).click()}));this.map.on("mousemove",(()=>{this.map.getLayer("elevation-point-along-layer")&&this.map.setLayoutProperty("elevation-point-along-layer","visibility","none")}))}loadElevationData(){this.map.addSource("mapbox-dem",{type:"raster-dem",url:"mapbox://mapbox.terrain-rgb",tileSize:512,maxzoom:14});this.map.setTerrain({source:"mapbox-dem",exaggeration:1.5})}removeElevation(){document.getElementById("mapster-chartjs-container").remove()}addElevation(e){let t=[],o=turf.length(e.data.line);for(let r=0;r<o;r+=o/50){let o=turf.along(e.data.line,r),n=this.map.queryTerrainElevation(o.geometry.coordinates,{exaggerated:!1});"feet"===this.units&&(n*=3.28084);t.push(n)}let r=document.createElement("div");r.setAttribute("id","mapster-chartjs-container");let n=document.createElement("canvas");n.setAttribute("id","mapster-chartjs");document.getElementById(`mapster-wp-maps-${this.post_id}`).append(r);r.append(n);const a=new MapsterConstants;let i=t.map((e=>""));if(this.show_line_length){i=[];t.forEach(((e,t)=>{let r=o/50;"feet"===this.units&&(r*=.621371);let n=parseInt(t*r*10)/10;i.push(n)}))}new Chart(document.getElementById("mapster-chartjs"),{type:"line",data:{labels:i,datasets:[{label:"Elevation",data:t,fill:!1,borderColor:this.profile_color,pointRadius:0,tension:.2}]},options:a.returnElevationChartOptions(this.units,this.show_line_length),plugins:[a.returnElevationChartPlugin(this.map,e)]})}onAdd(e){this.map=e;this.storedBounds=this.map.getBounds();this._container=document.createElement("div");if(window.mapster_params.public){this._container.className=`mapboxgl-ctrl mapster-elevation-control mapster-elevation-control-${this.post_id}`;this._container.innerHTML='\n        <div class="mapster-elevation-control-content">\n          <svg class="mapster-svg-mountain" focusable="false" viewBox="0 0 24 24" aria-hidden="true">\n            <path d="M14 6l-3.75 5 2.85 3.8-1.6 1.2C9.81 13.75 7 10 7 10l-6 8h22L14 6z"></path>\n          </svg>\n        </div>\n      ';this.addListeners()}return this._container}onRemove(){this._container.parentNode.removeChild(this._container);this._map=void 0}}class MapsterConstants{returnElevationChartPlugin(e,t){return{id:"corsair",afterInit:e=>{e.corsair={x:0,y:0}},afterEvent:(e,t)=>{const{chartArea:{top:o,bottom:r,left:n,right:a}}=e,{event:{x:i,y:s}}=t;if(i<n||i>a||s<o||s>r){e.corsair={x:i,y:s,draw:!1};e.draw()}else{e.corsair={x:i,y:s,draw:!0};e.draw()}},afterDatasetsDraw:(o,r,n)=>{const{ctx:a,chartArea:{top:i,bottom:s,left:l,right:p}}=o,{x:c,y:d,draw:u}=o.corsair;if(!u)return;a.lineWidth=n.width||0;a.setLineDash(n.dash||[]);a.strokeStyle=n.color||"black";a.save();a.beginPath();a.moveTo(c,s);a.lineTo(c,i);a.stroke();a.restore();const m=(c-l)/(p-l);let f=turf.length(t.data.line),h=turf.along(t.data.line,f*m);if(e.getSource("elevation-point-along")&&e.getLayer("elevation-point-along-layer")){e.getSource("elevation-point-along").setData(h);e.setLayoutProperty("elevation-point-along-layer","visibility","visible")}else{e.addSource("elevation-point-along",{type:"geojson",data:h});e.addLayer({id:"elevation-point-along-layer",type:"circle",source:"elevation-point-along"})}}}}returnElevationChartOptions(e,t){return{interaction:{intersect:!1,mode:"index"},scales:{x:{title:{display:!!t,text:"meters"===e?"KM":"Miles",font:{style:"italic",size:10}},grid:{display:!0},ticks:{font:{size:10}}}},maintainAspectRatio:!1,plugins:{legend:{display:!1},title:{display:!0,text:`Elevation (${"meters"===e?"m":"ft"})`},tooltip:{displayColors:!1,callbacks:{label:function(t){return parseInt(10*t.parsed.y)/10+" "+("meters"===e?"m":"ft")}}},corsair:{color:"#333",width:1}}}}returnStyleProviders(){let e=[{id:"standard-day",style:"mapbox://styles/mapbox/standard",lighting:"day"},{id:"standard-night",style:"mapbox://styles/mapbox/standard",lighting:"night"},{id:"standard-dusk",style:"mapbox://styles/mapbox/standard",lighting:"dusk"},{id:"standard-dawn",style:"mapbox://styles/mapbox/standard",lighting:"dawn"},{id:"standard-satellite-day",style:"mapbox://styles/mapbox/standard-satellite",lighting:"day"},{id:"standard-satellite-night",style:"mapbox://styles/mapbox/standard-satellite",lighting:"night"},{id:"streets",style:"mapbox://styles/mapbox/streets-v12"},{id:"outdoors",style:"mapbox://styles/mapbox/outdoors-v12"},{id:"light",style:"mapbox://styles/mapbox/light-v11"},{id:"dark",style:"mapbox://styles/mapbox/dark-v11"},{id:"satellite",style:"mapbox://styles/mapbox/satellite-v9"},{id:"satellite-streets",style:"mapbox://styles/mapbox/satellite-streets-v12"},{id:"navigation-day",style:"mapbox://styles/mapbox/navigation-day-v1"},{id:"navigation-night",style:"mapbox://styles/mapbox/navigation-night-v1"},{id:"custom-image",style:{version:8,glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf",sources:{},layers:[{id:"background",type:"background",paint:{"background-color":"rgba(255,255,255,1)"}}]}},{id:"empty",style:{version:8,glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf",sources:{},layers:[{id:"background",type:"background",paint:{"background-color":"rgba(255,255,255,1)"}}]}},{id:"open-street-map",style:this.returnJsonStyle("https://a.tile.openstreetmap.org/{z}/{x}/{y}.png",'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors')},{id:"open-topo-map",style:this.returnJsonStyle("https://a.tile.opentopomap.org/{z}/{x}/{y}.png",'Map data: &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, <a href="https://viewfinderpanoramas.org">SRTM</a> | Map style: &copy; <a href="https://opentopomap.org">OpenTopoMap</a> (<a href="https://creativecommons.org/licenses/by-sa/3.0/">CC-BY-SA</a>)')},{id:"hot-osm",style:this.returnJsonStyle("https://a.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png",'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Tiles style by <a href="https://www.hotosm.org/" target="_blank">Humanitarian OpenStreetMap Team</a> hosted by <a href="https://openstreetmap.fr/" target="_blank">OpenStreetMap France</a>')},{id:"cyclo-osm",style:this.returnJsonStyle("https://a.tile-cyclosm.openstreetmap.fr/cyclosm/{z}/{x}/{y}.png",'<a href="https://github.com/cyclosm/cyclosm-cartocss-style/releases" title="CyclOSM - Open Bicycle render">CyclOSM</a> | Map data: &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors')},{id:"toner-stamen",style:this.returnJsonStyle("https://tiles.stadiamaps.com/tiles/stamen_toner/{z}/{x}/{y}.png",'Map tiles by <a href="https://stamen.com">Stamen Design</a>, <a href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors')},{id:"watercolor-stamen",style:this.returnJsonStyle("https://tiles.stadiamaps.com/tiles/stamen_watercolor/{z}/{x}/{y}.jpg",'Map tiles by <a href="https://stamen.com">Stamen Design</a>, <a href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors')},{id:"terrain-stamen",style:this.returnJsonStyle("https://tiles.stadiamaps.com/tiles/stamen_terrain/{z}/{x}/{y}.png",'Map tiles by <a href="https://stamen.com">Stamen Design</a>, <a href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors')},{id:"esri-satellite",style:this.returnJsonStyle("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}","Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community")},{id:"esri-topo",style:this.returnJsonStyle("https://server.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}","Tiles &copy; Esri &mdash; Esri, DeLorme, NAVTEQ, TomTom, Intermap, iPC, USGS, FAO, NPS, NRCAN, GeoBase, Kadaster NL, Ordnance Survey, Esri Japan, METI, Esri China (Hong Kong), and the GIS User Community")},{id:"blank-map",style:this.returnJsonStyle("https://a.tile.openstreetmap.org/{z}/{x}/{y}.png",'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors')}];if("1"===window.mapster_params.activated){let t=[{id:"mapster-unicorn",style:"mapbox://styles/mapstertech/cm10x5cvq02n401pwhdpncvrj"},{id:"mapster-minimo",style:"mapbox://styles/mapstertech/cm12g9n3g00t501rbej0m74bv"},{id:"mapster-whaam",style:"mapbox://styles/mapstertech/cm15kgcun033l01r793jh5b30"},{id:"mapster-standard-oil",style:"mapbox://styles/mapstertech/cm12g8j4t03ao01pq9wm99p54"},{id:"mapster-blueprint",style:"mapbox://styles/mapstertech/cm12g880g00t401rb9yc32icp"},{id:"mapster-frank",style:"mapbox://styles/mapstertech/cm12g7tw303an01pqh7vr9sp4"},{id:"mapster-pencil",style:"mapbox://styles/mapstertech/cm10xd4pn02g501rggzgifof7"},{id:"mapster-bubble",style:"mapbox://styles/mapstertech/cm10xc01702g401rg1hmg4db8"},{id:"mapster-memory",style:"mapbox://styles/mapstertech/cm10xaa8m020g01pq4ueh42z2"},{id:"mapster-neon-glow",style:"mapbox://styles/mapstertech/cm10x86ma00l601r74d7a7rfw"},{id:"mapster-vintage",style:"mapbox://styles/mapstertech/cm15klhbj033m01r70dwy5ap8"},{id:"mapster-swiss-ski",style:"mapbox://styles/mapstertech/cm15klq59018k01q13nz0eo5k"},{id:"mapster-neon",style:"mapbox://styles/mapstertech/cm15km0rx023b01rb6v7ieds5"},{id:"mapster-monochrome-blue",style:"mapbox://styles/mapstertech/cm15km82m018l01q1aha7e04l"},{id:"mapster-camouflage",style:"mapbox://styles/mapstertech/cm15l1x1g018n01q127v8g0pu"},{id:"mapster-bright",style:"mapbox://styles/mapstertech/cm15l28wo023c01rb3ukd02j6"}];e=e.concat(t)}return e}returnJsonStyle(e,t){return{version:8,glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf",sources:{"raster-tiles":{type:"raster",tiles:[e],tileSize:256,attribution:t}},layers:[{id:"simple-tiles",type:"raster",source:"raster-tiles",minzoom:0,maxzoom:22}]}}defaultLoader(){return"\n      <svg width='38' height='38' viewBox='0 0 38 38' xmlns='https://www.w3.org/2000/svg' stroke='#333'>\n        <g fill='none' fill-rule='evenodd'>\n            <g transform='translate(1 1)' stroke-width='2'>\n                <circle stroke-opacity='.5' cx='18' cy='18' r='18'/>\n                <path d='M36 18c0-9.94-8.06-18-18-18'>\n                    <animateTransform\n                        attributeName='transform'\n                        type='rotate'\n                        from='0 18 18'\n                        to='360 18 18'\n                        dur='1s'\n                        repeatCount='indefinite'/>\n                </path>\n            </g>\n        </g>\n      </svg>"}loaderHTML(e){let t=this.defaultLoader(),o="rgba(255,255,255,0.6)";if("1"===window.mapster_params.activated&&e&&e.loading_graphic){t=e.loading_graphic.replace("svg",`svg stroke="${e.loader_color}" fill="${e.loader_color}"`);e.background_color&&(o=e.background_color);"custom"===e.loading_graphic&&(t=`<img src="${e.custom_loader}" />`)}return`\n\t\t\t<div class="mapster-map-loader" style="background-color:${o}">\n\t\t\t\t${t}\n\t\t\t</div>\n\t\t`}markerAsSVG(e){return"data:image/svg+xml;charset=UTF-8,"+encodeURIComponent(`\n      <svg display="block" height="41px" width="27px" viewBox="0 0 27 41" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n        <g fill-rule="nonzero">\n          <g transform="translate(3.0, 29.0)" fill="#000000">\n            <ellipse opacity="0.04" cx="10.5" cy="5.80029008" rx="10.5" ry="5.25002273"></ellipse>\n            <ellipse opacity="0.04" cx="10.5" cy="5.80029008" rx="10.5" ry="5.25002273"></ellipse>\n            <ellipse opacity="0.04" cx="10.5" cy="5.80029008" rx="9.5" ry="4.77275007"></ellipse>\n            <ellipse opacity="0.04" cx="10.5" cy="5.80029008" rx="8.5" ry="4.29549936"></ellipse>\n            <ellipse opacity="0.04" cx="10.5" cy="5.80029008" rx="7.5" ry="3.81822308"></ellipse>\n            <ellipse opacity="0.04" cx="10.5" cy="5.80029008" rx="6.5" ry="3.34094679"></ellipse>\n            <ellipse opacity="0.04" cx="10.5" cy="5.80029008" rx="5.5" ry="2.86367051"></ellipse>\n            <ellipse opacity="0.04" cx="10.5" cy="5.80029008" rx="4.5" ry="2.38636864"></ellipse>\n          </g>\n          <g fill="${e}">\n            <path d="M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"></path>\n          </g>\n          <g opacity="0.25" fill="${e}">\n            <path d="M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"></path>\n          </g>\n          <g transform="translate(6.0, 7.0)" fill="#FFFFFF"></g>\n          <g transform="translate(8.0, 8.0)">\n              <circle fill="${e}" opacity="0.25" cx="5.5" cy="5.5" r="5.4999962"></circle>\n              <circle fill="#FFFFFF" cx="5.5" cy="5.5" r="5.4999962"></circle>\n            </g>\n          </g>\n      </svg>\n    `)}}class MapsterHelpers{constructor(){this.queuedImages=[]}isMobile(){let e=!1;/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&(e=!0);return e}changeCursor(e,t,o){t&&t.data&&t.data.enable_popup&&(e.getCanvas().style.cursor="on"===o?"pointer":"grab")}formatResponse(e){["location","line","polygon"].forEach((t=>{e[t+"s"].forEach((o=>{this.setObjectProperties(o,e[t+"_template"]);this.setPopupStyles(o,e.popup_styles)}))}));return new Promise((t=>{t(e)}))}simulateMouseActions(e,t,o,r){const n=o.find((e=>e.mapsterProperties.id===parseInt(t)));if(n){let t=n.mapsterProperties.data.default_zoom_level&&""!==n.mapsterProperties.data.default_zoom_level?n.mapsterProperties.data.default_zoom_level:15;e.jumpTo({center:n.mapsterProperties.data.location.coordinates,zoom:t});if(n.mapsterProperties.data.enable_popup)if("click"===n.mapsterProperties.data.interaction)n.getElement().click();else if("hover"===n.mapsterProperties.data.interaction){const e=new Event("mouseenter");n.getElement().dispatchEvent(e)}}else{const o=r.find((e=>e.id===parseInt(t)));if(o){let t=o.data.default_zoom_level&&""!==o.data.default_zoom_level?o.data.default_zoom_level:15;e.jumpTo({center:o.data.location.coordinates,zoom:t});o.data.enable_popup&&("click"===o.data.interaction?setTimeout((()=>{e.fire("click",{mapsterFeatureID:o.id,originalEvent:{},lngLat:o.data.location.coordinates,point:e.project(o.data.location.coordinates)})}),100):"hover"===o.data.interaction&&setTimeout((()=>{e.fire("mousemove",{originalEvent:{},lngLat:o.data.location.coordinates,point:e.project(o.data.location.coordinates)})}),100))}}}getDefaultCenter(){let e=[0,0];"1"===window.mapster_params.activated&&window.mapster_params.mapster_default_lat&&window.mapster_params.mapster_default_lng&&(e=[parseFloat(window.mapster_params.mapster_default_lng),parseFloat(window.mapster_params.mapster_default_lat)]);return e}getDefaultZoom(){let e=2;"1"===window.mapster_params.activated&&window.mapster_params.mapster_default_zoom&&(e=parseFloat(window.mapster_params.mapster_default_zoom));return e}doHover(e,t){let o=t.data.line?"line":t.data.label||t.data.icon?"symbol":t.data.circle?"circle":t.data.polygon?"fill":[],r="line"===o||"fill"===o||"symbol"===o?t.data:"circle"===o?t.data.circle:t.data.symbol;if("symbol"===o){t.data.label.label_on&&(r=t.data.label.label_properties);t.data.icon.icon_on&&(r=t.data.icon.icon_properties)}if(r&&r.hover_effects&&r.hover_effects.hover_enabled){e.removeFeatureState({source:o});e.setFeatureState({source:o,id:t.id},{hover:!0})}}doHoverOut(e,t){let o=t.data.line?"line":t.data.label||t.data.icon?"symbol":t.data.circle?"circle":t.data.polygon?"fill":[],r="line"===o||"fill"===o?t.data:"circle"===o?t.data.circle:t.data.symbol;if("symbol"===o){t.data.label.label_on&&(r=t.data.label.label_properties);t.data.icon.icon_on&&(r=t.data.icon.icon_properties)}r&&r.hover_effects&&r.hover_effects.hover_enabled&&e.setFeatureState({source:o,id:t.id},{hover:!1})}doMarkerHover(e,t,o){let r=o.mapsterProperties.data;if(r.marker.hover_effects.hover_enabled){const n=new t.Marker({color:r.marker.hover_effects.hover_color,scale:parseFloat(r.marker.hover_effects.hover_scale)/100,rotation:parseFloat(r.marker.hover_effects.hover_rotation),anchor:r.marker.anchor});-1===n._element.className.indexOf("mapster-remove-hover")&&(n._element.className+=" mapster-remove-hover");-1===o._element.className.indexOf("mapster-hide-original")&&(o._element.className+=" mapster-hide-original");n.setLngLat([o._lngLat.lng,o._lngLat.lat]).addTo(e);return n}return!1}doMarkerHoverOut(e,t){t._element.className.indexOf("mapster-hide-original")>-1&&(t._element.className=t._element.className.replace(" mapster-hide-original",""));e.remove()}globeAnimate(e,t,o){e.getZoom();let r=360/(201-t);const n=e.getCenter();"east-west"===o?n.lng+=r:"west-east"===o?n.lng-=r:"north-south"===o?n.lat+=r:"south-north"===o&&(n.lat-=r);e.easeTo({center:n,duration:1e3,easing:e=>e})}setMapCompare(e,t,o,r){
}createFillImages(e,t){t.filter((e=>"fill-image"===e.data.polygon_style)).forEach(((t,o)=>{let r=turf.bbox(t.data.polygon),n=[[r[0],r[3]],[r[2],r[3]],[r[2],r[1]],[r[0],r[1]]];if(t.data.polygon_image){e.addSource(`fill-image-${o}`,{type:"image",url:t.data.polygon_image,coordinates:n});e.addLayer({id:`fill-image-${o}-layer`,type:"raster",source:`fill-image-${o}`,paint:{"raster-fade-duration":0}})}}))
/* </fs_premium_only> */}applyProSearchFilter(e,t){
return t}setGeolocationOnLoad(e){
}setMapBreakpointSizes(e,t){
}async getImageData(e){return wp.media.attachment(e).fetch().then((e=>e))}async setCustomImageMap(e,t,o){
}loadModalSteps(e,t,o,r,n,a){const i=new MapsterConstants;let s=!1,l=[];if("create_point"===r){if(n)if(1===n.length){s=n[0].term_id;if(a.submission_interface.include_address_search){p(e);c()}else{c();d()}}else{p(e);jQuery(`#mapster-submission-modal-${e} .mapster-submission-modal-content`).html(`\n            <div class="mapster-category-container">\n              ${n.map((e=>`\n                  <div class="mapster-category-tile mapster-cat-set" data-category="${e.term_id}">\n                    ${e.icon?`<div class="mapster-category-image"><img src="${e.icon}" /></div>`:""}\n                    ${e.name?`<div class="mapster-category-name"><p>${e.name}</p></div>`:""}\n                    ${e.description?`<div class="mapster-category-description"><p>${e.description}</p></div>`:""}\n                  </div>\n                `)).join("")}\n            </div>\n          `)}else{p(e);jQuery(`#mapster-submission-modal-${e} .mapster-submission-modal-content`).html(`\n          <div class="mapster-category-container" data-category="none">\n            <div class="mapster-category-tile mapster-cat-set">${a.custom_texts.add_point_text}</div>\n          </div>\n        `)}jQuery(document).on("click",`#mapster-submission-modal-${e} .mapster-category-tile.mapster-cat-set`,(function(){"none"!==jQuery(this).data("category")&&(s=jQuery(this).data("category"));c()}))}if("edit_point"===r){const t=window.mapster_params.user_submission_permalink;p(e);jQuery(`#mapster-submission-modal-${e} .mapster-submission-modal-content`).html(`\n        ${i.loaderHTML()}\n        <iframe\n          onload="jQuery('.mapster-map-loader').remove();"\n          class="mapster-submission-embed"\n          src="${t}?pagetype=search&map_id=${e}">\n        </iframe>\n      `)}window.onmessage=function(e){if(e.data&&e.data.indexOf){e.data.indexOf("set_point")>-1&&c(e.data.replace("set_point-",""));if(e.data.indexOf("close_modal")>-1){jQuery(".mapster-submission-modal-overlay").fadeOut(50);jQuery(".mapster-submission-modal").fadeOut(100)}}};function p(e){jQuery(`.mapster-submit-${e} #mapster-submission-modal-overlay-${e}`).fadeIn(100);jQuery(`.mapster-submit-${e} #mapster-submission-modal-${e}`).fadeIn(150)}function c(r){a.submission_interface.include_address_search?jQuery(`#mapster-submission-modal-${e} .mapster-submission-modal-content`).html(`\n          <div class="mapster-description-text"><p>${a.custom_texts.choose_how}</p></div>\n          <div class="mapster-category-container">\n            ${a.submission_interface.include_address_search?`<div class="mapster-category-tile mapster-method-set" data-method="address" style="max-width:none;"><p>${a.custom_texts.address_search}</p></div>`:""}\n            <div class="mapster-category-tile mapster-method-set" data-method="click" style="max-width:none;"><p>${a.custom_texts.map_click}</p></div>\n          </div>\n        `):d();jQuery(document).on("click",`#mapster-submission-modal-${e} .mapster-category-tile.mapster-method-set`,(function(){if("address"===jQuery(this).data("method")){const r=new MapboxGeocoder({accessToken:a.submission_interface.mapbox_geocoder_access_token,mapboxgl:o,marker:!1});jQuery(`#mapster-submission-modal-${e} .mapster-submission-modal-content`).html(`<p>${a.custom_texts.search_location}</p>`);jQuery(`#mapster-submission-modal-${e} .mapster-submission-modal-content`)[0].appendChild(r.onAdd(t));r.on("result",(function(){d()}))}"click"===jQuery(this).data("method")&&d()}));jQuery(document).on("click",`#mapster-wp-maps-${e} .mapster-selection-instructions button`,(function(o){const r=t.getCenter();let n=!0;if(a.administration.allowed_area){const e=JSON.parse(a.administration.allowed_area);turf.booleanPointInPolygon([r.lng,r.lat],e.features[0])||(n=!1)}jQuery(".mapboxgl-ctrl").show();jQuery(".mapster-selection-overlay").remove();l=[r.lng,r.lat];jQuery(`#mapster-submission-modal-overlay-${e}`).fadeIn(100);jQuery(`#mapster-submission-modal-${e}`).fadeIn(150);jQuery(`#mapster-submission-modal-${e} .mapster-submission-modal-content`).html(`\n          <div class="mapster-description-text"><p>${n?a.custom_texts.selection_saved:a.custom_texts.selection_error}</p></div>\n          <div class="mapster-category-container">\n            <div class="mapster-category-tile mapster-method-set" data-method="click" style="max-width:none;"><p>${a.custom_texts.try_again}</p></div>\n            ${n?`<div class="mapster-category-tile mapster-coords-set" style="max-width:none;"><p>${a.custom_texts.confirm}</p></div>`:""}\n          </div>\n        `)}));jQuery(document).on("click",`#mapster-submission-modal-${e} .mapster-category-tile.mapster-coords-set`,(function(){const t=window.mapster_params.user_submission_permalink;let o=!!a.administration.template_post&&a.administration.template_post.ID;if(a.administration.multiple_templates){let e=a.submission_interface.categories.indexOf(s);o=a.administration.template_posts[e]}let n=r?"&type=edit&post_id="+r:"";jQuery(`#mapster-submission-modal-${e} .mapster-submission-modal-content`).html(`\n          ${i.loaderHTML()}\n          <iframe\n            onload="jQuery('.mapster-map-loader').remove();"\n            class="mapster-submission-embed"\n            src="${t}?category=${s}&coords=${l.join(",")}&map_id=${e}${n}">\n          </iframe>\n        `)}))}function d(){jQuery(".mapster-submission-modal-close").trigger("click");jQuery(".mapboxgl-ctrl").hide();jQuery(t._container).append(`\n        <div class="mapster-selection-overlay">\n          <div class="mapster-selection-instructions">\n            <p>${a.custom_texts.drag_zoom}</p>\n            <button>${a.custom_texts.capture_point}</button>\n          </div>\n          <svg version="1.1" id="Uploaded to svgrepo.com" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n             width="32px" height="32px" viewBox="0 0 32 32" style="enable-background:new 0 0 32 32;" xml:space="preserve">\n            <style type="text/css">\n              .dashing_een{fill:#141414;}\n              .st0{fill:#141414;}\n            </style>\n            <path class="dashing_een" d="M15.5,21.5v-2c0-0.276,0.224-0.5,0.5-0.5s0.5,0.224,0.5,0.5v2c0,0.276-0.224,0.5-0.5,0.5\n              S15.5,21.776,15.5,21.5z M16,13c0.276,0,0.5-0.224,0.5-0.5v-2c0-0.276-0.224-0.5-0.5-0.5s-0.5,0.224-0.5,0.5v2\n              C15.5,12.776,15.724,13,16,13z M16,3c0.276,0,0.5-0.224,0.5-0.5v-2C16.5,0.224,16.276,0,16,0c-0.276,0-0.5,0.224-0.5,0.5v2\n              C15.5,2.776,15.724,3,16,3z M16,32c0.276,0,0.5-0.224,0.5-0.5v-2c0-0.276-0.224-0.5-0.5-0.5s-0.5,0.224-0.5,0.5v2\n              C15.5,31.776,15.724,32,16,32z M22,16c0-0.276-0.224-0.5-0.5-0.5h-2c-0.276,0-0.5,0.224-0.5,0.5s0.224,0.5,0.5,0.5h2\n              C21.776,16.5,22,16.276,22,16z M13,16c0-0.276-0.224-0.5-0.5-0.5h-2c-0.276,0-0.5,0.224-0.5,0.5s0.224,0.5,0.5,0.5h2\n              C12.776,16.5,13,16.276,13,16z M3,16c0-0.276-0.224-0.5-0.5-0.5h-2C0.224,15.5,0,15.724,0,16c0,0.276,0.224,0.5,0.5,0.5h2\n              C2.776,16.5,3,16.276,3,16z M32,16c0-0.276-0.224-0.5-0.5-0.5h-2c-0.276,0-0.5,0.224-0.5,0.5s0.224,0.5,0.5,0.5h2\n              C31.776,16.5,32,16.276,32,16z M27,16c0,6.065-4.935,11-11,11S5,22.065,5,16S9.935,5,16,5S27,9.935,27,16z M26,16.5h-1.5\n              c-0.276,0-0.5-0.224-0.5-0.5s0.224-0.5,0.5-0.5H26c-0.255-5.115-4.387-9.245-9.5-9.5v1.5C16.5,7.776,16.276,8,16,8\n              s-0.5-0.224-0.5-0.5V6c-5.113,0.255-9.245,4.385-9.5,9.5h1.5C7.776,15.5,8,15.724,8,16s-0.224,0.5-0.5,0.5H6\n              c0.255,5.115,4.387,9.245,9.5,9.5v-1.5c0-0.276,0.224-0.5,0.5-0.5s0.5,0.224,0.5,0.5V26C21.613,25.745,25.745,21.615,26,16.5z"/>\n          </svg>\n        </div>\n      `)}}setProjectionGlobe(e,t){
}create3DModels(e,t){
}setPopupStyles(e,t){if(e.data.popup_style){let o=e.data.popup_style,r=t.find((e=>e.id===o));e.data.popup_style=r}}setObjectProperties(e,t){for(var o in t)if(this.isObject(t[o])){null==e[o]&&(e[o]={});this.setObjectProperties(e[o],t[o])}else null==e[o]&&(e[o]=t[o])}isObject(e){return"object"==typeof e&&!Array.isArray(e)&&null!==e}makeFeatureJSON(e){let t=e.line?e.line:e.location?e.location:!!e.polygon&&e.polygon;return{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:{type:t.type,coordinates:t.coordinates}}]}}getLighting(e){const t=new MapsterConstants;if(""!==e.custom_mapbox_style)return!1;if("custom-image"===e.map_provider)return!1;if(""!==e.access_token){var o=e.map_tile_style_access_token;return t.returnStyleProviders().find((e=>e.id===o)).lighting}o=e.map_tile_style_no_access_token;return t.returnStyleProviders().find((e=>e.id===o)).lighting}getStyle(e){const t=new MapsterConstants;if(""!==e.custom_mapbox_style)return e.custom_mapbox_style;if("custom-image"===e.map_provider)return t.returnStyleProviders().find((e=>"custom-image"===e.id)).style;if(""!==e.access_token){var o=e.map_tile_style_access_token;return t.returnStyleProviders().find((e=>e.id===o)).style}o=e.map_tile_style_no_access_token;return t.returnStyleProviders().find((e=>e.id===o)).style}isInControlMenu(e,t){let o=[];e&&e.enable&&e.included_controls&&(o=JSON.parse(e.included_controls));return o.indexOf(t)>-1}addMapControl(e,t,o,r,n,a,i,s={}){t&&e.removeControl(t);if(o){const t=new i(s);n&&""!==n&&document.getElementById(n)?document.getElementById(n).appendChild(t.onAdd(e)):a?document.getElementById("mapster-control-menu-holder").appendChild(t.onAdd(e)):e.addControl(t,r);return t}return!1}searchCoordinateGeocoder(e){
}searchLocalFeatures(e,t,o,r,n,a=!1){var i={type:"FeatureCollection",features:[]};o.concat(r.concat(n)).forEach((e=>{var t=this.makeFeatureJSON(e.data);i.features.push(this.makeGeocoderResult(e,t,a))}));let s=this.localFeaturesTextMatch(e,t,i.features);s.sort(((e,t)=>e.place_name>t.place_name?1:-1));return s}localFeaturesTextMatch(e,t,o){let r=[];const n=t.split(" ").filter((e=>""!==e));o.forEach((o=>{var a=!1;o.properties.searchableTexts.forEach((i=>{var s={type:"Feature",id:o.properties.id,place_name:jQuery("<div>").html(o.properties.place_name).text()};"1"===window.mapster_params.activated&&o.properties.thumbnail&&(s.place_name=`\n              <img src="${o.properties.thumbnail}" class="mapster-filter-dropdown-image" /><br />${s.place_name}\n            `);if(!(window.mapster_categories_hidden_features&&window.mapster_categories_hidden_features.length>0&&-1!==window.mapster_categories_hidden_features.indexOf(o.properties.id))){if("exact-match"===e&&i&&(i.toLowerCase().indexOf(t.toLowerCase())>-1||" "===t)&&!a){s.center=turf.center(o).geometry.coordinates;"Point"!==o.geometry.type&&(s.bbox=turf.bbox(o));r.push(s);a=!0}
}}))}));return r}initializeSlider(e,t){const o=e=>{jQuery("#mapster-slider ul").animate({left:jQuery("#mapster-slider ul li").width()*("right"===e?-1:1)},200,(()=>{jQuery("#mapster-slider ul li:first-child").appendTo("#mapster-slider ul");jQuery("#mapster-slider ul").css("left","")}))};if(!window.sliderClicksInitialized){jQuery(document).on("click","#mapster-slider .mapster-slider-control_prev",(function(){o("left")}));jQuery(document).on("click","#mapster-slider .mapster-slider-control_next",(function(){o("right")}));window.sliderClicksInitialized=!0}}makeHeatmap(e,t,o,r){
}loadListings(e,t,o){
}setListingEvents(e,t,o){
}setListingStickyMap(){
}createHeatmapProperties(e,t,o,r){
}fadeHeatmapFeatures(e,t){
}setClustering(e,t,o,r,n,a,i,s,l,p,c){a&&this.doMarkerClustering(e,t,o,a,i,s,c);return n||r?this.doSymbolClustering(e,t,o,r,n,s,l,p,c):[]}doMarkerClustering(e,t,o,r,n,a,i){let s=o.cluster_by_category?o.categories_to_cluster.map((e=>"marker-"+e)):["marker"];this.makeClusters(e,t,o,s,a,[],[],i);e.on("render",(()=>{let t=[];s.forEach((o=>{if(!e.isSourceLoaded(o))return;const r=e.querySourceFeatures(o);t=t.concat(r.filter((e=>e.properties.id)).map((e=>e.properties.id)))}));n.forEach((o=>{-1===t.indexOf(o.mapsterProperties.id)?o.remove():(!o._popup||o._popup&&!o._popup.isOpen())&&o.addTo(e)}))}))}doSymbolClustering(e,t,o,r,n,a,i,s,l){var p=[];n&&(o.cluster_by_category?o.categories_to_cluster.forEach((e=>{p.push("symbol-"+e)})):p.push("symbol"));r&&(o.cluster_by_category?o.categories_to_cluster.forEach((e=>{p.push("circle-"+e)})):p.push("circle"));this.makeClusters(e,t,o,p,a,i,s,l);return p}makeClusters(e,t,o,r,n,a,i,s){let l=[];r.forEach((t=>{e.getLayer(`${t}-cluster-count`)&&e.removeLayer(`${t}-cluster-count`);e.getLayer(`${t}-clusters`)&&e.removeLayer(`${t}-clusters`);e.getLayer(`${t}-clusters-border`)&&e.removeLayer(`${t}-clusters-border`);e.getLayer(t)&&e.removeLayer(t);if(e.getSource(t))try{e.removeSource(t)}catch(e){}if(t.indexOf("-")>-1){let e=parseInt(t.split("-")[1]);l.push(e)}}));r.forEach(((r,p)=>{let c,d=r.split("-")[0];if(l.length>0){let t=this.createLayerGeoJSON(e,"location",d,n,a,i,l);e.getSource(d)&&e.getSource(d).setData(t)}else if(e.getLayer(d)&&e.getSource(d)){e.removeLayer(d);e.removeSource(d)}c=r.indexOf("marker")>-1?this.createMarkerGeoJSON(n,r):this.createLayerGeoJSON(e,"location",r,n,a,i,[]);s=s||[];var u=c.features.filter((e=>-1===s.indexOf(e.properties.post_id)));let m=!1;if(o.show_category_name){let e=n.concat(a.concat(i)),t=parseInt(r.split("-")[1]);e.forEach((e=>{m||(m=e.categories.find((e=>e.id===t)))}))}e.addSource(r,{type:"geojson",data:{type:"FeatureCollection",features:u},cluster:!0,clusterMaxZoom:14,clusterRadius:50});if(r.indexOf("marker")>-1)e.addLayer({id:r,source:r,type:"circle",filter:["!",["has","point_count"]],paint:{"circle-radius":0}});else{var f=this.getLayerExpressions("location",r.indexOf("symbol")>-1?"symbol":"circle",t);e.addLayer({id:r,source:r,type:r.split("-")[0],filter:["!",["has","point_count"]],paint:f.paint,layout:f.layout})}this.addIcons(e,r,c);let h="#51bbd6",_=100,g=20,y="#f1f075",v=750,b=30,w="#f28cb1",C=40;
if(o.image_on_cluster&&""!==o.image_on_cluster)this.addNewIcon(e,o.image_on_cluster,"cluster",(()=>{
}));else{e.addLayer({id:`${r}-clusters`,type:"circle",source:r,filter:["has","point_count"],paint:{"circle-color":["step",["get","point_count"],h,_,y,v,w],"circle-radius":["step",["get","point_count"],g,_,b,v,C]}});e.addLayer({id:`${r}-cluster-count`,type:"symbol",source:r,filter:["has","point_count"],layout:{"text-field":m?m.name:"{point_count_abbreviated}","text-font":"mapbox"===t?["DIN Offc Pro Medium","Arial Unicode MS Bold"]:["Open Sans Regular"],"text-size":12}})}setTimeout((()=>{e.on("click",`${r}-clusters`,(t=>{const o=e.queryRenderedFeatures(t.point,{layers:[`${r}-clusters`]}),n=o[0].properties.cluster_id;e.getSource(r).getClusterExpansionZoom(n,((t,r)=>{e.easeTo({center:o[0].geometry.coordinates,zoom:r+1})}))}))}),500)}))}makeGeocoderResult(e,t,o){var r=t.features[0];r.properties={searchableTexts:[e.data.popup?e.data.popup.header_text:"",e.data.popup?e.data.popup.body_text:"",e.title,e.content],id:e.id,place_name:e.title};"1"===window.mapster_params.activated&&o&&e.data.popup&&e.data.popup.featured_image&&(r.properties.thumbnail=e.data.popup.featured_image.url);return r}modifyDropdown(e,t){e.container.classList.add("mapster-maps-dropdown");jQuery(".mapster-maps-dropdown").find(".mapboxgl-ctrl-geocoder--icon.mapboxgl-ctrl-geocoder--icon-search").replaceWith('<svg viewBox="0 0 32 32" class="mapboxgl-ctrl-geocoder--icon mapboxgl-ctrl-geocoder--icon-search" viewBox="0 0 32 32" aria-hidden="true">\n      <path d="M24 11.305l-7.997 11.39L8 11.305z"/>\n    </svg>');jQuery(".mapster-maps-dropdown").find(".mapboxgl-ctrl-geocoder--input").wrap('<div class="input-wrapper"></div>');jQuery(".mapster-maps-dropdown").find(".mapboxgl-ctrl-geocoder--input").attr("disabled",!0);jQuery(".mapster-maps-dropdown").find(".mapboxgl-ctrl-geocoder--input").css("pointer-events","none");jQuery(document).on("click",".mapster-maps-dropdown .input-wrapper, .mapster-maps-dropdown .mapboxgl-ctrl-geocoder--icon-search",(()=>{e.setInput("");jQuery(".suggestions-wrapper .suggestions li").removeClass("active")}));jQuery(document).on("click",".mapboxgl-ctrl-geocoder--icon.mapboxgl-ctrl-geocoder--icon-close",(()=>{e.clear();jQuery(".suggestions-wrapper .suggestions").hide()}))}openExternalLink(e){e&&e.data.open_link_on_click&&e.data.click_link&&e.data.click_link.url&&(e.data.click_link.open_link_in_new_tab?window.open(e.data.click_link.url):window.open(e.data.click_link.url,"_self"))}getMapBounds(e,t,o){var r={type:"FeatureCollection",features:[]};[["location",e],["line",t],["polygon",o]].forEach((e=>{e[1].forEach((e=>{var t=this.makeFeatureJSON(e.data);r.features.push(t.features[0])}))}));return r.features.length>0?turf.bbox(r):null}openStoreLocatorClick(e,t){e.enable&&jQuery(`.mapster-store-locator-list[data-id="${t}"]`).trigger("click",[!0])}openSidebarClick(e,t,o,r,n,a){!e.enable&&t&&this.setSidebarHTML(o.data,r,n,a)}openPopup(e,t,o,r,n,a,i){if(!a.enable&&!i){o&&o.remove();if(r.data.popup_style){if(!r.data.popup_style.open_as_modal_immediately){r.data.location&&"Point"===r.data.location.type&&(n=r.data.location.coordinates);let o=new t.Popup(this.returnPopupOptions(r.data)).setLngLat(n).setHTML(this.getPopupHTML(r.id,r.data));this.centerPopup(e,o,r);o.addTo(e);return o}this.openDirectToModal(r)}}}openDirectToModal(e){
}centerPopup(e,t,o){
}mouseIsNear(e,t,o){if(e&&e.offset()){var r=e.offset().left-t,n=e.offset().top-t,a=r+e.width()+2*t,i=n+e.height()+2*t,s=o.pageX,l=o.pageY;return s>r&&s<a&&l>n&&l<i}return!1}getDirectionsLatLng(e){let t="";e.location&&(t=e.location.coordinates[1].toString()+","+e.location.coordinates[0].toString());if(e.line){let o=turf.center(e.line);t=o.geometry.coordinates[1].toString()+","+o.geometry.coordinates[0].toString()}if(e.polygon){let o=turf.center(e.polygon);t=o.geometry.coordinates[1].toString()+","+o.geometry.coordinates[0].toString()}return t}getPopupHTML(e,t){var o=this.getPopupStyle(t),r=this.returnPopupCSS(t),n=this.returnPopupLayout(t),a=this.returnPopupContent(t),i=this.returnPopupHTML(t),s="";"to-directions"===a.button_action&&(s=this.getDirectionsLatLng(t));n.enable_image&&"gallery"===a.image_type&&setTimeout((()=>{this.initializeSlider(`mapster-popup-${t.popup_style.id}`,a.images.length+1)}),400);return`\n      <style>${o}</style>\n      ${n.use_custom_css?`<style>${r.css_editor.replace(/#mapster-popup/g,`#mapster-popup-${t.popup_style.id}`)}</style>`:""}\n      ${n.use_custom_html?this.replaceHTMLValues(i.html_editor,a,e):`<div id="mapster-popup-${t.popup_style.id}" class="map-popup-background ${this.sanitizeInput(n.popup_class)} mapster-feature-popup-${e}">\n          ${n.enable_header?`<div class="map-popup-header">\n              <h2>${a.header_text}</h2>\n            </div>`:""}\n          ${n.enable_image&&"feature-image"===a.image_type?'<div class="map-popup-image"></div>':""}\n          ${n.enable_image&&"gallery"===a.image_type?`<div class="map-popup-gallery">\n              <div id="mapster-slider" style="height : ${r.image_height}px;">\n                <div class="mapster-slider-control_next">></div>\n                <div class="mapster-slider-control_prev"><</div>\n                <ul>\n                  ${a.images.map((e=>`<li style="height : ${r.image_height}px; background-image: url(${e});"> </li>`)).join(" ")}\n                </ul>\n              </div>\n            </div>`:""}\n          ${n.enable_body?`<div class="map-popup-body">\n              ${t.popup.render_shortcode&&"1"===window.mapster_params.activated?`<iframe class="mapster-popup-shortcode-iframe" scrolling="no" onload="this.style.height=(this.contentDocument.getElementById('mapster-popup-shortcode-content').offsetHeight+10) + 'px';" src='${window.mapster_params.directory}../admin/includes/mapster-popup-shortcode.php?feature_id=${e}&popup_id=${t.popup_style.id}'></iframe>`:`<p>${a.body_text}</p>`}\n            </div>`:""}\n          ${n.enable_footer?`<div class="map-popup-footer">\n              ${"do-nothing"===a.button_action?`<button class="map-popup-footer-button">${a.button_text}</button>`:""}\n              ${"to-post"===a.button_action?`<button class="map-popup-footer-button" onclick="${a.open_link_in_new_tab?`window.open('${t.popup.permalink}', '_blank');`:`window.open('${t.popup.permalink}', '_self');`}">\n                  ${a.button_text}\n                 </button>`:""}\n              ${"to-link"===a.button_action?`<button class="map-popup-footer-button" onclick="${a.open_link_in_new_tab?`window.open('${a.button_url}', '_blank');`:`window.open('${a.button_url}', '_self');`}">\n                  ${a.button_text}\n                 </button>`:""}\n              ${"to-directions"===a.button_action?`<button class="map-popup-footer-button" onclick="window.open('https://www.google.com/maps/dir/?api=1&destination=${s}', '_blank');">\n                  ${a.button_text}\n                 </button>`:""}\n              ${"to-modal"===a.button_action?`<button class="map-popup-footer-button mapster-button-modal-open">\n                  ${a.button_text}\n                 </button>\n                 <div class="mapster-modal-content-in-popup"><iframe style='width: 100%; height: ${window.innerHeight-300}px;' src='${window.mapster_params.directory}../admin/includes/mapster-modal-shortcode.php?feature_id=${e}&type=modal_details'></iframe></div>`:""}\n            </div>`:""}\n        </div>`}\n    `}getPopupStyle(e){var t=this.returnPopupCSS(e),o=this.returnPopupLayout(e),r=this.returnPopupContent(e),n=e.popup_style.id;return`\n      .mapboxgl-popup .mapboxgl-popup-content, .maplibregl-popup .maplibregl-popup-content {\n        padding: 0px;\n        background: none;\n        border: none;\n        border-radius: none;\n        box-shadow: none;\n      }\n      #mapster-popup-${n}.map-popup-background {\n        background : ${t.background};\n        text-align : ${t.align};\n        border-radius: 3px;\n        box-shadow: 0 1px 2px rgb(0 0 0 / 10%);\n      }\n      #mapster-popup-${n} .map-popup-header {\n        background : ${t.header};\n        padding: 10px;\n      }\n      #mapster-popup-${n} .map-popup-header h2 {\n        all : revert;\n        color : ${t.header_text};\n        text-align : ${t.align};\n        font-weight: bold;\n        margin: 0;\n        padding: 0;\n      }\n      #mapster-popup-${n} .map-popup-image {\n        background-image : url("${r.featured_image?r.featured_image.url:""}");\n        background-position : center center;\n        background-size: cover;\n        height : ${t.image_height}px;\n        width: 100%;\n      }\n      #mapster-popup-${n} .map-popup-body {\n        margin-top: -1px;\n        background : ${t.body};\n        padding: 10px;\n        color : ${t.body_text};\n      }\n      #mapster-popup-${n} .map-popup-body p {\n        padding: 0px;\n        text-align : ${t.align};\n        margin: 0px;\n      }\n      #mapster-popup-${n} .map-popup-footer {\n        margin-top: -1px;\n        background : ${t.footer};\n        padding: 10px;\n      }\n      #mapster-popup-${n} .map-popup-footer .map-popup-footer-button {\n        all : revert;\n        background : ${t.button};\n        border-color: ${t.button};\n        color : ${t.button_text};\n        padding: 5px;\n        text-decoration: none;\n        text-shadow: none;\n      }\n      #mapster-popup-${n} .map-popup-footer .map-popup-footer-button:hover {\n        cursor: pointer;\n        filter: brightness(1.15);\n      }\n\t\t\t.mapboxgl-popup.mapboxgl-popup-anchor-top .mapboxgl-popup-tip, .maplibregl-popup.maplibregl-popup-anchor-top .maplibregl-popup-tip,\n\t\t\t.mapboxgl-popup.mapboxgl-popup-anchor-top-left .mapboxgl-popup-tip, .maplibregl-popup.maplibregl-popup-anchor-top-left .maplibregl-popup-tip,\n\t\t\t.mapboxgl-popup.mapboxgl-popup-anchor-top-right .mapboxgl-popup-tip, .maplibregl-popup.maplibregl-popup-anchor-top-right .maplibregl-popup-tip {\n        border-bottom-color : ${t.pointer};\n        display : ${o.enable_pointer?"block":"none"};\n      }\n\t\t\t.mapboxgl-popup.mapboxgl-popup-anchor-right .mapboxgl-popup-tip, .maplibregl-popup.maplibregl-popup-anchor-right .maplibregl-popup-tip {\n\t\t\t\tborder-left-color : ${t.pointer};\n        display : ${o.enable_pointer?"block":"none"};\n\t\t\t}\n\t\t\t.mapboxgl-popup.mapboxgl-popup-anchor-left .mapboxgl-popup-tip, .maplibregl-popup.maplibregl-popup-anchor-left .maplibregl-popup-tip {\n\t\t\t\tborder-right-color : ${t.pointer};\n        display : ${o.enable_pointer?"block":"none"};\n\t\t\t}\n\t\t\t.mapboxgl-popup.mapboxgl-popup-anchor-bottom .mapboxgl-popup-tip, .maplibregl-popup.maplibregl-popup-anchor-bottom .maplibregl-popup-tip,\n\t\t\t.mapboxgl-popup.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-tip, .maplibregl-popup.maplibregl-popup-anchor-bottom-left .maplibregl-popup-tip,\n\t\t\t.mapboxgl-popup.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-tip, .maplibregl-popup.maplibregl-popup-anchor-bottom-right .maplibregl-popup-tip {\n        border-top-color : ${t.pointer};\n        display : ${o.enable_pointer?"block":"none"};\n      }\n    `}sanitizeInput(e){const t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"};return e.replace(/[&<>"'/]/gi,(e=>t[e]))}setSidebarHTML(e,t,o,r){var n="#mapster-wp-maps-"+r;jQuery(".mapster-sidebar-popup").remove();var a=jQuery(n).height(),i=(jQuery(n).width(),this.getPopupStyle(e)),s=this.returnPopupCSS(e),l=this.returnPopupLayout(e),p=this.returnPopupContent(e),c=this.returnPopupHTML(e);l.enable_image&&"gallery"===p.image_type&&setTimeout((()=>{this.initializeSlider(`mapster-sidebar-popup-${e.popup_style.id}`,p.images.length+1)}),400);jQuery(document).on("click",".mapster-sidebar-popup-exit",(()=>{jQuery(".mapster-sidebar-popup").remove()}));const d=parseFloat(t),u=parseFloat(o),m=`\n      <style>${i.replace(/-popup/g,"-sidebar-popup")}</style>\n      ${l.use_custom_css?`<style>${s.css_editor.replace(/#mapster-popup/g,`#mapster-popup-${e.popup_style.id}`)}</style>`:""}\n      <div id="mapster-sidebar-popup-${e.popup_style.id}" class="mapster-sidebar-popup" style="min-width: ${d}px; min-height: ${a/2}px; max-height: ${a}px; max-width: ${u}px;">\n      ${l.use_custom_html?this.replaceHTMLValues(c.html_editor,p,e.popup_style.id):`<div>\n          <div class="mapster-sidebar-popup-exit">&#10006;</div>\n          ${l.enable_header?`<div class="map-sidebar-popup-header">\n              <h2>${p.header_text}</h2>\n            </div>`:""}\n          ${l.enable_image&&"feature-image"===p.image_type?'<div class="map-sidebar-popup-image"></div>':""}\n          ${l.enable_image&&"gallery"===p.image_type?`<div class="map-sidebar-popup-gallery">\n              <div id="mapster-slider" style="height : ${s.image_height}px;">\n                <div class="mapster-slider-control_next">></div>\n                <div class="mapster-slider-control_prev"><</div>\n                <ul>\n                  ${p.images.map((e=>`<li style="height : ${s.image_height}px; background-image: url(${e});"> </li>`)).join(" ")}\n                </ul>\n              </div>\n            </div>`:""}\n          ${l.enable_body?`<div class="map-sidebar-popup-body">\n              <p>${p.body_text}</p>\n            </div>`:""}\n          ${l.enable_footer?`<div class="map-sidebar-popup-footer">\n              ${"do-nothing"===p.button_action?`<button class="map-sidebar-popup-footer-button">${p.button_text}</button>`:""}\n              ${"to-post"===p.button_action?`<button class="map-sidebar-popup-footer-button" onclick="${p.open_link_in_new_tab?`window.open('${e.popup.permalink}', '_blank');`:`window.open('${e.popup.permalink}', '_self');`}">\n                  ${p.button_text}\n                 </button>`:""}\n              ${"to-link"===p.button_action?`<button class="map-sidebar-popup-footer-button" onclick="${p.open_link_in_new_tab?`window.open('${p.button_url}', '_blank');`:`window.open('${p.button_url}', '_self');`}">\n                  ${p.button_text}\n                 </button>`:""}\n              ${"to-modal"===p.button_action?`<button class="map-sidebar-popup-footer-button mapster-button-modal-open">\n                  ${p.button_text}\n                 </button>\n                 <div class="mapster-modal-content-in-popup">${p.modal_details}</div>`:""}\n            </div>`:""}\n        </div>`}\n      </div>\n    `;jQuery(n).append(m)}replaceHTMLValues(e,t,o){let r;
return`\n      <div class="mapster-feature-popup-${o}">\n        ${r}\n      </div>\n    `}returnPopupHTML(e){return{html_editor:e.popup_style.html_editor}}returnPopupContent(e){return{header_text:e.popup.header_text,image_type:e.popup.image_type,featured_image:e.popup.featured_image,images:e.popup.images,body_text:e.popup.body_text,button_text:e.popup.button_text,button_action:e.popup.button_action,button_url:e.popup.button_url,modal_details:e.popup.modal_details,additional_details:e.additional_details,open_link_in_new_tab:e.popup.open_link_in_new_tab}}returnPopupLayout(e){return{enable_header:e.popup_style.enable_header,enable_image:e.popup_style.enable_image,enable_body:e.popup_style.enable_body,enable_footer:e.popup_style.enable_footer,enable_pointer:e.popup_style.enable_pointer,use_custom_css:e.popup_style.use_custom_css,use_custom_html:e.popup_style.use_custom_html,popup_class:e.popup_style.popup_class}}returnPopupOptions(e){return{anchor:e.popup_style.popup_anchor?e.popup_style.popup_anchor:"bottom",focusAfterOpen:!1,className:"hover"===e.interaction?"mapster-hover-popup":"",closeButton:e.popup_style.close_button,closeOnClick:e.popup_style.close_on_click,closeMapMove:e.popup_style.close_on_map_move,maxWidth:e.popup_style.max_width+"px"}}returnPopupCSS(e){return{background:e.popup_style.background,header:e.popup_style.header,image_height:e.popup_style.image_height,body:e.popup_style.body,footer:e.popup_style.footer,button:e.popup_style.button,pointer:e.popup_style.pointer,header_text:e.popup_style.header_text,body_text:e.popup_style.body_text,button_text:e.popup_style.button_text,align:e.popup_style.align,css_editor:e.popup_style.css_editor,max_width:e.popup_style.max_width}}getMarkerStyles(e){var t=e.data;return{color:t.marker.color,scale:parseFloat(t.marker.scale)/100,rotation:parseFloat(t.marker.rotation),anchor:t.marker.anchor}}getLayerExpressions(e,t,o){if("line"===e)return{layout:{},paint:{"line-color":["case",["boolean",["feature-state","hover"],!1],["get","hover_effects_hover_color"],["has","color"],["get","color"],"#000"],"line-opacity":["case",["boolean",["feature-state","hover"],!1],["/",["to-number",["get","hover_effects_hover_opacity"]],100],["has","opacity"],["/",["to-number",["get","opacity"]],100],1],"line-width":["case",["boolean",["feature-state","hover"],!1],["to-number",["get","hover_effects_hover_width"]],["has","width"],["to-number",["get","width"]],2],"line-dasharray":"mapbox"===o?["case",["==",!0,["to-boolean",["get","dashed_line"]]],["get","dash_properties_line_dash_array"],["literal",[1,0]]]:[1,0]}};if("polygon"===e){if("fill"===t)return{layout:{},paint:{"fill-color":["case",["boolean",["feature-state","hover"],!1],["get","hover_effects_hover_color"],["has","color"],["get","color"],"#000"],"fill-opacity":["case",["boolean",["feature-state","hover"],!1],["/",["to-number",["get","hover_effects_opacity"]],100],["has","opacity"],["/",["to-number",["get","opacity"]],100],1],"fill-outline-color":["case",["boolean",["feature-state","hover"],!1],["get","hover_effects_outline-color"],["has","outline-color"],["get","outline-color"],"rgba(0,0,0,0)"]}};if("fill-extrusion"===t)return"1"===window.mapster_params.activated?{layout:{},paint:{"fill-extrusion-color":["case",["boolean",["feature-state","hover"],!1],["get","hover_effects_hover_color"],["has","color"],["get","color"],"#000"],"fill-extrusion-opacity":.75,"fill-extrusion-base":["case",["boolean",["feature-state","hover"],!1],["/",["to-number",["get","3d_polygon_base"]],100],["has","3d_polygon_base"],["to-number",["get","3d_polygon_base"]],0],"fill-extrusion-height":["case",["boolean",["feature-state","hover"],!1],["to-number",["get","3d_polygon_height"]],["has","3d_polygon_height"],["to-number",["get","3d_polygon_height"]],0]}}:{layout:{},paint:{}}}if("location"===e){if("circle"===t)return{layout:{},paint:{"circle-color":["case",["boolean",["feature-state","hover"],!1],["get","circle_hover_effects_hover_color"],["has","circle_color"],["get","circle_color"],"#000"],"circle-opacity":["case",["boolean",["feature-state","hover"],!1],["/",["to-number",["get","circle_hover_effects_hover_opacity"]],100],["has","circle_opacity"],["/",["to-number",["get","circle_opacity"]],100],1],"circle-radius":["case",["boolean",["feature-state","hover"],!1],["to-number",["get","circle_hover_effects_hover_radius"]],["has","circle_radius"],["to-number",["get","circle_radius"]],0],"circle-stroke-width":["case",["boolean",["feature-state","hover"],!1],["to-number",["get","circle_hover_effects_hover_stroke-width"]],["has","circle_stroke-width"],["to-number",["get","circle_stroke-width"]],0],"circle-stroke-color":["case",["boolean",["feature-state","hover"],!1],["get","circle_hover_effects_hover_stroke-color"],["has","circle_stroke-color"],["get","circle_stroke-color"],"#000"],"circle-stroke-opacity":["case",["boolean",["feature-state","hover"],!1],["/",["to-number",["get","circle_hover_effects_hover_stroke-opacity"]],100],["has","circle_stroke-opacity"],["/",["to-number",["get","circle_stroke-opacity"]],100],1]}};if("symbol"===t)return{layout:{"text-field":["case",["has","label_text_properties_text-field"],["get","label_text_properties_text-field"],"New Text"],"text-font":["case",["==","Open Sans Regular",["get","label_text_properties_text-font"]],["literal",["Open Sans Regular"]],["==","Open Sans Bold",["get","label_text_properties_text-font"]],["literal",["Open Sans Bold"]],["==","Open Sans Italic",["get","label_text_properties_text-font"]],["literal",["Open Sans Italic"]],["==","Klokantech Noto Sans Regular",["get","label_text_properties_text-font"]],["literal",["Klokantech Noto Sans Regular"]],["==","Klokantech Noto Sans Bold",["get","label_text_properties_text-font"]],["literal",["Klokantech Noto Sans Bold"]],["==","Klokantech Noto Sans Italic",["get","label_text_properties_text-font"]],["literal",["Klokantech Noto Sans Italic"]],["==","Metropolis",["get","label_text_properties_text-font"]],["literal",["Metropolis"]],["==","Metropolis Bold",["get","label_text_properties_text-font"]],["literal",["Metropolis Bold"]],["==","Metropolis Regular Italic",["get","label_text_properties_text-font"]],["literal",["Metropolis Regular Italic"]],["literal",["Open Sans Regular"]]],"text-rotate":["case",["has","label_text_properties_text-rotate"],["to-number",["get","label_text_properties_text-rotate"]],0],"text-size":["case",["==",!1,["get","label_label_on"]],0,["has","label_text_properties_text-size"],["to-number",["get","label_text_properties_text-size"]],16],"icon-size":["interpolate",["exponential",2],["zoom"],1,["case",["==",!1,["get","icon_icon_on"]],0,["all",["has","icon_icon_properties_icon-static-size"],["==",!0,["get","icon_icon_properties_icon-static-size"]]],["*",["to-number",["get","icon_icon_properties_icon-size"]],["^",2,-15]],["has","icon_icon_properties_icon-size"],["/",["to-number",["get","icon_icon_properties_icon-size"]],100],1],22,["case",["==",!1,["get","icon_icon_on"]],0,["all",["has","icon_icon_properties_icon-static-size"],["==",!0,["get","icon_icon_properties_icon-static-size"]]],["*",["to-number",["get","icon_icon_properties_icon-static-size"]],["^",2,6]],["has","icon_icon_properties_icon-size"],["/",["to-number",["get","icon_icon_properties_icon-size"]],100],1]],"icon-rotate":["case",["has","icon_icon_properties_icon-rotate"],["to-number",["get","icon_icon_properties_icon-rotate"]],0],"icon-allow-overlap":!0,"icon-ignore-placement":!0,"icon-anchor":["case",["has","icon_icon_properties_icon-anchor"],["get","icon_icon_properties_icon-anchor"],"center"],"icon-offset":["case",["has","icon_icon_properties_offset_array"],["get","icon_icon_properties_offset_array"],["literal",[0,0]]],"text-offset":["case",["has","label_text_properties_offset_array"],["get","label_text_properties_offset_array"],["literal",[0,0]]],"text-allow-overlap":!0,"text-ignore-placement":!0},paint:{"text-color":["case",["has","label_text_properties_text-color"],["get","label_text_properties_text-color"],"#000000"],"text-halo-width":["case",["has","label_text_properties_text-halo-width"],["to-number",["get","label_text_properties_text-halo-width"]],1],"text-halo-color":["case",["has","label_text_properties_text-halo-color"],["get","label_text_properties_text-halo-color"],"#FFFFFF"],"text-halo-blur":["case",["has","label_text_properties_text-halo-blur"],["/",["to-number",["get","label_text_properties_text-halo-blur"]],100],1],"text-opacity":["case",["has","label_text_properties_text-opacity"],["/",["to-number",["get","label_text_properties_text-opacity"]],100],1],"icon-opacity":["case",["boolean",["feature-state","hover"],!1],["/",["to-number",["get","icon_icon_properties_hover_effects_hover_opacity"]],100],["has","icon_icon_properties_icon-opacity"],["/",["to-number",["get","icon_icon_properties_icon-opacity"]],100],1]}}}}addIcons(e,t,o){t.indexOf("symbol")>-1&&o.features.forEach((o=>{o.properties.icon_icon_on&&o.properties["icon_icon_properties_icon-image_url"]&&this.addNewIcon(e,o.properties["icon_icon_properties_icon-image_url"],o.properties["icon_icon_properties_icon-image_id"],(()=>{e.getLayer(t)&&e.setLayoutProperty(t,"icon-image",["case",["has","icon_icon_properties_icon-image_id"],["concat","icon-image-",["get","icon_icon_properties_icon-image_id"]],"none"])}))}))}addNewIcon(e,t,o,r){if(this.queuedImages.indexOf(`icon-image-${o}`)>-1)r();else{this.queuedImages.push(`icon-image-${o}`);t||r();"https:"===window.location.protocol&&t.indexOf("http://")>-1&&(t=t.replace("http","https"));var n=new Image;n.src=t;n.crossOrigin="";n.onload=function(){if(e.loaded()){e.hasImage(`icon-image-${o}`)?e.updateImage(`icon-image-${o}`,n):e.addImage(`icon-image-${o}`,n);r()}else e.once("idle",(()=>{e.hasImage(`icon-image-${o}`)?e.updateImage(`icon-image-${o}`,n):e.addImage(`icon-image-${o}`,n);r()}))}}}createLayerGeoJSON(e,t,o,r,n,a,i){var s={type:"FeatureCollection",features:[]};let l="line"===t?n:"location"===t?r:"polygon"===t?a:[],p=o.indexOf("-")>-1&&o.split("-")[1],c=o.indexOf("-")>-1?o.split("-")[0]:o;if("fill-extrusion"===o){c=o;p=!1}l.forEach((r=>{if(r.data[t]&&c===this.getLayerType(t,r.data)&&(!p||r.categories.find((e=>e.id===parseFloat(p))))){let t=!1;i.length>0&&r.categories.forEach((e=>{i.indexOf(e.id)>-1&&(t=!0)}));if(!t){var n=this.makeFeatureJSON(r.data);let t=!1;if(n.features[0]){t=this.makeFeatureWithProperties(r,n.features[0]);s.features.push(t)}r.data.open_popup_on_load&&-1===o.indexOf("-")&&setTimeout((()=>{if(e){const o=turf.pointOnFeature(n);e.fire("click",{mapsterFeatureID:t.properties.post_id,lngLat:o.geometry.coordinates,originalEvent:{}})}}),500)}}}));return s}createMarkerGeoJSON(e,t){let o=!!t.indexOf("-")&&t.split("-")[1];var r={type:"FeatureCollection",features:[]};r.features=e.filter((e=>!o&&"marker"===e.data.location_style||!(!o||"marker"!==e.data.location_style||!e.categories.find((e=>e.id===parseFloat(o)))))).map((e=>{e.post_id=e.id;return{type:"Feature",properties:e,geometry:e.data.location}}));return r}makeFeatureWithProperties(e,t){var o=JSON.parse(JSON.stringify(t));o.id=e.id;o.properties.post_id=e.id;for(var r in e.data)-1===["polygon","line","location","popup","popup_style"].indexOf(r)&&this.assignToProperty(o,e.data,r);o.properties.dashed_line&&o.properties.dash_properties_dash_length&&(o.properties.dash_properties_line_dash_array=[parseFloat(o.properties.dash_properties_dash_length),parseFloat(o.properties.dash_properties_gap_length)]);(o.properties["label_text_properties_text-translate-x"]||o.properties["label_text_properties_text-translate-y"])&&(o.properties.label_text_properties_offset_array=[parseFloat(o.properties["label_text_properties_text-translate-x"]),parseFloat(o.properties["label_text_properties_text-translate-y"])]);(o.properties["icon_icon_properties_icon-translate-x"]||o.properties["icon_icon_properties_icon-translate-y"])&&(o.properties.icon_icon_properties_offset_array=[parseFloat(o.properties["icon_icon_properties_icon-translate-x"]),parseFloat(o.properties["icon_icon_properties_icon-translate-y"])]);return o}assignToProperty(e,t,o,r){if("object"==typeof t[o])for(var n in t[o])this.assignToProperty(e,t[o],n,r?r+"_"+o:o);else{var a=r?r+"_"+o:o;e.properties[a]=t[o]}}getLayerType(e,t){if("line"===e)return"line";if("polygon"===e){if(!t.polygon_style||"fill"===t.polygon_style)return"fill";if("fill-extrusion"===t.polygon_style)return"fill-extrusion"}if("location"===e){if("circle"===t.location_style)return"circle";if("label"===t.location_style)return"symbol"}}}class MapsterCore{constructor(){}setDataLayers(){}getPostData({post_id:e,single_feature_id:t,feature_ids:o}){const r=new MapsterHelpers;let n=t?`&single_feature_id=${t}`:"",a=o?`&feature_ids=${o}`:"";return fetch(`${window.mapster_params.rest_url}mapster-wp-maps/map${window.mapster_params.qd}id=${e}${n}${a}`).then((e=>e.json())).then((e=>r.formatResponse(e)))}getFeaturesAdmin({locations_ids:e,lines_ids:t,polygons_ids:o,cats:r}){const n=e.concat(t.concat(o));return fetch(`${window.mapster_params.rest_url}mapster-wp-maps/features${window.mapster_params.qd}ids=${JSON.stringify(n)}&categories=${JSON.stringify(r)}`).then((e=>e.json()))}sortLocations({adminFeatures:e}){return e.filter((e=>e.data.location))}sortLines({adminFeatures:e}){return e.filter((e=>e.data.line))}sortPolygons({adminFeatures:e}){return e.filter((e=>e.data.polygon))}doClustering({map:e,map_provider:t,cluster_options:o,circle_clustering:r,label_icon_clustering:n,marker_clustering:a,markers:i,locations:s,lines:l,polygons:p,idsToHide:c}){return(new MapsterHelpers).setClustering(e,t,o,r,n,a,i,s,l,p,c)}loadCustomScripts({map:e,javascript:t,locations:o,lines:r,polygons:n}){t&&window[t]&&(0,window[t])(e,o.concat(r.concat(n)))}setLighting({map:e,map_type:t}){let o=(new MapsterHelpers).getLighting(t);o&&e.getConfig("basemap")&&e.getConfig("basemap","lightPreset")&&e.setConfigProperty("basemap","lightPreset",o)}setMapStyle({map:e,map_type:t}){const o=new MapsterHelpers;"custom-image"===t.map_provider?o.setCustomImageMap(e,t,!0):t.custom_style_json&&""!==t.custom_style_json?e.setStyle(JSON.parse(t.custom_style_json)):e.setStyle(o.getStyle(t))}checkQuerystring({post_id:e,map:t,markers:o,locations:r}){
}loadProjection({map:e,map_provider:t,projection:o}){"mapbox"===t&&e.setProjection({name:o,center:[0,30],parallels:[30,30]})}loadBuildings3D({map:e,map_provider:t,buildings_3d:o}){
}setIPLocation({map:e,view:t}){"location"===t.initial_load&&window.mapster_params.ip&&fetch(`http://ip-api.com/json/${window.mapster_params.ip}`).then((e=>e.json())).then((o=>{"fail"!==o.status&&e.flyTo({center:[o.lon,o.lat],zoom:parseFloat(t.manual_zoom),bearing:parseFloat(t.manual_rotation),pitch:parseFloat(t.manual_pitch)})}))}loadTerrain({map:e,map_provider:t,terrain:o}){if("mapbox"===t)if(o){if(!e.getSource("mapbox-mapster-dem")){e.addSource("mapbox-mapster-dem",{type:"raster-dem",url:"mapbox://mapbox.mapbox-terrain-dem-v1",tileSize:512,maxzoom:14});e.setTerrain({source:"mapbox-mapster-dem",exaggeration:1.5});e.addLayer({id:"sky",type:"sky",paint:{"sky-type":"atmosphere","sky-atmosphere-sun":[0,0],"sky-atmosphere-sun-intensity":15}})}}else{e.getLayer("sky")&&e.removeLayer("sky");e.setTerrain(null);e.getSource("mapbox-mapster-dem")&&e.removeSource("mapbox-mapster-dem")}}layerClick({map:e,interactivity:t,clicking_disabled:o,clickedEvent:r,locations:n,lines:a,polygons:i}){if(t||!o){if(r.is3D)return r.location;let t=r.point?r.point:e.project(r.lngLat),o=e.queryRenderedFeatures(t).filter((e=>["symbol","line","fill","circle"].indexOf(e.source.split("-")[0])>-1)),s=o[0];if(r.mapsterFeatureID){let e=o.find((e=>e.id===r.mapsterFeatureID));e&&(s=e)}r.mapsterFoundFeature&&(s=r.mapsterFoundFeature);return!(!s||"fill"===s.layer.id&&("fill"!==s.layer.id||0===s.layer.paint["fill-opacity"]))&&n.concat(a.concat(i)).find((e=>e.id===s.properties.post_id))}return!1}storeLocatorClick({clickedFeature:e,store_locator_options:t}){const o=new MapsterHelpers;e&&e.data.enable_popup&&("click"===e.data.interaction||o.isMobile()&&e.data.click_on_mobile)&&o.openStoreLocatorClick(t,e.id)}sidebarClick({post_id:e,clickedFeature:t,minimum_sidebar_width:o,maximum_sidebar_width:r,store_locator_options:n,open_popups_in_sidebar:a}){const i=new MapsterHelpers;t&&t.data.enable_popup&&("click"===t.data.interaction||i.isMobile()&&t.data.click_on_mobile)&&i.openSidebarClick(n,a,t,o,r,e)}externalClickLayer({clickedFeature:e}){(new MapsterHelpers).openExternalLink(e)}externalClickMarker({clickedMarker:e}){(new MapsterHelpers).openExternalLink(e)}popupClick({map:e,mapLibrary:t,clickedPopup:o,clickedFeature:r,clickedEvent:n,store_locator_options:a,open_popups_in_sidebar:i}){const s=new MapsterHelpers;if(r&&r.data.enable_popup&&("click"===r.data.interaction||s.isMobile()&&r.data.click_on_mobile))return s.openPopup(e,t,o,r,n.lngLat,a,i)}layerHover({map:e,interactivity:t,clicking_disabled:o,hoveredEvent:r,locations:n,lines:a,polygons:i}){if(t||!o){if(r.is3D)return r.location;var s=e.queryRenderedFeatures(r.point).filter((e=>["symbol","line","fill","circle"].indexOf(e.source.split("-")[0])>-1));return!(!s[0]||"fill"===s[0].layer.id&&("fill"!==s[0].layer.id||0===s[0].layer.paint["fill-opacity"]))&&n.concat(a.concat(i)).find((e=>e.id===s[0].properties.post_id))}return!1}layerHoverEffect({map:e,interactivity:t,clicking_disabled:o,hoveredFeature:r}){const n=new MapsterHelpers;n.changeCursor(e,r,"on");"1"===window.mapster_params.activated&&(!t&&o||!r||n.doHover(e,r))}popupHover({map:e,mapLibrary:t,hoveredPopup:o,hoveredFeature:r,hoveredEvent:n,store_locator_options:a}){const i=new MapsterHelpers;if(r&&r.data.enable_popup&&"hover"===r.data.interaction&&(!i.isMobile()||i.isMobile()&&r.data.click_on_mobile))return i.openPopup(e,t,o,r,n.lngLat,a)}markerClick({interactivity:e,clicking_disabled:t,clickedMarker:o}){return!(!e&&t)&&o.mapsterProperties}markerHover({interactivity:e,clicking_disabled:t,hoveredMarker:o}){return!(!e&&t)&&o.mapsterProperties}markerHoverEffect({map:e,mapLibrary:t,interactivity:o,clicking_disabled:r,hoveredMarker:n}){
}openMarkerClickPopup({map:e,mapLibrary:t,clickedMarker:o,clickedFeature:r,clickedPopup:n,store_locator_options:a,open_popups_in_sidebar:i}){const s=new MapsterHelpers;if(!a.enable&&!i&&r&&r.data.enable_popup&&("click"===r.data.interaction||s.isMobile()&&r.data.click_on_mobile)&&r.data.popup_style)if(r.data.popup_style.open_as_modal_immediately)s.openDirectToModal(r);else{const n=new t.Popup(s.returnPopupOptions(r.data));n.setHTML(s.getPopupHTML(r.id,r.data));s.centerPopup(e,n,r);o.setPopup(n)}}openMarkerHoverPopup({map:e,mapLibrary:t,hoveredMarker:o,hoveredFeature:r}){const n=new MapsterHelpers;if(r&&r.data.enable_popup&&"hover"===r.data.interaction&&!n.isMobile()&&r.data.popup_style&&!o.getPopup())if(r.data.popup_style.open_as_modal_immediately)n.openDirectToModal(r);else{const a=new t.Popup(n.returnPopupOptions(r.data));a.setHTML(n.getPopupHTML(r.id,r.data));n.centerPopup(e,a,r);o.setPopup(a).togglePopup()}}markerHoverEffectOff({tempHoverMarker:e,hoveredMarker:t}){
}removeMarkerHoverPopup({hoveredMarker:e}){const t=new MapsterHelpers;e&&e.mapsterProperties.data.enable_popup&&"hover"===e.mapsterProperties.data.interaction&&!t.isMobile()&&(e&&!e.mapsterProperties.data.keep_popup_open_on_hover?e.setPopup(null):e&&e.mapsterProperties.data.keep_popup_open_on_hover&&jQuery(document).on("mousemove.mapster",(function(o){let r=jQuery(`.mapster-feature-popup-${e.mapsterProperties.id}`).closest(".mapboxgl-popup");if(t.mouseIsNear(r,2,o))r.one("mouseleave",(function(){e.setPopup(null);jQuery(document).off("mousemove.mapster")}));else{e.setPopup(null);jQuery(document).off("mousemove.mapster")}})))}layerHoverEffectOff({map:e,interactivity:t,clicking_disabled:o,hoveredFeature:r}){const n=new MapsterHelpers;n.changeCursor(e,r,"off");"1"===window.mapster_params.activated&&(!t&&o||!r||n.doHoverOut(e,r))}removePopupHover({hoveredFeature:e,hoveredPopup:t}){t&&!e.data.keep_popup_open_on_hover?t.remove():t&&e.data.keep_popup_open_on_hover&&jQuery(document).one("mousemove",(function(o){let r=jQuery(`.mapster-feature-popup-${e.id}`).closest(".mapboxgl-popup:hover");r.length?r.one("mouseleave",(function(){t.remove()})):t.remove()}))}setInteractivity({map:e,zoom_on_scroll:t,interactivity:o,allow_rotation_and_pitch:r}){t||e.scrollZoom.disable();if(!o){e.scrollZoom.disable();e.boxZoom.disable();e.dragRotate.disable();e.dragPan.disable();e.keyboard.disable();e.doubleClickZoom.disable();e.touchZoomRotate.disable()}if(o&&!r){e.dragRotate.disable();e.setMaxPitch(0);e.touchZoomRotate.disableRotation()}}setFeaturesToMap({map:e,map_provider:t,locations:o,lines:r,polygons:n}){const a=new MapsterHelpers;[["line","line"],["polygon","fill"],["polygon","fill-extrusion"],["polygon","fill-image"],["location","circle"],["location","symbol"],["location","3d-model"]].forEach((i=>{var s=a.createLayerGeoJSON(e,i[0],i[1],o,r,n,[]);if("3d-model"!==i[1]&&"fill-image"!==i[1])if(e.getSource(i[1])){e.getSource(i[1]).setData(s);a.addIcons(e,i[1],s)}else{e.addSource(i[1],{type:"geojson",data:s});var l=a.getLayerExpressions(i[0],i[1],t);e.addLayer({id:i[1],source:i[1],type:i[1],paint:l.paint,layout:l.layout});a.addIcons(e,i[1],s)}else"3d-model"===i[1]?a.create3DModels(e,o):"fill-image"===i[1]&&a.createFillImages(e,n)}))}setMarkersToMap({map:e,markers:t,mapLibrary:o,locations:r,marker_clustering:n}){r.filter((e=>!e.data.location.coordinates[0]));const a=new MapsterHelpers;let i=[];t.forEach((e=>{r.find((t=>t.id===e.id))?i.push(e):e.remove()}));let s=[];s=s.concat(i);const l=r.filter((e=>"marker"===e.data.location_style));let p=[];l.sort(((e,t)=>{if(e.data.location.coordinates&&t.data.location.coordinates)return e.data.location.coordinates[1]>t.data.location.coordinates[1]?-1:1;if(!e.data.location.coordinates&&-1===p.indexOf(e.title)){alert(`A point is missing coordinates. See ${e.title}.`);p.push(e.title)}if(!t.data.location.coordinates&&-1===p.indexOf(t.title)){alert(`A point is missing coordinates. See ${t.title}.`);p.push(t.title)}}));l.forEach((t=>{if(!i.find((e=>e.mapsterProperties.id===t.id))){var r=a.getMarkerStyles(t),l=a.makeFeatureJSON(t.data).features[0].geometry.coordinates,p=new o.Marker(r).setLngLat(l);p.mapsterProperties=t;n||p.addTo(e);s.push(p);t.data.open_popup_on_load&&setTimeout((()=>{jQuery(p.getElement()).trigger("click")}),100)}}));return s}setHeatmap({map:e,mapLibrary:t,markers:o,locations:r,heatmap:n}){
}setMapSize({post_id:e,layout:t}){var o="#mapster-wp-maps-"+e;const r=new MapsterHelpers;if(!t.full_page){jQuery(o).height(t.height+t.height_units);jQuery(o).width(t.width+t.width_units);r.setMapBreakpointSizes(e,t)}if(t.full_page){jQuery(o).height(window.innerHeight+t.height_units);jQuery(o).width("100%")}if(t.full_page&&t.ignore_container)if(t.map_only){let e=jQuery(".mapster-wp-maps-container").clone();jQuery("html").attr("style","margin-top : 0px !important; overflow-y: hidden;");jQuery("body").children().each((function(){jQuery(this).is("script")||jQuery(this).is("style")||jQuery(this).hide()}));jQuery("body").prepend(e)}else{jQuery(`<div id="margin-compensator" style="padding-bottom: ${window.innerHeight}px"></div>`).insertAfter(o);jQuery(o).css("marginLeft",-1*jQuery(o).offset().left+"px");jQuery(o).width(window.innerWidth+"px");jQuery(o).css("position","absolute")}}setMapMoveEndVariables({map:e}){jQuery('.acf-field[data-name="manual_pitch"]').find(".acf-label label").html(`Manual Pitch <i>(currently: ${e.getPitch()})</i>`);jQuery('.acf-field[data-name="manual_zoom"]').find(".acf-label label").html(`Manual Zoom <i>(currently: ${e.getZoom()})</i>`);jQuery('.acf-field[data-name="manual_rotation"]').find(".acf-label label").html(`Manual Rotation <i>(currently: ${e.getBearing()})</i>`);const{lng:t,lat:o}=e.getCenter();jQuery('.acf-field[data-name="manual_latitude"]').find(".acf-label label").html(`Manual Latitude <i>(currently: ${o})</i>`);jQuery('.acf-field[data-name="manual_longitude"]').find(".acf-label label").html(`Manual Longitude <i>(currently: ${t})</i>`)}setDefaultAccessToken(){""===jQuery('.acf-field[data-name="access_token"]').find(":input").val()&&jQuery('.acf-field[data-name="access_token"]').find(":input").val(window.mapster_params.mapbox_access_token)}setMapType({map_type:e}){if("mapbox"!==e.map_provider){""!==e.access_token&&(maplibregl.accessToken=e.access_token);return maplibregl}if(""!==e.access_token){mapboxgl.accessToken=e.access_token;return mapboxgl}window.alert(window.mapster_params.strings["Mapbox Token Warning"])}setSubmissionModal({post_id:e,map:t,mapLibrary:o,submission:r}){const n=new MapsterHelpers;jQuery(document).on("click",`#mapster-submit-${e}`,(function(){const a=jQuery(this).data("type"),i=jQuery(this).data("header");jQuery(`.mapster-submit-${e} .mapster-submission-modal-title`).text(i);jQuery(`.mapster-submit-${e} #mapster-submission-modal-overlay-${e}`).parent().detach().appendTo("body");jQuery(`.mapster-submit-${e} #mapster-submission-modal-${e}`).parent().detach().appendTo("body");r.submission_interface.categories.length>0?fetch(`${window.mapster_params.rest_url}mapster-wp-maps/submission-info${window.mapster_params.qd}categories=${r.submission_interface.categories.join(",")}`).then((e=>e.json())).then((i=>{n.loadModalSteps(e,t,o,a,i,r)})):n.loadModalSteps(e,t,o,a,!1,r)}));jQuery(document).on("click",".mapster-submission-modal-close",(function(){jQuery(".mapster-submission-modal-overlay").fadeOut(50);jQuery(".mapster-submission-modal").fadeOut(100)}))}setMap({post_id:e,mapLibrary:t,map:o,locations:r,lines:n,polygons:a}){var i="mapster-wp-maps-"+e;const s=new MapsterHelpers;let l=!0,p="manual"===o.view.initial_load?[parseFloat(o.view.manual_longitude),parseFloat(o.view.manual_latitude)]:s.getDefaultCenter();if(jQuery(`#${i}`).data("latitude")&&"null"!==jQuery(`#${i}`).data("latitude")&&jQuery(`#${i}`).data("longitude")&&"null"!==jQuery(`#${i}`).data("longitude")){p=[parseFloat(jQuery(`#${i}`).data("longitude")),parseFloat(jQuery(`#${i}`).data("latitude"))];l=!1}let c="manual"===o.view.initial_load?parseFloat(o.view.manual_zoom):s.getDefaultZoom();if(jQuery(`#${i}`).data("zoom")&&"null"!==jQuery(`#${i}`).data("zoom")){c=parseFloat(jQuery(`#${i}`).data("zoom"));l=!1}const d={renderWorldCopies:o.layout.duplicate_horizontally,style:s.getStyle(o.map_type),container:i,fitBoundsOptions:{padding:20,maxZoom:18},cooperativeGestures:o.cooperative_gestures,projection:{name:o.map_type.projection?o.map_type.projection:"mercator",center:[0,30],parallels:[30,30]},bounds:"fit-features"===o.view.initial_load&&l?s.getMapBounds(r,n,a):null,center:p,zoom:c,preserveDrawingBuffer:!!o.print_control&&o.print_control.enable,pitch:o.view.manual_pitch?parseFloat(o.view.manual_pitch):0,bearing:o.view.manual_rotation?parseFloat(o.view.manual_rotation):0,attributionControl:!1,logoPosition:o.logo_control?o.logo_control.position:"bottom-left"};let u=s.getLighting(o.map_type);u&&(d.config={basemap:{lightPreset:u}});if("1"===window.mapster_params.activated){if(o.restricted_movement.restrict_movement){let e=o.restricted_movement.allowed_bounds.southwest_longitude,t=o.restricted_movement.allowed_bounds.southwest_latitude,r=o.restricted_movement.allowed_bounds.northeast_longitude,n=o.restricted_movement.allowed_bounds.northeast_latitude;if(""!==e&&""!==t&&""!==r&&""!==n){let o=[[parseFloat(e),parseFloat(t)],[parseFloat(r),parseFloat(n)]];d.maxBounds=o}let a=o.restricted_movement.allowed_zoom.min_zoom;""!==a&&(d.minZoom=parseFloat(a));let i=o.restricted_movement.allowed_zoom.max_zoom;""!==i&&(d.maxZoom=parseFloat(i))}o.map_type.map_language&&(d.language=o.map_type.map_language);o.view.padding_around_bounds&&0!==o.view.padding_around_bounds&&(d.fitBoundsOptions.padding=parseInt(o.view.padding_around_bounds))}const m=new t.Map(d);o.map_type.custom_style_json&&""!==o.map_type.custom_style_json&&m.setStyle(JSON.parse(o.map_type.custom_style_json));"custom-image"===o.map_type.map_provider&&s.setCustomImageMap(m,o.map_type);o.map_compare&&o.map_compare.enable_map_slider&&o.map_compare.compared_map&&s.setMapCompare(t,m,e,o.map_compare);o.load_3d_model_libraries&&window.Threebox&&(window.tb=new window.Threebox(m,m.getCanvas().getContext("webgl"),{defaultLights:!0,enableSelectingObjects:!0}));window[`mapsterMap${e}`]=m;s.setProjectionGlobe(m,o.map_type);jQuery(".mapster-wp-maps-loader-container").hide();return m}setLoader({post_id:e,loading:t}){const o=new MapsterConstants;jQuery("#mapster-wp-maps-"+e).append(o.loaderHTML(t))}setLoaderDone({post_id:e}){jQuery("#mapster-wp-maps-"+e+" .mapster-map-loader").fadeOut()}setMapResize({map:e}){e.resize()}setStreetViewControl(){}setMapTypeControl(){}setZoomControl({map:e,mapLibrary:t,controls:o,control_menu:r,zoom_control:n}){const a=new MapsterHelpers;return a.addMapControl(e,o.zoomControl,n.enable,n.position,!1,a.isInControlMenu(r,"zoom_control"),t.NavigationControl)}setAttributionControl({map:e,mapLibrary:t,controls:o,attribution_control:r,map_type:n}){if("mapbox"===n.map_provider)return(new MapsterHelpers).addMapControl(e,o.attributionControl,!0,r.position,!1,!1,t.AttributionControl)}setControlOrder({control_order:e}){return!(!e||"1"!==window.mapster_params.activated)&&JSON.parse(e)}setControlMenu({map:e,mapLibrary:t,post_id:o,controls:r,control_menu:n}){
}setElevationControl({map:e,mapLibrary:t,controls:o,control_menu:r,elevation_line_chart:n,post_id:a,lines:i}){
}set3DControl(e){const{map:t,mapLibrary:o,control_menu:r,controls:n}=e,a=new MapsterHelpers;return a.addMapControl(t,n["3dControl"],e["3d_control"].enable,e["3d_control"].position,!1,a.isInControlMenu(r,"3d_control"),PitchToggle)}setScaleControl({map:e,mapLibrary:t,controls:o,control_menu:r,scale_control:n}){const a=new MapsterHelpers;return a.addMapControl(e,o.scaleControl,n.enable,n.position,!1,a.isInControlMenu(r,"scale_control"),t.ScaleControl)}setPrintControl({map:e,mapLibrary:t,controls:o,control_menu:r,print_control:n}){const a=new MapsterHelpers;return!!n&&a.addMapControl(e,o.printControl,n.enable,n.position,!1,a.isInControlMenu(r,"print_control"),PrintControl)}setGeolocationControl({map:e,mapLibrary:t,controls:o,control_menu:r,geolocation_control:n}){const a=new MapsterHelpers,i={showAccuracyCircle:n.show_accuracy_circle,showUserHeading:n.show_user_heading,trackUserLocation:n.show_user_heading||n.track_user_location};"1"===window.mapster_params.activated&&n.enable_high_accuracy&&(i.positionOptions={enableHighAccuracy:!0,maximumAge:0,timeout:5e3});const s=a.addMapControl(e,o.geolocationControl,n.enable,n.position,!1,a.isInControlMenu(r,"geolocation_control"),t.GeolocateControl,i);a.setGeolocationOnLoad(n);return s}setFullscreenControl({map:e,mapLibrary:t,controls:o,control_menu:r,fullscreen_control:n}){const a=new MapsterHelpers;return a.addMapControl(e,o.fullscreenControl,n.enable,n.position,!1,a.isInControlMenu(r,"fullscreen_control"),t.FullscreenControl)}setGeocoderControl({map:e,mapLibrary:t,controls:o,control_menu:r,geocoder_control:n}){const a=new MapsterHelpers;if("undefined"!=typeof MapboxGeocoder){var i={accessToken:t.accessToken,mapboxgl:t,placeholder:n.placeholder};""!==n.limit_results&&(i.countries=n.limit_results);n.marker_color&&""!==n.marker_color&&(i.marker={color:n.marker_color});if(n.accept_latlngs){
}if(n.limit_by_bounds&&"1"===window.mapster_params.activated){let e=n.bounds_limit.southwest_longitude,t=n.bounds_limit.southwest_latitude,o=n.bounds_limit.northeast_longitude,r=n.bounds_limit.northeast_latitude;if(""!==e&&""!==t&&""!==o&&""!==r){let n=[parseFloat(e),parseFloat(t),parseFloat(o),parseFloat(r)];i.bbox=n}}return a.addMapControl(e,o.geocoderControl,n.enable,n.position,!1,a.isInControlMenu(r,"geocoder_control"),MapboxGeocoder,i)}}setDirectionsControl({map:e,mapLibrary:t,controls:o,control_menu:r,directions_control:n}){if("undefined"!=typeof MapboxDirections){const i=new MapsterHelpers;var a={accessToken:t.accessToken,mapboxgl:t,unit:n.unit,profile:n.profile,interactive:!1,placeholderOrigin:n.placeholderOrigin};return i.addMapControl(e,o.directionsControl,n.enable,n.position,!1,i.isInControlMenu(r,"directions_control"),MapboxDirections,a)}}setSearchBoxControl({map:e,mapLibrary:t,controls:o,control_menu:r,searchbox_control:n,post_id:a}){const i=new MapsterHelpers;if(n&&"undefined"!=typeof MapsterSearchBoxControl){const s={post_id:a,mapLibrary:t,accessToken:t.accessToken,position:n.position};return i.addMapControl(e,o.searchBoxControl,n.enable,n.position,!1,i.isInControlMenu(r,"searchbox_control"),MapsterSearchBoxControl,s)}}setCustomSearchFilterControl({map:e,mapLibrary:t,controls:o,control_menu:r,custom_search_filter:n,locations:a,lines:i,polygons:s,markers:l}){const p=new MapsterHelpers;if("undefined"!=typeof MapboxGeocoder){var c={mapboxgl:t,marker:!1,flyTo:!1,placeholder:n.placeholder};n.include_geocoder?c.accessToken=t.accessToken:c.localGeocoderOnly=!0;""!==n.limit_results&&(c.countries=n.limit_results);if(n.limit_by_bounds&&"1"===window.mapster_params.activated){let e=n.bounds_limit.southwest_longitude,t=n.bounds_limit.southwest_latitude,o=n.bounds_limit.northeast_longitude,r=n.bounds_limit.northeast_latitude;if(""!==e&&""!==t&&""!==o&&""!==r){let n=[parseFloat(e),parseFloat(t),parseFloat(o),parseFloat(r)];c.bbox=n}}(c=p.applyProSearchFilter(n,c)).localGeocoder=e=>p.searchLocalFeatures(n.search_type,e,a,i,s);const d=p.addMapControl(e,o.customSearchControl,n.enable,n.position,!1,p.isInControlMenu(r,"custom_search_filter"),MapboxGeocoder,c);if(d){d.on("result",(({result:o})=>{const r=l.find((e=>e.mapsterProperties.id===o.id)),n=a.find((e=>e.id===o.id));let i={};o.bbox?i={bounds:o.bbox}:o.center&&(i={center:o.center});"1"===window.mapster_params.activated&&(r&&r.mapsterProperties.data.default_zoom_level?i.zoom=r.mapsterProperties.data.default_zoom_level:n&&n.data.default_zoom_level&&(i.zoom=n.data.default_zoom_level));i.bounds?e.fitBounds(i.bounds):e.flyTo(i);var s=document.createElement("div");s.innerHTML=o.place_name;jQuery(d._inputEl).val(s.innerHTML);r&&r.mapsterProperties.data.enable_popup&&r.setPopup(new t.Popup(p.returnPopupOptions(r.mapsterProperties.data)).setHTML(p.getPopupHTML(r.mapsterProperties.id,r.mapsterProperties.data))).togglePopup()}));return d}}}setFilterDropdownControl({map:e,mapLibrary:t,controls:o,control_menu:r,filter_dropdown:n,locations:a,lines:i,polygons:s,markers:l}){const p=new MapsterHelpers;if("undefined"!=typeof MapboxGeocoder){var c={mapboxgl:t,localGeocoderOnly:!0,marker:!1,placeholder:n.placeholder,minLength:0,limit:1e3,flyTo:!1,localGeocoder:e=>p.searchLocalFeatures("exact-match",e,a,i,s,n.display_images)};const d=p.addMapControl(e,o.filterDropdownControl,n.enable,n.position,!1,p.isInControlMenu(r,"filter_dropdown"),MapboxGeocoder,c);if(d){n.enable&&p.modifyDropdown(d,a);d.on("result",(t=>{const o=l.find((e=>e.mapsterProperties.id===t.result.id)),r=a.find((e=>e.id===t.result.id));let n={};t.result.bbox?n={bounds:t.result.bbox}:t.result.center&&(n={center:t.result.center});"1"===window.mapster_params.activated&&(o&&o.mapsterProperties.data.default_zoom_level?n.zoom=o.mapsterProperties.data.default_zoom_level:r&&r.data.default_zoom_level&&(n.zoom=r.data.default_zoom_level));e.flyTo(n);if(o&&o.mapsterProperties.data.enable_popup){if("click"===o.mapsterProperties.data.interaction)o.getElement().click();else if("hover"===o.mapsterProperties.data.interaction){const e=new Event("mouseenter");o.getElement().dispatchEvent(e)}}else r&&r.data.enable_popup}))}return d}}setCategoryFilterControl({map:e,mapLibrary:t,post_id:o,controls:r,control_menu:n,cluster_options:a,category_filter:i,markers:s,dataLayers:l,locations:p,lines:c,polygons:d,map_provider:u,label_icon_clustering:m,circle_clustering:f,marker_clustering:h}){const _=new MapsterHelpers,g={post_id:o,functionality:i.functionality,independent_children:i.independent_children,initial_visibility:i.initial_visibility,category_order:i.category_order,category_display:i.category_display,checkbox_display:i.checkbox_display,reset_button:i.reset_button,pre_selected_categories:i.pre_selected_categories,additional_filters:i.additional_filters,accordion_layout:i.accordion_layout,excluded_categories:i.excluded_categories,show_number_of_features:i.show_number_of_features,cluster_options:a,markers:s,dataLayers:l,locations:p,lines:c,polygons:d,map_provider:u,circle_clustering:f,label_icon_clustering:m,marker_clustering:h};return _.addMapControl(e,r.categoryFilterControl,i.enable,i.position,i.render_in_external_div,_.isInControlMenu(n,"category_filter"),CategoryControl,g)}setListControl({map:e,mapLibrary:t,post_id:o,controls:r,control_menu:n,list:a,locations:i,lines:s,polygons:l,markers:p}){const c=new MapsterHelpers,d={post_id:o,sort_by_distance:a.sort_by_distance,show_distance:a.show_distance,units:a.units,group_by_category:a.group_by_category,list_order:a.list_order,listing_type:a.listing_type,display_images:a.display_images,number_of_locations:a.number_of_locations,store_locator_options:a.store_locator_options,locations:i,lines:s,polygons:l,markers:p,mapLibrary:t};return c.addMapControl(e,r.listControl,a.enable,a.position,a.render_in_external_div,c.isInControlMenu(n,"list"),ListControl,d)}setDownloadControl({map:e,mapLibrary:t,post_id:o,controls:r,control_menu:n,download_control:a,locations:i,lines:s,polygons:l}){
}setCustomHTMLControl({map:e,mapLibrary:t,controls:o,control_menu:r,custom_html_control:n}){
}setLayerControl({map:e,mapLibrary:t,post_id:o,controls:r,control_menu:n,layer_control:a}){
}setStyleControl({map:e,mapLibrary:t,post_id:o,controls:r,control_menu:n,style_control:a,map_type:i}){
}autoAnimateGlobe({map:e,globe_animation:t,globe_animation_speed:o,globe_animation_direction:r}){
}setListingPosts({post_id:e,map:t,listing_page:o,locations:r,lines:n,polygons:a}){
}setJqueryEvents(){
}}class MapsterContainer{constructor(e,t,o,r){this.core={};this.MapsterMap=r;this.post_id=e;this.single_feature_id=t;this.feature_ids=o;this.postResponse;this.mapLibrary;this.markers=[];this.controls=[];this.clusterLayers=[];this.clickedEvent;this.clickedFeature;this.clickedPopup;this.clickedMarker;this.hoveredEvent;this.hoveredFeature;this.hoveredPopup;this.hoveredMarker;this.tempHoverMarker;this.map;this.postResponseAdmin;this.adminFeatures;this.controlOrder;this.dataLayers;this.defineCore()}defineCore(){const e=new MapsterCore;this.core.set_accesstokendefault={args:[],hook:"access_token_set",func:e.setDefaultAccessToken};this.core.define_postResponse={args:["post_id","single_feature_id","feature_ids"],hook:"data_fetched",func:e.getPostData,promise:!0};this.core.set_mapSize={args:["post_id","postResponse.map.layout"],hook:"map_size_set",func:e.setMapSize};this.core.define_mapLibrary={args:["postResponse.map.map_type"],hook:"map_library_set",func:e.setMapType};this.core.set_submissionModal={args:["post_id","map","mapLibrary","postResponse.map.submission"],hook:"submission_modal_initialized",func:e.setSubmissionModal};this.core.define_map={args:["post_id","mapLibrary","postResponse.map","postResponse.locations","postResponse.lines","postResponse.polygons"],hook:"map_set",func:e.setMap};this.core.set_moveendVariables={args:["map"],hook:"map_moveend",func:e.setMapMoveEndVariables};this.core.set_jquery_events={args:[],hook:"jquery_events_set",func:e.setJqueryEvents};this.core.set_loader={args:["post_id","postResponse.map.loading"],hook:"loading_icon_started",func:e.setLoader};this.core.set_loaderdone={args:["post_id"],hook:"loading_icon_done",func:e.setLoaderDone};this.core.set_mapresize={args:["map"],hook:"map_resize_set",func:e.setMapResize};this.core.set_ipload={args:["map","postResponse.map.view"],hook:"map_set_ip_on_load",func:e.setIPLocation};this.core.set_querystringLoad={args:["post_id","map","markers","postResponse.locations"],hook:"check_querystring",func:e.checkQuerystring};this.core.set_listingposts={args:["post_id","map","postResponse.map.listing_page","postResponse.locations","postResponse.lines","postResponse.polygons"],hook:"map_set_listing_posts",func:e.setListingPosts};this.core.define_dataLayers={args:["map","postResponse.map.map_type.map_provider","dataLayers","postResponse.locations","postResponse.lines","postResponse.polygons"],hook:"map_datalayers_set",func:e.setDataLayers,callback:this.MapsterMap.setDataLayerEvents};this.core.set_mapfeatures={args:["map","postResponse.map.map_type.map_provider","postResponse.locations","postResponse.lines","postResponse.polygons"],hook:"map_features_set",func:e.setFeaturesToMap,callback:this.MapsterMap.setLayerEvents};this.core.define_markers={args:["map","markers","mapLibrary","postResponse.locations","postResponse.map.marker_clustering"],hook:"map_markers_set",func:e.setMarkersToMap,callback:this.MapsterMap.setMarkerEvents};this.core.set_heatmap={args:["map","markers","postResponse.locations","postResponse.map.heatmap"],hook:"map_heatmap_set",func:e.setHeatmap};this.core.define_controlOrder={args:["postResponse.map.control_order"],hook:"control_order_set",func:e.setControlOrder};this.core["define_controls.controlMenu"]={args:["map","mapLibrary","post_id","controls","postResponse.map.control_menu"],hook:"control_menu_set",func:e.setControlMenu};this.core["define_controls.elevationControl"]={args:["map","mapLibrary","post_id","controls","postResponse.map.control_menu","postResponse.map.elevation_line_chart","post_id","postResponse.lines"],hook:"elevation_control_set",func:e.setElevationControl};this.core["define_controls.zoomControl"]={args:["map","mapLibrary","controls","postResponse.map.control_menu","postResponse.map.zoom_control"],hook:"zoom_control_set",func:e.setZoomControl};this.core["define_controls.attributionControl"]={args:["map","mapLibrary","controls","postResponse.map.attribution_control","postResponse.map.map_type"],hook:"attribution_control_set",func:e.setAttributionControl};this.core["define_controls.streetViewControl"]={args:["map","mapLibrary","controls","postResponse.map.street_view_control"],hook:"street_view_control_set",func:e.setStreetViewControl};this.core["define_controls.mapTypeControl"]={args:["map","mapLibrary","controls","postResponse.map.map_type_control"],hook:"map_type_control_set",func:e.setMapTypeControl};this.core["define_controls.geocoderControl"]={args:["map","mapLibrary","controls","postResponse.map.control_menu","postResponse.map.geocoder_control"],hook:"geocoder_control_set",func:e.setGeocoderControl};this.core["define_controls.searchBoxControl"]={args:["map","mapLibrary","post_id","controls","postResponse.map.control_menu","postResponse.map.searchbox_control"],hook:"geocoder_control_set",func:e.setSearchBoxControl};this.core["define_controls.directionsControl"]={args:["map","mapLibrary","controls","postResponse.map.control_menu","postResponse.map.directions_control"],hook:"directions_control_set",func:e.setDirectionsControl};this.core["define_controls.3dControl"]={args:["map","mapLibrary","controls","postResponse.map.control_menu","postResponse.map.3d_control"],hook:"3d_control_set",func:e.set3DControl};this.core["define_controls.scaleControl"]={args:["map","mapLibrary","controls","postResponse.map.control_menu","postResponse.map.scale_control"],hook:"scale_control_set",func:e.setScaleControl};this.core["define_controls.printControl"]={args:["map","mapLibrary","controls","postResponse.map.control_menu","postResponse.map.print_control"],hook:"print_control_set",func:e.setPrintControl};this.core["define_controls.geolocationControl"]={args:["map","mapLibrary","controls","postResponse.map.control_menu","postResponse.map.geolocation_control"],hook:"geolocation_control_set",func:e.setGeolocationControl};this.core["define_controls.fullscreenControl"]={args:["map","mapLibrary","controls","postResponse.map.control_menu","postResponse.map.fullscreen_control"],hook:"fullscreen_control_set",func:e.setFullscreenControl};this.core["define_controls.downloadControl"]={args:["map","mapLibrary","post_id","controls","postResponse.map.control_menu","postResponse.map.download_control","postResponse.locations","postResponse.lines","postResponse.polygons"],hook:"download_control_set",func:e.setDownloadControl};this.core["define_controls.customHTMLControl"]={args:["map","mapLibrary","controls","postResponse.map.control_menu","postResponse.map.custom_html_control"],hook:"custom_html_control_set",func:e.setCustomHTMLControl};this.core["define_controls.layerControl"]={args:["map","mapLibrary","post_id","controls","postResponse.map.control_menu","postResponse.map.layer_control"],hook:"layer_control_set",func:e.setLayerControl};this.core["define_controls.styleControl"]={args:["map","mapLibrary","post_id","controls","postResponse.map.control_menu","postResponse.map.style_control","postResponse.map.map_type"],hook:"style_control_set",func:e.setStyleControl};this.core["define_controls.customSearchControl"]={args:["map","mapLibrary","controls","postResponse.map.control_menu","postResponse.map.filter.custom_search_filter","postResponse.locations","postResponse.lines","postResponse.polygons","markers"],hook:"customSearch_control_set",func:e.setCustomSearchFilterControl};this.core["define_controls.filterDropdownControl"]={args:["map","mapLibrary","controls","postResponse.map.control_menu","postResponse.map.filter.filter_dropdown","postResponse.locations","postResponse.lines","postResponse.polygons","markers"],hook:"filterDropdown_control_set",func:e.setFilterDropdownControl};this.core["define_controls.categoryFilterControl"]={args:["map","mapLibrary","post_id","controls","postResponse.map.control_menu","postResponse.map.cluster_options","postResponse.map.filter.category_filter","markers","dataLayers","postResponse.locations","postResponse.lines","postResponse.polygons","postResponse.map.map_type.map_provider","postResponse.map.circle_clustering","postResponse.map.label_icon_clustering","postResponse.map.marker_clustering"],hook:"categoryFilter_control_set",func:e.setCategoryFilterControl};this.core["define_controls.listControl"]={args:["map","mapLibrary","post_id","controls","postResponse.map.control_menu","postResponse.map.list","postResponse.locations","postResponse.lines","postResponse.polygons","markers"],hook:"list_control_set",func:e.setListControl};this.core.set_autoanimate={args:["map","postResponse.map.view.globe_animation","postResponse.map.view.globe_animation_speed","postResponse.map.view.globe_animation_direction"],hook:"globe_autoanimate_set",func:e.autoAnimateGlobe};this.core.define_clusterLayers={args:["map","postResponse.map.map_type.map_provider","postResponse.map.cluster_options","postResponse.map.circle_clustering","postResponse.map.label_icon_clustering","postResponse.map.marker_clustering","markers","postResponse.locations","postResponse.lines","postResponse.polygons"],hook:"map_clustering_set",func:e.doClustering,callback:this.MapsterMap.setDynamicLayerEvents};this.core.set_customscripts={args:["map","postResponse.map.javascript","postResponse.locations","postResponse.lines","postResponse.polygons"],hook:"custom_scripts_set",func:e.loadCustomScripts};this.core.set_interactivity={args:["map","postResponse.map.zoom_on_scroll","postResponse.map.interactivity","postResponse.map.allow_rotation_and_pitch"],hook:"interactivity_set",func:e.setInteractivity};this.core.set_mapstyle={args:["map","postResponse.map.map_type"],hook:"map_style_set",func:e.setMapStyle,callback:this.MapsterMap.idleReload};this.core.set_lighting={args:["map","postResponse.map.map_type"],hook:"map_lighting_set",func:e.setLighting};this.core.set_terrain={args:["map","postResponse.map.map_type.map_provider","postResponse.map.map_type.terrain"],hook:"map_terrain_set",func:e.loadTerrain};this.core.set_buildings3d={args:["map","postResponse.map.map_type.map_provider","postResponse.map.map_type.buildings_3d"],hook:"map_buildings3d_set",func:e.loadBuildings3D};this.core.set_projection={args:["map","postResponse.map.map_type.map_provider","postResponse.map.map_type.projection"],hook:"map_projection_set",func:e.loadProjection};this.core.define_clickedFeature={args:["map","postResponse.map.interactivity","postResponse.map.clicking_disabled","clickedEvent","postResponse.locations","postResponse.lines","postResponse.polygons"],hook:"layer_feature_clicked",func:e.layerClick};this.core.set_storelocatorclick={args:["clickedFeature","postResponse.map.list.store_locator_options"],hook:"",func:e.storeLocatorClick};this.core.set_sidebarclick={args:["post_id","clickedFeature","postResponse.map.minimum_sidebar_width","postResponse.map.maximum_sidebar_width","postResponse.map.list.store_locator_options","postResponse.map.open_popups_in_sidebar"],hook:"",func:e.sidebarClick};this.core.define_clickedPopup={args:["map","mapLibrary","clickedPopup","clickedFeature","clickedEvent","postResponse.map.list.store_locator_options","postResponse.map.open_popups_in_sidebar"],hook:"popup_opened_from_layer_click",func:e.popupClick};this.core.define_hoveredFeature={args:["map","postResponse.map.interactivity","postResponse.map.clicking_disabled","hoveredEvent","postResponse.locations","postResponse.lines","postResponse.polygons"],hook:"layer_feature_hovered",func:e.layerHover};this.core.set_hoverEffects={args:["map","postResponse.map.interactivity","postResponse.map.clicking_disabled","hoveredFeature","dataLayers"],hook:"",func:e.layerHoverEffect};this.core.define_hoveredPopup={args:["map","mapLibrary","hoveredPopup","hoveredFeature","hoveredEvent","postResponse.map.list.store_locator_options","postResponse.map.open_popups_in_sidebar"],hook:"popup_opened_from_layer_hover",func:e.popupHover};this.core.set_hoverEffectsOff={args:["map","postResponse.map.interactivity","postResponse.map.clicking_disabled","hoveredFeature","dataLayers"],hook:"",func:e.layerHoverEffectOff};this.core.set_hoveredPopupOff={args:["hoveredFeature","hoveredPopup"],hook:"popup_closed_from_layer_hover",func:e.removePopupHover};this.core.set_externallink={args:["clickedFeature"],hook:"external_link_opened",func:e.externalClickLayer};this.core.define_clickedFeature_fromMarker={args:["clickedMarker","postResponse.map.interactivity","postResponse.map.clicking_disabled"],hook:"marker_feature_clicked",func:e.markerClick};this.core.define_hoveredFeature_fromMarker={args:["hoveredMarker","postResponse.map.interactivity","postResponse.map.clicking_disabled"],hook:"marker_feature_hovered",func:e.markerHover};this.core.define_tempHoverMarker={args:["map","mapLibrary","postResponse.map.interactivity","postResponse.map.clicking_disabled","hoveredMarker"],hook:"",func:e.markerHoverEffect};this.core.define_clickedPopup_fromMarker={args:["map","mapLibrary","clickedMarker","clickedFeature","clickedPopup","postResponse.map.list.store_locator_options","postResponse.map.open_popups_in_sidebar"],hook:"popup_opened_from_marker_click",func:e.openMarkerClickPopup};this.core.define_hoveredPopup_fromMarker={args:["map","mapLibrary","hoveredMarker","hoveredFeature","hoveredPopup","postResponse.map.list.store_locator_options","postResponse.map.open_popups_in_sidebar"],hook:"popup_opened_from_marker_hover",func:e.openMarkerHoverPopup};this.core.set_hoverEffectsOff_fromMarker={args:["tempHoverMarker","hoveredMarker"],hook:"",func:e.markerHoverEffectOff};this.core.set_hoveredPopupOff_fromMarker={args:["hoveredMarker","hoveredFeature","hoveredPopup"],hook:"popup_closed_from_marker_hover",func:e.removeMarkerHoverPopup};this.core.define_adminFeatures={args:["postResponseAdmin.locations_ids","postResponseAdmin.lines_ids","postResponseAdmin.polygons_ids","postResponse.cats"],hook:"",func:e.getFeaturesAdmin,promise:!0};this.core["define_postResponse.locations"]={args:["adminFeatures"],hook:"locations_fetched",func:e.sortLocations};this.core["define_postResponse.lines"]={args:["adminFeatures"],hook:"lines_fetched",func:e.sortLines};this.core["define_postResponse.polygons"]={args:["adminFeatures"],hook:"polygons_fetched",func:e.sortPolygons}}doCore(e){let t=this.core[e].args,o=this.core[e].func,r={};for(var n=0;n<t.length;n++){let e=t[n].split(".");r[e[e.length-1]]=this.getObjectProperty(this,t[n])}if(this.core[e].promise)return Promise.resolve(o(r)).then((t=>{this.defineThisObject(e,t);this.core[e].callback&&this.core[e].callback(this,this.MapsterMap);this.core[e].hook&&this.MapsterMap.runHookActions(e,t)}));{const t=o(r);this.defineThisObject(e,t);this.core[e].callback&&this.core[e].callback(this,this.MapsterMap);this.core[e].hook&&this.MapsterMap.runHookActions(e,t);return t}}registerListener(e,t,o,r){this.setStarterValue(e,t,o);jQuery(document).on("change","select"!==t?e:e.replace("select",":input"),(()=>{"check"===t&&this.setObjectProperty(this,o,jQuery(e).is(":checked"));"val"===t&&this.setObjectProperty(this,o,jQuery(e).val());"select"===t&&this.setObjectProperty(this,o,jQuery(e).select2("data").map((e=>e.id)));if(r&&r.length>0)for(var n=0;n<r.length;n++){if(this.core[r[n]].promise){this.MapsterMap.doCoreAndRunActions(r[n]).then((()=>{for(var e=n+1;e<r.length;e++)this.MapsterMap.doCoreAndRunActions(r[e])}));break}this.MapsterMap.doCoreAndRunActions(r[n])}}))}setStarterValue(e,t,o){"check"===t&&this.setObjectProperty(this,o,jQuery(e).is(":checked"));"val"===t&&this.setObjectProperty(this,o,jQuery(e).val());"img"===t&&this.setObjectProperty(this,o,jQuery(e).find("img").attr("src"));"select"===t&&this.setObjectProperty(this,o,jQuery(e).select2("data").map((e=>e.id)))}defineThisObject(e,t){e.indexOf("define_")>-1&&this.setObjectProperty(this,e.split("_")[1],t)}getObjectProperty(e,t){return t.split(".").reduce(((e,t)=>e?.[t]),e)}setObjectProperty(e,t,o){t.split(".").reduce(((e,r)=>{r===t.split(".")[t.split(".").length-1]&&(e[r]=o);void 0===e[r]&&(r===t.split(".")[t.split(".").length-1]?e[r]="":e[r]={});return e?.[r]}),e)}getControlOrder(){return this.controlOrder}}class MapsterMap{constructor(e,t,o,r){this.MapsterContainer=new MapsterContainer(e,o,r,this);this.post_id=e;this.isPublic=t;this.dynamicLayerListenersSet=!1;this.isPublic||this.registerAdminEventListeners()}preInitMap(){return this.isPublic?this.doCoreAndRunActions("define_postResponse"):this.doCoreAndRunActions("define_adminFeatures")}init(){this.preInitMap().then((()=>{if(!this.isPublic){this.doCoreAndRunActions("set_accesstokendefault");this.doCoreAndRunActions("define_postResponse.locations");this.doCoreAndRunActions("define_postResponse.lines");this.doCoreAndRunActions("define_postResponse.polygons")}this.initMap();this.MapsterContainer.map.on("load",(()=>{this.postLoad();this.setMoveEvents(this.MapsterContainer.map)}));this.MapsterContainer.map.on("mapster_custom_style_load",(()=>{this.postStyleSwitch(this.MapsterContainer,this)}))}))}initMap(){this.isPublic&&this.doCoreAndRunActions("set_mapSize");this.doCoreAndRunActions("define_mapLibrary");this.doCoreAndRunActions("define_map");this.doCoreAndRunActions("set_jquery_events");this.doCoreAndRunActions("set_loader");if(this.isPublic){this.doCoreAndRunActions("set_submissionModal");this.doCoreAndRunActions("set_interactivity");this.doCoreAndRunActions("set_listingposts")}}postLoad(){this.doCoreAndRunActions("set_mapresize");this.doCoreAndRunActions("set_terrain");this.doCoreAndRunActions("set_buildings3d");this.doCoreAndRunActions("set_mapfeatures");this.doCoreAndRunActions("define_dataLayers");this.doCoreAndRunActions("define_markers");this.doCoreAndRunActions("set_heatmap");this.doCoreAndRunActions("set_autoanimate");this.setControls();if(this.isPublic){this.doCoreAndRunActions("set_ipload");this.doCoreAndRunActions("define_clusterLayers");this.doCoreAndRunActions("set_querystringLoad")}this.doCoreAndRunActions("set_loaderdone");this.doCoreAndRunActions("set_customscripts")}setControls(){this.doCoreAndRunActions("define_controlOrder");this.doCoreAndRunActions("define_controls.controlMenu");let e=this.getControlOrder(),t=[],o=[{slug:"zoom_control",function:"zoomControl"},{slug:"map_type_control",function:"mapTypeControl"},{slug:"street_view_control",function:"streetViewControl"},{slug:"attribution_control",function:"attributionControl"},{slug:"geocoder_control",function:"geocoderControl"},{slug:"searchbox_control",function:"searchBoxControl"},{slug:"directions_control",function:"directionsControl"},{slug:"3d_control",function:"3dControl"},{slug:"scale_control",function:"scaleControl"},{slug:"print_control",function:"printControl"},{slug:"geolocation_control",function:"geolocationControl"},{slug:"fullscreen_control",function:"fullscreenControl"},{slug:"download_control",function:"downloadControl"},{slug:"custom_html_control",function:"customHTMLControl"},{slug:"layer_control",function:"layerControl"},{slug:"style_control",function:"styleControl"},{slug:"custom_search_filter",function:"customSearchControl"},{slug:"filter_dropdown",function:"filterDropdownControl"},{slug:"category_filter",function:"categoryFilterControl"},{slug:"elevation_line_chart",function:"elevationControl"},{slug:"list",function:"listControl"}];if(e){e.forEach((e=>{let r=o.find((t=>t.slug===e.slug));r&&t.push(r)}));o.forEach((e=>{t.find((t=>t.slug===e.slug))||t.push(e)}))}else t=o;t.forEach((e=>{this.doCoreAndRunActions(`define_controls.${e.function}`)}))}idleReload(e,t){e.map.once("idle",(()=>{t.doCoreAndRunActions("set_loader");t.doCoreAndRunActions("set_lighting");t.doCoreAndRunActions("set_terrain");t.doCoreAndRunActions("set_mapfeatures");t.doCoreAndRunActions("define_dataLayers");t.doCoreAndRunActions("define_markers");t.doCoreAndRunActions("define_clusterLayers");t.doCoreAndRunActions("set_loaderdone")}))}postStyleSwitch(e,t){e.map.once("idle",(()=>{t.doCoreAndRunActions("set_terrain");t.doCoreAndRunActions("set_mapfeatures");t.doCoreAndRunActions("define_dataLayers");t.doCoreAndRunActions("define_markers");t.doCoreAndRunActions("define_clusterLayers");t.doCoreAndRunActions("set_lighting")}))}setLayerEvents(e,t){["symbol","circle","line","fill"].forEach((o=>{e.map.on("click",o,(o=>{e.clickedEvent=o;t.doCoreAndRunActions("define_clickedFeature");t.doCoreAndRunActions("set_storelocatorclick");t.doCoreAndRunActions("set_sidebarclick");t.doCoreAndRunActions("set_externallink");t.doCoreAndRunActions("define_clickedPopup")}));e.map.on("mousemove",o,(o=>{e.hoveredEvent=o;t.doCoreAndRunActions("define_hoveredFeature");t.doCoreAndRunActions("set_hoverEffects");t.doCoreAndRunActions("define_hoveredPopup")}));e.map.on("mouseout",o,(e=>{t.doCoreAndRunActions("set_hoverEffectsOff");t.doCoreAndRunActions("set_hoveredPopupOff")}))}));e.map.on("custom_layer_click",(o=>{e.clickedEvent=o;t.doCoreAndRunActions("define_clickedFeature");t.doCoreAndRunActions("set_storelocatorclick");t.doCoreAndRunActions("set_sidebarclick");t.doCoreAndRunActions("set_externallink");t.doCoreAndRunActions("define_clickedPopup")}));e.map.on("custom_layer_mouseover",(o=>{e.hoveredEvent=o;t.doCoreAndRunActions("define_hoveredFeature");t.doCoreAndRunActions("set_hoverEffects");t.doCoreAndRunActions("define_hoveredPopup")}));e.map.on("custom_layer_mouseout",(e=>{t.doCoreAndRunActions("set_hoverEffectsOff");t.doCoreAndRunActions("set_hoveredPopupOff")}))}setDynamicLayerEvents(e,t){if(e.clusterLayers.length>0&&!this.dynamicLayerListenersSet){e.clusterLayers.forEach((o=>{if(o.indexOf("-")>-1){e.map.on("click",o,(o=>{e.clickedEvent=o;t.doCoreAndRunActions("define_clickedFeature");t.doCoreAndRunActions("set_storelocatorclick");t.doCoreAndRunActions("set_sidebarclick");t.doCoreAndRunActions("set_externallink");t.doCoreAndRunActions("define_clickedPopup")}));e.map.on("mousemove",o,(o=>{e.hoveredEvent=o;t.doCoreAndRunActions("define_hoveredFeature");t.doCoreAndRunActions("set_hoverEffects");t.doCoreAndRunActions("define_hoveredPopup")}));e.map.on("mouseout",o,(e=>{t.doCoreAndRunActions("set_hoverEffectsOff");t.doCoreAndRunActions("set_hoveredPopupOff")}))}}));this.dynamicLayerListenersSet=!0}}setDataLayerEvents(e,t){}setMarkerEvents(e,t){e.markers.forEach((o=>{o.getElement().addEventListener("click",(r=>{e.clickedMarker=o;t.doCoreAndRunActions("define_clickedFeature_fromMarker");t.doCoreAndRunActions("set_storelocatorclick");t.doCoreAndRunActions("set_sidebarclick");t.doCoreAndRunActions("set_externallink");t.doCoreAndRunActions("define_clickedPopup_fromMarker")}));o.getElement().addEventListener("mouseenter",(r=>{e.hoveredMarker=o;t.doCoreAndRunActions("define_hoveredFeature_fromMarker");t.doCoreAndRunActions("define_tempHoverMarker");t.doCoreAndRunActions("define_hoveredPopup_fromMarker")}));o.getElement().addEventListener("mouseleave",(e=>{t.doCoreAndRunActions("set_hoverEffectsOff_fromMarker");t.doCoreAndRunActions("set_hoveredPopupOff_fromMarker")}))}))}setMoveEvents(e){if(!this.isPublic){e.once("idle",(e=>{this.doCoreAndRunActions("set_moveendVariables")}));e.on("moveend",(e=>{this.doCoreAndRunActions("set_moveendVariables")}))}}getControlOrder(){return this.MapsterContainer.getControlOrder()}doCoreAndRunActions(e){return this.MapsterContainer.doCore(e)}runHookActions(e,t){if(window.mwm){let r=this.MapsterContainer.core[e].hook;const n=`${r}/mapster-${this.isPublic?this.post_id:"admin"}`;if(window.mwm.actions[n]){window.mwm.actions[n].funcs;if(window.mwm.actions[n].funcs.length>0)for(var o=0;o<window.mwm.actions[n].funcs.length;o++)window.mwm.actions[n].funcs[o].func(t)}if(window.mwm.actions[r]){window.mwm.actions[r].funcs;if(window.mwm.actions[r].funcs.length>0)for(o=0;o<window.mwm.actions[r].funcs.length;o++)window.mwm.actions[r].funcs[o].func(t)}}}registerAdminEventListeners(){this.MapsterContainer.registerListener('.acf-field[data-name="zoom_on_scroll"] :input',"check","postResponse.map.zoom_on_scroll");this.MapsterContainer.registerListener('.acf-field[data-name="interactivity"] :input',"check","postResponse.map.interactivity");this.MapsterContainer.registerListener('.acf-field[data-name="open_popups_in_sidebar"] :input',"check","postResponse.map.open_popups_in_sidebar");this.MapsterContainer.registerListener('.acf-field[data-name="restrict_movement"] :input',"check","postResponse.map.restricted_movement.restrict_movement");this.MapsterContainer.registerListener('.acf-field[data-name="southwest_longitude"] :input',"val","postResponse.map.restricted_movement.allowed_bounds.southwest_longitude");this.MapsterContainer.registerListener('.acf-field[data-name="southwest_latitude"] :input',"val","postResponse.map.restricted_movement.allowed_bounds.southwest_latitude");this.MapsterContainer.registerListener('.acf-field[data-name="northeast_longitude"] :input',"val","postResponse.map.restricted_movement.allowed_bounds.northeast_longitude");this.MapsterContainer.registerListener('.acf-field[data-name="northeast_latitude"] :input',"val","postResponse.map.restricted_movement.allowed_bounds.northeast_latitude");this.MapsterContainer.registerListener('.acf-field[data-name="min_zoom"] :input',"val","postResponse.map.restricted_movement.allowed_zoom.min_zoom");this.MapsterContainer.registerListener('.acf-field[data-name="max_zoom"] :input',"val","postResponse.map.restricted_movement.allowed_zoom.max_zoom");this.MapsterContainer.registerListener('.acf-field[data-name="control_order"] :input',"val","postResponse.map.control_order");this.MapsterContainer.registerListener('.acf-field[data-name="control_menu"] .acf-field[data-name="enable"] :input',"check","postResponse.map.control_menu.enable",["define_controls.controlMenu"]);this.MapsterContainer.registerListener('.acf-field[data-name="control_menu"] .acf-field[data-name="position"] :input',"val","postResponse.map.control_menu.position",["define_controls.controlMenu"]);this.MapsterContainer.registerListener('.acf-field[data-name="control_menu"] .acf-field[data-name="included_controls"] :input[type="text"]',"val","postResponse.map.control_menu.included_controls",["define_controls.controlMenu"]);this.MapsterContainer.registerListener('.acf-field[data-name="zoom_control"] .acf-field[data-name="enable"] :input',"check","postResponse.map.zoom_control.enable",["define_controls.zoomControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="zoom_control"] .acf-field[data-name="position"] :input',"val","postResponse.map.zoom_control.position",["define_controls.zoomControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="3d_control"] .acf-field[data-name="enable"] :input',"check","postResponse.map.3d_control.enable",["define_controls.3dControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="3d_control"] .acf-field[data-name="position"] :input',"val","postResponse.map.3d_control.position",["define_controls.3dControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="scale_control"] .acf-field[data-name="enable"] :input',"check","postResponse.map.scale_control.enable",["define_controls.scaleControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="scale_control"] .acf-field[data-name="position"] :input',"val","postResponse.map.scale_control.position",["define_controls.scaleControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="print_control"] .acf-field[data-name="enable"] :input',"check","postResponse.map.print_control.enable",["define_controls.printControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="print_control"] .acf-field[data-name="position"] :input',"val","postResponse.map.print_control.position",["define_controls.printControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="attribution_control"] .acf-field[data-name="position"] :input',"val","postResponse.map.attribution_control.position",["define_controls.attributionControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="geolocation_control"] .acf-field[data-name="enable"] :input',"check","postResponse.map.geolocation_control.enable",["define_controls.geolocationControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="geolocation_control"] .acf-field[data-name="position"] :input',"val","postResponse.map.geolocation_control.position",["define_controls.geolocationControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="geolocation_control"] .acf-field[data-name="set_on_load"] :input',"check","postResponse.map.geolocation_control.set_on_load",["define_controls.geolocationControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="fullscreen_control"] .acf-field[data-name="enable"] :input',"check","postResponse.map.fullscreen_control.enable",["define_controls.fullscreenControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="fullscreen_control"] .acf-field[data-name="position"] :input',"val","postResponse.map.fullscreen_control.position",["define_controls.fullscreenControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="street_view_control"] .acf-field[data-name="enable"] :input',"check","postResponse.map.street_view_control.enable",["define_controls.streetViewControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="street_view_control"] .acf-field[data-name="position"] :input',"val","postResponse.map.street_view_control.position",["define_controls.streetViewControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="map_type_control"] .acf-field[data-name="enable"] :input',"check","postResponse.map.map_type_control.enable",["define_controls.mapTypeControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="map_type_control"] .acf-field[data-name="position"] :input',"val","postResponse.map.map_type_control.position",["define_controls.mapTypeControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="download_control"] .acf-field[data-name="enable"] :input',"check","postResponse.map.download_control.enable",["define_controls.downloadControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="download_control"] .acf-field[data-name="position"] :input',"val","postResponse.map.download_control.position",["define_controls.downloadControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="download_control"] .acf-field[data-name="interact_with_filters"] :input',"check","postResponse.map.download_control.interact_with_filters",["define_controls.downloadControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="download_control"] .acf-field[data-name="notify_on_download"] :input',"val","postResponse.map.download_control.notify_on_download",["define_controls.downloadControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="custom_html_control"] .acf-field[data-name="enable"] :input',"check","postResponse.map.custom_html_control.enable",["define_controls.customHTMLControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="custom_html_control"] .acf-field[data-name="position"] :input',"val","postResponse.map.custom_html_control.position",["define_controls.customHTMLControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="custom_html_control"] .acf-field[data-name="custom_html"] :input',"val","postResponse.map.custom_html_control.custom_html",["define_controls.customHTMLControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="layer_control"] .acf-field[data-name="enable"] :input',"check","postResponse.map.layer_control.enable",["define_controls.layerControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="layer_control"] .acf-field[data-name="position"] :input',"val","postResponse.map.layer_control.position",["define_controls.layerControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="layer_control"] .acf-field[data-name="toggleable_layers"] :input',"val","postResponse.map.layer_control.toggleable_layers",["define_controls.layerControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="layer_control"] .acf-field[data-name="toggleable_layer_titles"] :input',"val","postResponse.map.layer_control.toggleable_layer_titles",["define_controls.layerControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="layer_control"] .acf-field[data-name="checkbox_type"] :input',"val","postResponse.map.layer_control.checkbox_type",["define_controls.layerControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="style_control"] .acf-field[data-name="enable"] :input',"check","postResponse.map.style_control.enable",["define_controls.styleControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="style_control"] .acf-field[data-name="position"] :input',"val","postResponse.map.style_control.position",["define_controls.styleControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="style_control"] .acf-field[data-name="toggleable_styles"] :input',"val","postResponse.map.style_control.toggleable_styles",["define_controls.styleControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="style_control"] .acf-field[data-name="toggleable_styles_titles"] :input',"val","postResponse.map.style_control.toggleable_styles_titles",["define_controls.styleControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="style_control"] .acf-field[data-name="initial_style_title"] :input',"val","postResponse.map.style_control.initial_style_title",["define_controls.styleControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="searchbox_control"] .acf-field[data-name="enable"] :input',"check","postResponse.map.searchbox_control.enable",["define_controls.searchBoxControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="searchbox_control"] .acf-field[data-name="position"] :input',"val","postResponse.map.searchbox_control.position",["define_controls.searchBoxControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="geocoder_control"] .acf-field[data-name="enable"] :input',"check","postResponse.map.geocoder_control.enable",["define_controls.geocoderControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="geocoder_control"] .acf-field[data-name="position"] :input',"val","postResponse.map.geocoder_control.position",["define_controls.geocoderControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="geocoder_control"] .acf-field[data-name="limit_results"] :input',"val","postResponse.map.geocoder_control.limit_results",["define_controls.geocoderControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="geocoder_control"] .acf-field[data-name="placeholder"] :input',"val","postResponse.map.geocoder_control.placeholder",["define_controls.geocoderControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="directions_control"] .acf-field[data-name="enable"] :input',"check","postResponse.map.directions_control.enable",["define_controls.directionsControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="directions_control"] .acf-field[data-name="position"] :input',"val","postResponse.map.directions_control.position",["define_controls.directionsControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="directions_control"] .acf-field[data-name="unit"] :input',"val","postResponse.map.directions_control.unit",["define_controls.directionsControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="directions_control"] .acf-field[data-name="profile"] :input',"val","postResponse.map.directions_control.profile",["define_controls.directionsControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="directions_control"] .acf-field[data-name="placeholderOrigin"] :input',"val","postResponse.map.directions_control.placeholderOrigin",["define_controls.directionsControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="custom_search_filter"] .acf-field[data-name="enable"] :input',"check","postResponse.map.filter.custom_search_filter.enable",["define_controls.customSearchControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="custom_search_filter"] .acf-field[data-name="position"] :input',"val","postResponse.map.filter.custom_search_filter.position",["define_controls.customSearchControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="custom_search_filter"] .acf-field[data-name="include_geocoder"] :input',"check","postResponse.map.filter.custom_search_filter.include_geocoder",["define_controls.customSearchControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="custom_search_filter"] .acf-field[data-name="limit_results"] :input',"val","postResponse.map.filter.custom_search_filter.limit_results",["define_controls.customSearchControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="custom_search_filter"] .acf-field[data-name="number_of_results"] :input',"val","postResponse.map.filter.custom_search_filter.number_of_results",["define_controls.customSearchControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="custom_search_filter"] .acf-field[data-name="placeholder"] :input',"val","postResponse.map.filter.custom_search_filter.placeholder",["define_controls.customSearchControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="filter_dropdown"] .acf-field[data-name="enable"] :input',"check","postResponse.map.filter.filter_dropdown.enable",["define_controls.filterDropdownControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="filter_dropdown"] .acf-field[data-name="position"] :input',"val","postResponse.map.filter.filter_dropdown.position",["define_controls.filterDropdownControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="filter_dropdown"] .acf-field[data-name="placeholder"] :input',"val","postResponse.map.filter.filter_dropdown.placeholder",["define_controls.filterDropdownControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="category_filter"] .acf-field[data-name="enable"] :input',"check","postResponse.map.filter.category_filter.enable",["define_controls.categoryFilterControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="category_filter"] .acf-field[data-name="position"] :input',"val","postResponse.map.filter.category_filter.position",["define_controls.categoryFilterControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="category_filter"] .acf-field[data-name="initial_visibility"] :input',"check","postResponse.map.filter.category_filter.initial_visibility",["define_controls.categoryFilterControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="category_filter"] .acf-field[data-name="functionality"] :input',"val","postResponse.map.filter.category_filter.functionality",["define_controls.categoryFilterControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="category_filter"] .acf-field[data-name="independent_children"] :input',"check","postResponse.map.filter.category_filter.independent_children",["define_controls.categoryFilterControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="category_filter"] .acf-field[data-name="category_display"] :input',"val","postResponse.map.filter.category_filter.category_display",["define_controls.categoryFilterControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="category_filter"] .acf-field[data-name="category_order"] :input',"val","postResponse.map.filter.category_filter.category_order",["define_controls.categoryFilterControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="category_filter"] .acf-field[data-name="checkbox_display"] :input',"val","postResponse.map.filter.category_filter.checkbox_display",["define_controls.categoryFilterControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="category_filter"] .acf-field[data-name="pre_selected_categories"] :input',"val","postResponse.map.filter.category_filter.pre_selected_categories",["define_controls.categoryFilterControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="list"] .acf-field[data-name="enable"] :input',"check","postResponse.map.list.enable",["define_controls.listControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="list"] .acf-field[data-name="position"] :input',"val","postResponse.map.list.position",["define_controls.listControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="list"] .acf-field[data-name="units"] :input',"val","postResponse.map.list.units",["define_controls.listControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="list"] .acf-field[data-name="show_distance"] :input',"check","postResponse.map.list.show_distance",["define_controls.listControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="list"] .acf-field[data-name="sort_by_distance"] :input',"check","postResponse.map.list.sort_by_distance",["define_controls.listControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="list"] .acf-field[data-name="listing_type"] :input',"val","postResponse.map.list.listing_type",["define_controls.listControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="list"] .acf-field[data-name="list_order"] :input',"val","postResponse.map.list.list_order",["define_controls.listControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="list"] .acf-field[data-name="group_by_category"] :input',"check","postResponse.map.list.group_by_category",["define_controls.listControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="list"] .acf-field[data-name="number_of_locations"] :input',"val","postResponse.map.list.number_of_locations",["define_controls.listControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="list"] .acf-field[data-name="store_locator_options"] .acf-field[data-name="enable"] :input',"check","postResponse.map.list.store_locator_options.enable",["define_controls.listControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="list"] .acf-field[data-name="store_locator_options"] .acf-field[data-name="sort_hours_by_day"] :input',"check","postResponse.map.list.store_locator_options.sort_hours_by_day",["define_controls.listControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="locations"] select',"select","postResponseAdmin.locations_ids",["define_adminFeatures","define_postResponse.locations","set_mapfeatures","define_dataLayers","define_markers","define_controls.customSearchControl","define_controls.filterDropdownControl","define_controls.categoryFilterControl","define_controls.listControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="lines"] select',"select","postResponseAdmin.lines_ids",["define_adminFeatures","define_postResponse.lines","set_mapfeatures","define_dataLayers","define_markers","define_controls.customSearchControl","define_controls.filterDropdownControl","define_controls.categoryFilterControl","define_controls.listControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="polygons"] select',"select","postResponseAdmin.polygons_ids",["define_adminFeatures","define_postResponse.polygons","set_mapfeatures","define_dataLayers","define_markers","define_controls.customSearchControl","define_controls.filterDropdownControl","define_controls.categoryFilterControl","define_controls.listControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="add_by_category"] select',"select","postResponse.cats",["define_adminFeatures","define_postResponse.locations","define_postResponse.lines","define_postResponse.polygons","set_mapfeatures","define_dataLayers","define_markers","define_controls.customSearchControl","define_controls.filterDropdownControl","define_controls.categoryFilterControl","define_controls.listControl"]);this.MapsterContainer.registerListener('.acf-field[data-name="manual_latitude"] :input',"val","postResponse.map.view.manual_latitude");this.MapsterContainer.registerListener('.acf-field[data-name="manual_longitude"] :input',"val","postResponse.map.view.manual_longitude");this.MapsterContainer.registerListener('.acf-field[data-name="manual_zoom"] :input',"val","postResponse.map.view.manual_zoom");this.MapsterContainer.registerListener('.acf-field[data-name="manual_pitch"] :input',"val","postResponse.map.view.manual_pitch");this.MapsterContainer.registerListener('.acf-field[data-name="manual_rotation"] :input',"val","postResponse.map.view.manual_rotation");this.MapsterContainer.registerListener('.acf-field[data-name="padding_around_bounds"] :input',"val","postResponse.map.view.padding_around_bounds");this.MapsterContainer.registerListener('.acf-field[data-name="initial_load"] :input',"val","postResponse.map.view.initial_load");this.MapsterContainer.registerListener('.acf-field[data-name="loading_graphic"] :input',"val","postResponse.map.loading.loading_graphic");this.MapsterContainer.registerListener('.acf-field[data-name="background_color"] :input',"val","postResponse.map.loading.background_color");this.MapsterContainer.registerListener('.acf-field[data-name="loader_color"] :input',"val","postResponse.map.loading.loader_color");this.MapsterContainer.registerListener('.acf-field[data-name="custom_loader"]',"img","postResponse.map.loading.custom_loader");this.MapsterContainer.registerListener('.acf-field[data-name="circle_clustering"] :input',"check","postResponse.map.circle_clustering");this.MapsterContainer.registerListener('.acf-field[data-name="label_icon_clustering"] :input',"check","postResponse.map.label_icon_clustering");this.MapsterContainer.registerListener('.acf-field[data-name="enable_heatmap"] :input',"check","postResponse.map.heatmap.enable_heatmap",["set_heatmap"]);this.MapsterContainer.registerListener('.acf-field[data-name="heatmap_layer"] :input',"val","postResponse.map.heatmap.heatmap_layer",["set_heatmap"]);this.MapsterContainer.registerListener('.acf-field[data-name="heatmap_layer_visibility"] :input',"val","postResponse.map.heatmap.heatmap_layer_visibility",["set_heatmap"]);this.MapsterContainer.registerListener('.acf-field[data-name="heatmap_weighted_property"] :input',"val","postResponse.map.heatmap.heatmap_weighted_property",["set_heatmap"]);this.MapsterContainer.registerListener('.acf-field[data-name="heatmap_intensity"] :input',"val","postResponse.map.heatmap.heatmap_intensity",["set_heatmap"]);this.MapsterContainer.registerListener('.acf-field[data-name="heatmap_color_range"] :input',"val","postResponse.map.heatmap.heatmap_color_range",["set_heatmap"]);this.MapsterContainer.registerListener('.acf-field[data-name="heatmap_point_radius"] :input',"val","postResponse.map.heatmap.heatmap_point_radius",["set_heatmap"]);this.MapsterContainer.registerListener('.acf-field[data-name="heatmap_opacity"] :input',"val","postResponse.map.heatmap.heatmap_opacity",["set_heatmap"]);this.MapsterContainer.registerListener('.acf-field[data-name="enable_elevation_chart"] :input',"check","postResponse.map.elevation_line_chart.enable_elevation_chart");this.MapsterContainer.registerListener('.acf-field[data-name="map_provider"] :input',"val","postResponse.map.map_type.map_provider",["define_mapLibrary"]);this.MapsterContainer.registerListener('.acf-field[data-name="map_tile_style_access_token"] :input',"val","postResponse.map.map_type.map_tile_style_access_token",["set_mapstyle"]);this.MapsterContainer.registerListener('.acf-field[data-name="map_tile_style_no_access_token"] :input',"val","postResponse.map.map_type.map_tile_style_no_access_token",["set_mapstyle"]);this.MapsterContainer.registerListener('.acf-field[data-name="access_token"] :input',"val","postResponse.map.map_type.access_token");this.MapsterContainer.registerListener('.acf-field[data-name="custom_mapbox_style"] :input',"val","postResponse.map.map_type.custom_mapbox_style",["set_mapstyle"]);this.MapsterContainer.registerListener('.acf-field[data-name="custom_style_json"] :input',"val","postResponse.map.map_type.custom_style_json",["set_mapstyle"]);this.MapsterContainer.registerListener('.acf-field[data-name="snazzy_map_style"] :input',"val","postResponse.map.map_type.snazzy_map_style",["set_mapstyle"]);this.MapsterContainer.registerListener('.acf-field[data-name="custom_image"] :input',"val","postResponse.map.map_type.custom_image",["set_mapstyle"]);this.MapsterContainer.registerListener('.acf-field[data-name="duplicate_horizontally"] :input',"check","postResponse.map.layout.duplicate_horizontally");this.MapsterContainer.registerListener('.acf-field[data-name="terrain"] :input',"check","postResponse.map.map_type.terrain",["set_terrain"]);this.MapsterContainer.registerListener('.acf-field[data-name="buildings_3d"] :input',"check","postResponse.map.map_type.buildings_3d",["set_buildings3d"]);this.MapsterContainer.registerListener('.acf-field[data-name="map_language"] :input',"val","postResponse.map.map_type.map_language");this.MapsterContainer.registerListener('.acf-field[data-name="projection"] :input',"val","postResponse.map.map_type.projection",["set_projection"]);this.MapsterContainer.registerListener('.acf-field[data-name="globe"] :input',"check","postResponse.map.map_type.globe",[]);this.MapsterContainer.registerListener('.acf-field[data-name="globe_background"] :input',"val","postResponse.map.map_type.globe_background",[])}}class MapsterPublic{constructor(){this.actions={}}add_action(e,t){this.actions[e]||(this.actions[e]={funcs:[]});this.actions[e].funcs.push({func:t})}}window.mwm=new MapsterPublic;CategoryControl.prototype.setHiddenFeatures=function(e){this.dataLayers.forEach((t=>{t.forEach((o=>{o.getProperty("post_id");e.indexOf(o.getProperty("post_id"))>-1?t.overrideStyle(o,{visible:!1}):t.overrideStyle(o,{visible:null})}))}))};CategoryControl.prototype.changeMarker=function(e,t){"hide"===e?t.setVisible(!1):"show"===e&&t.setVisible(!0)};CategoryControl.prototype.adjustMarkerClusters=function(){(new MapsterHelpers).setClustering(this.map,this.map_provider,this.cluster_options,this.circle_clustering,this.label_icon_clustering,this.marker_clustering,this.markers,this.locations,this.lines,this.polygons)};ListControl.prototype.centerMap=function(e,t){this.map.setCenter({lat:e[1],lng:e[0]});this.map.setZoom(t)};ListControl.prototype.fitBounds=function(e,t){this.map.fitBounds({east:e[2],north:e[3],south:e[1],west:e[0]},t)};ListControl.prototype.openPopup=function(e,t){new MapsterHelpers;new google.maps.event.trigger(e,"click")};ListControl.prototype.getCenter=function(){return[this.map.getCenter().lng(),this.map.getCenter().lat()]};MapsterHelpers.prototype.addMapControl=function(e,t,o,r){let n={};n[t]=o;n[t+"Options"]={position:google.maps.ControlPosition[this.transformControlPositionToGoogle(r)]};e.setOptions(n)};MapsterHelpers.prototype.returnHoverLayerStyle=function(e,t,o){if(e.data.line)return{strokeWeight:parseFloat(t.getProperty("hover_effects_hover_width")),strokeColor:t.getProperty("hover_effects_hover_color"),strokeOpacity:parseFloat(t.getProperty("hover_effects_hover_opacity"))/100};if(e.data.polygon)return{fillColor:t.getProperty("hover_effects_hover_color"),fillOpacity:t.getProperty("hover_effects_opacity")/100,strokeWeight:1,strokeColor:t.getProperty("hover_effects_outline-color")};if(e.data.circle){const e=parseFloat(t.getProperty("circle_hover_effects_hover_radius")),o="0"!==t.getProperty("circle_hover_effects_hover_stroke-width")?parseFloat(t.getProperty("circle_hover_effects_hover_stroke-width")):0,r=e+o/2;return{icon:{path:`M-${r},0a${r},${r} 0 1,0 ${2*r},0a${r},${r} 0 1,0 -${2*r},0`,fillColor:t.getProperty("circle_hover_effects_hover_color"),fillOpacity:parseFloat(t.getProperty("circle_hover_effects_hover_opacity"))/100,anchor:new google.maps.Point(0,0),strokeWeight:o,strokeColor:""!==t.getProperty("circle_hover_effects_hover_stroke-color")&&t.getProperty("circle_hover_effects_hover_stroke-color"),strokeOpacity:parseFloat(t.getProperty("circle_hover_effects_hover_stroke-opacity"))/100,scale:1}}}};MapsterHelpers.prototype.setClustering=function(e,t,o,r,n,a,i,s,l,p,c){a&&this.doMarkerClustering(e,t,o,a,i,s,c)};MapsterHelpers.prototype.doMarkerClustering=function(e,t,o,r,n,a,i){this.makeClusters(e,n,o,i)};MapsterHelpers.prototype.makeClusters=function(e,t,o,r){const n={render:({count:e,position:t})=>{const r=new window.markerClusterer.ClusterStats(window.currentGoogleMapsCluster.markers,window.currentGoogleMapsCluster.clusters);let n=e>Math.max(10,r.clusters.markers.mean)?"#ff0000":"#0000ff";
const a=window.btoa(`\n        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 240 240">\n          <circle fill="${n}" cx="120" cy="120" opacity=".6" r="70" />\n          <circle fill="${n}" cx="120" cy="120" opacity=".3" r="90" />\n          <circle fill="${n}" cx="120" cy="120" opacity=".2" r="110" />\n          <circle fill="${n}" cx="120" cy="120" opacity=".1" r="130" />\n        </svg>`);return new google.maps.Marker({position:t,icon:{url:`data:image/svg+xml;base64,${a}`,scaledSize:e>0?new google.maps.Size(45,45):new google.maps.Size(0,0)},label:{text:String(e),color:"rgba(255,255,255,0.9)",fontSize:e>0?"12px":"0px"},zIndex:1e3+e})}};if(window.currentGoogleMapsCluster){window.currentGoogleMapsCluster.reset();window.currentGoogleMapsCluster.clearMarkers();window.currentGoogleMapsCluster=new window.markerClusterer.MarkerClusterer({markers:t,map:e,renderer:n})}else window.currentGoogleMapsCluster=new window.markerClusterer.MarkerClusterer({markers:t,map:e,renderer:n})};MapsterHelpers.prototype.openPopup=function(e,t,o,r,n,a,i){const s=new MapsterHelpers;if(!a.enable&&!i){o&&o.close();return s.openPopupInner(e,r,n)}};MapsterHelpers.prototype.openPopupInner=function(e,t,o,r){if(t.data.popup_style){var n=new google.maps.InfoWindow({maxWidth:t.data.popup_style.max_width});n.setPosition(o);n.setContent(this.getPopupHTML(t.id,t.data));n.open(e);t.data.popup_style.close_button&&setTimeout((()=>{jQuery(`#mapster-popup-${t.data.popup_style.id}`).closest(".gm-style-iw").find("button.gm-ui-hover-effect").css("visibility","visible");jQuery(`#mapster-popup-${t.data.popup_style.id}`).closest(".gm-style-iw").find(".gm-style-iw-chr").css("display","block")}),50);t.data.popup_style.close_on_click&&google.maps.event.addListenerOnce(e,"click",(()=>{n.close()}));t.data.popup_style.close_on_map_move&&google.maps.event.addListenerOnce(e,"drag",(()=>{n.close()}));return n}};MapsterHelpers.prototype.transformControlPositionToGoogle=function(e){return"top-right"===e?"TOP_RIGHT":"top-left"===e?"TOP_LEFT":"bottom-right"===e?"RIGHT_BOTTOM":"bottom-left"===e?"LEFT_BOTTOM":void 0};MapsterHelpers.prototype.getAnchorLocation=function(e,t,o,r){let n=e*o,a=t*o;return"center"===r?new google.maps.Point(n/2,a/2):"left"===r?new google.maps.Point(0,a/2):"right"===r?new google.maps.Point(n,a/2):"top"===r?new google.maps.Point(n/2,0):"bottom"===r?new google.maps.Point(n/2,a):"top-left"===r?new google.maps.Point(0,0):"top-right"===r?new google.maps.Point(n,0):"bottom-left"===r?new google.maps.Point(0,a):"bottom-right"===r?new google.maps.Point(n,a):void 0};MapsterCore.prototype.set3DControl=function(){};MapsterCore.prototype.setDirectionsControl=function(){};MapsterCore.prototype.setFeaturesToMap=function(){};MapsterCore.prototype.setHeatmap=function(){};MapsterCore.prototype.setZoomControl=function({map:e,mapLibrary:t,controls:o,zoom_control:r}){(new MapsterHelpers).addMapControl(e,"zoomControl",r.enable,r.position)};MapsterCore.prototype.setStreetViewControl=function({map:e,mapLibrary:t,controls:o,street_view_control:r}){(new MapsterHelpers).addMapControl(e,"streetViewControl",r.enable,r.position)};MapsterCore.prototype.setMapTypeControl=function({map:e,mapLibrary:t,controls:o,map_type_control:r}){(new MapsterHelpers).addMapControl(e,"mapTypeControl",r.enable,r.position)};MapsterCore.prototype.setScaleControl=function({map:e,mapLibrary:t,controls:o,scale_control:r}){(new MapsterHelpers).addMapControl(e,"scaleControl",r.enable,r.position)};MapsterCore.prototype.setFullscreenControl=function({map:e,mapLibrary:t,controls:o,fullscreen_control:r}){(new MapsterHelpers).addMapControl(e,"fullscreenControl",r.enable,r.position)};MapsterCore.prototype.setGeolocationControl=function({map:e,mapLibrary:t,controls:o,geolocation_control:r}){const n=new MapsterHelpers;o.geolocationControl&&o.geolocationControl.remove();if(r.enable){const t=document.createElement("button");t.textContent=" ";t.classList.add("mapster-google-geolocation-button");e.controls[google.maps.ControlPosition[n.transformControlPositionToGoogle(r.position)]].push(t);t.addEventListener("click",(()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition((t=>{e.setCenter({lat:t.coords.latitude,lng:t.coords.longitude})}),(()=>{}))}));return t}return!1};MapsterCore.prototype.setGeocoderControl=function({map:e,mapLibrary:t,controls:o,geocoder_control:r}){const n=new MapsterHelpers;o.geocoderControl&&o.geocoderControl.remove();if(r.enable){const t=document.createElement("input");t.classList.add("mapster-google-geocoder-input");t.placeholder=r.placeholder;let o={};r.limit_results&&(o.componentRestrictions={country:r.limit_results.split(",")});const a=new google.maps.places.Autocomplete(t,o);e.controls[google.maps.ControlPosition[n.transformControlPositionToGoogle(r.position)]].push(t);a.addListener("place_changed",(t=>{var o=a.getPlace();o.geometry&&e.fitBounds(o.geometry.viewport)}));return t}return!1};MapsterCore.prototype.setCustomSearchFilterControl=function({map:e,mapLibrary:t,controls:o,custom_search_filter:r,locations:n,lines:a,polygons:i}){const s=new MapsterHelpers;o.customSearchControl&&o.customSearchControl.remove();if(r.enable){const t=document.createElement("input");t.classList.add("mapster-google-geocoder-input");t.placeholder=r.placeholder;const o=r.include_geocoder?3:5;t.addEventListener("keyup",(e=>{let t=0;jQuery(".custom-search-filter-result").hide();jQuery(".custom-search-filter-result").each((function(){if(jQuery(this).text().toLowerCase().indexOf(e.target.value.toLowerCase())>-1&&t<o){t+=1;jQuery(this).show()}}))}));jQuery(document).on("mousedown",".custom-search-filter-result",(function(){const t=jQuery(this).data("feature_id"),o=n.concat(a.concat(i)).find((e=>parseInt(e.id)===parseInt(t)));var r=s.makeFeatureJSON(o.data);const l=turf.bbox(r);e.setOptions({maxZoom:10});e.fitBounds({east:l[2],north:l[3],south:l[1],west:l[0]});e.setOptions({maxZoom:void 0})}));let l={};r.include_geocoder&&""!==r.limit_results&&(l.componentRestrictions={country:r.limit_results.split(",")});const p=new google.maps.places.Autocomplete(t,l);e.controls[google.maps.ControlPosition[s.transformControlPositionToGoogle(r.position)]].push(t);p.addListener("place_changed",(t=>{var o=p.getPlace();o.geometry&&e.fitBounds(o.geometry.viewport)}));setTimeout((function(){n.concat(a.concat(i)).forEach((e=>{jQuery(".pac-container").append(`\n          <div class="pac-item custom-search-filter-result" data-feature_id="${e.id}">\n            <span class="pac-icon pac-icon-areas"></span>\n            <span class="pac-item-query">\n              <span class="pac-matched"></span>${e.title}\n            </span>\n            <span>custom place</span>\n          </div>`)}));r.include_geocoder||jQuery(".pac-container").addClass("mapster-no-geocoder")}),500);return t}return!1};MapsterCore.prototype.setFilterDropdownControl=function({map:e,mapLibrary:t,controls:o,filter_dropdown:r,locations:n,lines:a,polygons:i,markers:s}){const l=new MapsterHelpers;o.filterDropdownControl&&o.filterDropdownControl.remove();if(r.enable){const t=document.createElement("select");t.classList.add("mapster-google-filter-dropdown");const o=n.concat(a.concat(i));let s=`<option>${r.placeholder}</option>`;o.forEach((e=>{s+=`<option value="${e.id}">${e.title}</option>`}));t.innerHTML=s;e.controls[google.maps.ControlPosition[l.transformControlPositionToGoogle(r.position)]].push(t);jQuery(document).on("change",".mapster-google-filter-dropdown",(function(t){const o=t.target.value;if(o&&o!==r.placeholder){const t=n.concat(a.concat(i)).find((e=>parseInt(e.id)===parseInt(o)));var s=l.makeFeatureJSON(t.data);const r=turf.bbox(s);e.setOptions({maxZoom:10});e.fitBounds({east:r[2],north:r[3],south:r[1],west:r[0]});e.setOptions({maxZoom:void 0})}}));return t}return!1};MapsterCore.prototype.setCategoryFilterControl=function({map:e,mapLibrary:t,post_id:o,controls:r,cluster_options:n,category_filter:a,markers:i,dataLayers:s,locations:l,lines:p,polygons:c,map_provider:d,label_icon_clustering:u,circle_clustering:m,marker_clustering:f}){const h=new MapsterHelpers,_={post_id:o,functionality:a.functionality,independent_children:a.independent_children,initial_visibility:a.initial_visibility,category_display:a.category_display,checkbox_display:a.checkbox_display,pre_selected_categories:a.pre_selected_categories,additional_filters:a.additional_filters,cluster_options:n,markers:i,dataLayers:s,locations:l,lines:p,polygons:c,map_provider:d,circle_clustering:m,label_icon_clustering:u,marker_clustering:f};r.categoryFilterControl&&r.categoryFilterControl.remove();if(a.enable){const t=new CategoryControl(_).onAddGoogleMap(e);e.controls[google.maps.ControlPosition[h.transformControlPositionToGoogle(a.position)]].push(t);return t}return!1};MapsterCore.prototype.setListControl=function({map:e,mapLibrary:t,post_id:o,controls:r,list:n,locations:a,lines:i,polygons:s,markers:l}){const p=new MapsterHelpers;r.listControl&&r.listControl.remove();if(n.enable){const r={post_id:o,sort_by_distance:n.sort_by_distance,show_distance:n.show_distance,units:n.units,group_by_category:n.group_by_category,list_order:n.list_order,listing_type:n.listing_type,display_images:n.display_images,number_of_locations:n.number_of_locations,store_locator_options:n.store_locator_options,locations:a,lines:i,polygons:s,markers:l,mapLibrary:t},c=new ListControl(r).onAddGoogleMap(e);if(window.innerWidth<768){jQuery(e.__gm.developerProvidedDiv).parent().append(c);c.classList+=" google-maps-list-locator-mobile"}else e.controls[google.maps.ControlPosition[p.transformControlPositionToGoogle(n.position)]].insertAt(0,c);return c}return!1};MapsterCore.prototype.setDownloadControl=function({map:e,mapLibrary:t,controls:o,download_control:r,locations:n,lines:a,polygons:i}){
};MapsterCore.prototype.setMapType=function({map_type:e}){google.maps.event.addDomListenerSaved=google.maps.event.addDomListener;google.maps.event.addDomListener=function(e,t,o,r){const n=console.warn;console.warn=()=>{};google.maps.event.addDomListenerSaved(e,t,o,r);console.warn=n}};MapsterCore.prototype.setInteractivity=function({map:e,zoom_on_scroll:t,interactivity:o}){t||e.setOptions({scrollwheel:!1});o||e.setOptions({scrollwheel:!1,gestureHandling:"none"})};MapsterCore.prototype.setMap=function({post_id:e,mapLibrary:t,map:o,locations:r,lines:n,polygons:a}){var i="mapster-wp-maps-"+e;const s=new MapsterHelpers;jQuery(".mapster-wp-maps-loader-container").hide();const l=new google.maps.Map(document.getElementById(i),{center:"manual"===o.view.initial_load?{lat:parseFloat(o.view.manual_latitude),lng:parseFloat(o.view.manual_longitude)}:{lat:0,lng:0},zoom:"manual"===o.view.initial_load?parseFloat(o.view.manual_zoom):2,fullscreenControl:!1,zoomControl:!1,streetViewControl:!1,scaleControl:!1,panControl:!1,mapTypeControl:!1,styles:""===o.map_type.snazzy_map_style?[]:JSON.parse(o.map_type.snazzy_map_style)});if("fit-features"===o.view.initial_load&&(r.length>0||n.length>0||a.length>0)){const e=s.getMapBounds(r,n,a);l.fitBounds({east:e[2],north:e[3],south:e[1],west:e[0]})}return l};MapsterCore.prototype.setMapStyle=function({map:e,map_type:t}){new MapsterHelpers;t.snazzy_map_style&&""!==t.snazzy_map_style?e.setOptions({styles:JSON.parse(t.snazzy_map_style)}):e.setOptions({styles:[]})};MapsterCore.prototype.setMapResize=function({map:e}){google.maps.event.trigger(e,"resize")};MapsterCore.prototype.layerClick=function({map:e,interactivity:t,clickedEvent:o,locations:r,lines:n,polygons:a}){return!!t&&r.concat(n.concat(a)).find((e=>e.id===o.feature.getProperty("post_id")))};MapsterCore.prototype.layerHover=function({map:e,interactivity:t,hoveredEvent:o,locations:r,lines:n,polygons:a}){return!!t&&r.concat(n.concat(a)).find((e=>e.id===o.feature.getProperty("post_id")))};MapsterCore.prototype.popupClick=function({map:e,mapLibrary:t,clickedPopup:o,clickedFeature:r,clickedEvent:n,store_locator_options:a,open_popups_in_sidebar:i}){const s=new MapsterHelpers;if(r&&r.data.enable_popup&&("click"===r.data.interaction||s.isMobile()&&r.data.click_on_mobile))return s.openPopup(e,t,o,r,n.latLng,a,i)};MapsterCore.prototype.popupHover=function({map:e,mapLibrary:t,hoveredPopup:o,hoveredFeature:r,hoveredEvent:n,store_locator_options:a,open_popups_in_sidebar:i}){const s=new MapsterHelpers;if(r&&r.data.enable_popup&&"hover"===r.data.interaction&&(!s.isMobile()||s.isMobile()&&r.data.click_on_mobile))return s.openPopup(e,t,o,r,n.latLng,a,i)};MapsterCore.prototype.openMarkerClickPopup=function({map:e,mapLibrary:t,clickedMarker:o,clickedFeature:r,clickedPopup:n,store_locator_options:a,open_popups_in_sidebar:i}){const s=new MapsterHelpers;if(r&&r.data.enable_popup&&("click"===r.data.interaction||s.isMobile()&&r.data.click_on_mobile))return s.openPopup(e,t,n,r,{lat:r.data.location.coordinates[1],lng:r.data.location.coordinates[0]},a,i)};MapsterCore.prototype.removePopupHover=function({hoveredFeature:e,hoveredPopup:t}){t&&!e.data.keep_popup_open_on_hover?t.setMap(null):t&&e.data.keep_popup_open_on_hover&&jQuery(document).one("mousemove",(function(o){let r=jQuery(`.mapster-feature-popup-${e.id}`).closest(".mapboxgl-popup:hover");r.length?r.one("mouseleave",(function(){t.setMap(null)})):t.setMap(null)}))};MapsterCore.prototype.layerHoverEffect=function({map:e,interactivity:t,hoveredFeature:o,dataLayers:r}){const n=new MapsterHelpers;r.forEach((e=>{e.forEach((t=>{t.getProperty("post_id");if(o.id===t.getProperty("post_id")){let r=o.data.line?"line":o.data.symbol?"symbol":o.data.circle?"circle":o.data.polygon?"fill":[];("line"===r||"fill"===r?o.data:"circle"===r?o.data.circle:o.data.symbol).hover_effects.hover_enabled&&e.overrideStyle(t,n.returnHoverLayerStyle(o,t,!0))}}))}))};MapsterCore.prototype.openMarkerHoverPopup=function({map:e,mapLibrary:t,hoveredMarker:o,hoveredFeature:r,hoveredPopup:n,store_locator_options:a,open_popups_in_sidebar:i}){const s=new MapsterHelpers;if(r&&r.data.enable_popup&&"hover"===r.data.interaction&&r.data.popup_style)return s.openPopup(e,t,n,r,{lat:r.data.location.coordinates[1],lng:r.data.location.coordinates[0]},a,i)};MapsterCore.prototype.layerHoverEffectOff=function({map:e,interactivity:t,hoveredFeature:o,dataLayers:r}){new MapsterHelpers;o&&r.forEach((e=>{e.forEach((t=>{t.getProperty("post_id");if(o.id===t.getProperty("post_id")){let t=o.data.line?"line":o.data.symbol?"symbol":o.data.circle?"circle":o.data.polygon?"fill":[];("line"===t||"fill"===t?o.data:"circle"===t?o.data.circle:o.data.symbol).hover_effects.hover_enabled&&e.revertStyle()}}))}))};MapsterCore.prototype.markerHoverEffect=function({map:e,mapLibrary:t,interactivity:o,hoveredMarker:r}){
};MapsterCore.prototype.markerHoverEffectOff=function({tempHoverMarker:e,hoveredMarker:t}){
};MapsterCore.prototype.removeMarkerHoverPopup=function({hoveredMarker:e,hoveredFeature:t,hoveredPopup:o}){if(o){const r=new MapsterHelpers;t&&t.data.enable_popup&&"hover"===t.data.interaction&&(e&&!t.data.keep_popup_open_on_hover?o.close():e&&t.data.keep_popup_open_on_hover&&jQuery(document).on("mousemove.mapster",(function(e){let n=jQuery(`.mapster-feature-popup-${t.id}`).closest(".gm-style-iw");if(r.mouseIsNear(n,10,e))n.one("mouseleave",(function(){o.close();jQuery(document).off("mousemove.mapster")}));else{o.close();jQuery(document).off("mousemove.mapster")}})))}};MapsterCore.prototype.setDataLayers=function({map:e,map_provider:t,dataLayers:o,locations:r,lines:n,polygons:a}){const i=new MapsterHelpers;o&&o.forEach((e=>{e.setMap(null)}));let s=[];[["line","line"],["polygon","fill"],["location","circle"]].forEach((t=>{var o=i.createLayerGeoJSON(!1,t[0],t[1],r,n,a,[]);const l=new google.maps.Data({map:e});l.setStyle((e=>{if("line"===t[0]&&"line"===t[1])return{strokeWeight:e.getProperty("width"),strokeColor:e.getProperty("color"),strokeOpacity:e.getProperty("opacity")/100};if("polygon"===t[0]&&"fill"===t[1])return{fillColor:e.getProperty("color"),fillOpacity:e.getProperty("opacity")/100,strokeWeight:1,strokeColor:e.getProperty("outline-color")};if("location"===t[0]&&"circle"===t[1]){const t=parseFloat(e.getProperty("circle_radius")),o="0"!==e.getProperty("circle_stroke-width")?parseFloat(e.getProperty("circle_stroke-width")):0,r=t+o/2;return{icon:{path:`M-${r},0a${r},${r} 0 1,0 ${2*r},0a${r},${r} 0 1,0 -${2*r},0`,fillColor:e.getProperty("circle_color"),fillOpacity:e.getProperty("circle_opacity")/100,anchor:new google.maps.Point(0,0),strokeWeight:o,strokeColor:""!==e.getProperty("circle_stroke-color")&&e.getProperty("circle_stroke-color"),strokeOpacity:parseFloat(e.getProperty("circle_stroke-opacity"))/100,scale:1}}}}));l.addGeoJson(o);s.push(l)}));return s};MapsterCore.prototype.setMarkersToMap=function({map:e,markers:t,mapLibrary:o,locations:r}){const n=new MapsterHelpers,a=new MapsterConstants;let i=[];t.forEach((e=>{r.find((t=>t.id===e.id))?i.push(e):e.setMap(null)}));let s=[];s=s.concat(i);const l=r.filter((e=>"marker"===e.data.location_style||"label"===e.data.location_style));l.sort(((e,t)=>e.data.location.coordinates[1]>t.data.location.coordinates[1]?-1:1));l.forEach((async t=>{if(!i.find((e=>e.mapsterProperties.id===t.id))){let i={position:{lat:n.makeFeatureJSON(t.data).features[0].geometry.coordinates[1],lng:n.makeFeatureJSON(t.data).features[0].geometry.coordinates[0]},map:e,title:t.data.title,mapsterProperties:t,zIndex:10};if("marker"===t.data.location_style){let e=parseFloat(t.data.marker.scale)/100;(l=new google.maps.Marker(i)).setIcon({url:a.markerAsSVG(t.data.marker.color),scaledSize:new google.maps.Size(27*e,41*e),anchor:new google.maps.Point(27*e/2,41*e)});s.push(l)}if("label"===t.data.location_style){if(t.data.icon.icon_on){let e=parseFloat(t.data.icon.icon_properties["icon-size"])/100;if(t.data.icon.icon_properties["icon-image"]){const o=t.data.icon.icon_properties["icon-image"].height,r=t.data.icon.icon_properties["icon-image"].width;i.icon={url:t.data.icon.icon_properties["icon-image"].url,scaledSize:new google.maps.Size(r*e,o*e),anchor:n.getAnchorLocation(r,o,e,t.data.icon.icon_properties["icon-anchor"])};i.opacity=parseFloat(t.data.icon.icon_properties["icon-opacity"])/100}}i.labelContent="";if(t.data.label.label_on){i.labelContent=t.data.label.text_properties["text-field"];i.labelAnchor=new google.maps.Point(0,0);i.labelClass=`mapster-text-label-${t.id}`;var o=`\n            .mapster-text-label-${t.id} {\n              color : ${t.data.label.text_properties["text-color"]};\n              font-size: ${t.data.label.text_properties["text-size"]}px;\n              font-weight: 500;\n              opacity: ${t.data.label.text_properties["text-opacity"]/100};\n              font: ${t.data.label.text_properties["text-font"]};\n              transform: translateX(-50%) translateY(-50%);\n              margin-left: ${10*t.data.label.text_properties["text-translate-x"]}px;\n              margin-top: ${10*t.data.label.text_properties["text-translate-y"]}px;\n              text-shadow: 1px 1px 5px #fff, 1px 1px 5px #fff;\n              -webkit-text-stroke-width: ${.1*t.data.label.text_properties["text-halo-width"]}px;\n              -webkit-text-stroke-color: ${t.data.label.text_properties["text-halo-color"]};\n            }\n          `,r=document.createElement("style");r.innerText=o;document.head.appendChild(r)}var l=new window.markerWithLabel.MarkerWithLabel(i);s.push(l)}t.data.open_popup_on_load&&setTimeout((()=>{new google.maps.event.trigger(l,"click")}),100)}}));return s};MapsterMap.prototype.setLayerEvents=function(e,t){};MapsterMap.prototype.idleReload=function(e,t){};MapsterMap.prototype.init=function(){this.preInitMap().then((()=>{if(!this.isPublic){this.doCoreAndRunActions("set_accesstokendefault");this.doCoreAndRunActions("define_postResponse.locations");this.doCoreAndRunActions("define_postResponse.lines");this.doCoreAndRunActions("define_postResponse.polygons")}this.initMap();this.postLoad()}))};MapsterMap.prototype.setDataLayerEvents=function(e,t){if(e.dataLayers&&e.dataLayers.length>0){e.map;e.dataLayers.forEach((o=>{google.maps.event.addListener(o,"click",(o=>{e.clickedEvent=o;t.doCoreAndRunActions("define_clickedFeature");t.doCoreAndRunActions("set_storelocatorclick");t.doCoreAndRunActions("set_sidebarclick");t.doCoreAndRunActions("set_externallink");t.doCoreAndRunActions("define_clickedPopup")}));google.maps.event.addListener(o,"mouseover",(o=>{e.hoveredEvent=o;t.doCoreAndRunActions("define_hoveredFeature");t.doCoreAndRunActions("set_hoverEffects");t.doCoreAndRunActions("define_hoveredPopup")}));google.maps.event.addListener(o,"mouseout",(e=>{t.doCoreAndRunActions("set_hoverEffectsOff");t.doCoreAndRunActions("set_hoveredPopupOff")}))}))}};MapsterMap.prototype.setMarkerEvents=function(e,t){let o=!1;e.markers.forEach((r=>{google.maps.event.addListener(r,"click",(()=>{e.clickedMarker=r;t.doCoreAndRunActions("define_clickedFeature_fromMarker");t.doCoreAndRunActions("set_storelocatorclick");t.doCoreAndRunActions("set_sidebarclick");t.doCoreAndRunActions("set_externallink");t.doCoreAndRunActions("define_clickedPopup_fromMarker")}));google.maps.event.addListener(r,"mouseover",(()=>{if(!o){o=!0;e.hoveredMarker=r;t.doCoreAndRunActions("define_hoveredFeature_fromMarker");t.doCoreAndRunActions("define_tempHoverMarker");t.doCoreAndRunActions("define_hoveredPopup_fromMarker")}}));google.maps.event.addListener(r,"mouseout",(()=>{o=!1;t.doCoreAndRunActions("set_hoverEffectsOff_fromMarker");t.doCoreAndRunActions("set_hoveredPopupOff_fromMarker")}))}))};!function(e){if(window.mapster_params.public)(o=".mapster-wp-maps",new Promise((e=>{if(document.querySelector(o))return e(document.querySelector(o));const t=new MutationObserver((r=>{if(document.querySelector(o)){e(document.querySelector(o));t.disconnect()}}));t.observe(document.body,{childList:!0,subtree:!0})}))).then((t=>{e(".mapster-wp-maps").each((function(){const t=e(this).attr("id").replace("mapster-wp-maps-",""),o=""!==e(this).data("single_feature_id")&&e(this).data("single_feature_id"),r=""!==e(this).data("feature_ids")&&e(this).data("feature_ids");new MapsterMap(t,window.mapster_params.public,o,r).init()}))}));else{let r="Publish this post to generate an embed code.";const n=new URLSearchParams(window.location.search);if(n.has("post")){let d=window.mapster_params.directory.replace("/admin/","/admin/includes/mapster-embed-map.php");d=d+window.mapster_params.qd+"map_id="+n.get("post");r=`<iframe src="${d}" />`}let a="Publish this post to generate an listing code.";n.has("post")&&(a=`[mapster_listing_posts id="${n.get("post")}"]`);if(document.body.classList.contains("block-editor-page")){e("#mapster-wp-maps-preview").prependTo("#normal-sortables");e(".acf-field-625df5ebf4ecc .acf-input").text(r);e(".acf-field-6507ba6e3053a .acf-input").text(a)}else{e("#mapster-wp-maps-preview").prependTo("#acf_after_title-sortables");e(".acf-field-625df5ebf4ecc .acf-input").text(r);e(".acf-field-6507ba6e3053a .acf-input").text(a)}if(n.has("post")){let u=`\n        [mapster_wp_map_submit map_id="${n.get("post")}" type="create_point"]<br />\n        [mapster_wp_map_submit map_id="${n.get("post")}" type="edit_point" button_text="Edit Point" header_text="Edit Point"]\n      `;e(".acf-field-62bf86b094491 .acf-input").append(u)}let i=acf.getFields().length,s=acf.getFields().filter((e=>"accordion"===e.data.type)).length;i-=s;let l=5,p=0,c=0;function t(e){"select"!==e&&(p+=1);p===i&&l===c&&new MapsterMap("map",window.mapster_params.public,!1).init()}acf.add_action("ready_field",t);acf.addAction("select2_init",(function(e,o,r,n){c+=1;t("select")}))}var o}(jQuery);